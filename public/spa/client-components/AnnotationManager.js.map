{"version":3,"sources":["webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.yaml","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.global.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/RangyManager.global.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.less","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.html?d08a","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.html?3e29","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.html?c5bc","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.html?73e6","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.html?bf7a","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.html?6fbe","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.html?f34c","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.html?5a16","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.html?f3b8","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.html?ce2b","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.html?4807","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.html?7a1f","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.html?bc28","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.html?f566","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/RangyManager.html?3909","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.html?200b","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.html?b531","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.less?034a","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.less?0286","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.less?7fbd","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.less?0a54","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.less?31a7","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.less?f6ef","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.less?bbc0","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.less?5dea","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.less?6c05","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.less?188e","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.less?7f39","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.less?3d20","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.global.less?6641","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.less?5fe9","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.less?c6a7","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/RangyManager.global.less?f2ef","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.less?5cec","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.less?9353","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.js?b6fa","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.less?1499","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.yaml?2e30","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.js?d7e4","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.less?6caa","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.yaml?3347","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.js?b02b","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.less?0cbb","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.yaml?9943","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.js?a4a1","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.less?6fd5","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.yaml?d39b","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.js?ba34","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.less?4f36","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.yaml?949e","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.js?5332","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.less?4c67","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.yaml?5040","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/commons/CommonComputed.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/commons/CommonMethods.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/commons/CommonProps.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/commons/CommonWatch.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.js?caf1","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.less?4c67","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.yaml?26b2","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.js?a261","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.less?6f5e","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.yaml?fe91","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.js?3f53","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.less?caab","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.yaml?57f8","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.js?e797","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.less?0a58","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.yaml?74d9","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.js?65db","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.less?a95e","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.yaml?38c9","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.js?5d2a","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.less?3984","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.yaml?1303","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.global.less?687b","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.js?9e5b","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.less?98f0","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.yaml?cc3c","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.js?fe5f","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.less?0fe3","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.yaml?d45e","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/RangyManager.global.less?1ff5","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/RangyManager.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/RangyManager.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/RangyManager.js?ff47","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/RangyManager.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/rangy/rangy-classapplier.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/rangy/rangy-core.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/rangy/rangy-highlighter.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/rangy/rangy-position.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/rangy/rangy-selectionsaverestore.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/rangy/rangy-textrange.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/rangy/rangy-webpack.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.js?405f","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.less?ae93","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.yaml?90e8","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.html","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.js?3f37","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.js","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.less?d7cd","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.vue","webpack:///./webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.yaml?979f"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA,kCAAkC,MAAM,WAAW,EAAE,4BAA4B,EAAE,2BAA2B,EAAE,iBAAiB,UAAU,WAAW,EAAE,uBAAuB,EAAE,SAAS;AAC1L;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,+BAA+B,EAAE,qCAAqC,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,MAAM,UAAU,+BAA+B,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,aAAa,EAAE,KAAK;AACjQ;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,eAAe;AAC/F;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,eAAe;AAC/F;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,qEAAqE;AACrJ;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,2BAA2B;AAC3G;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA,2BAA2B,mBAAO,CAAC,0HAAqE;AACxG;AACA,cAAc,QAAS,8CAA8C,+BAA+B,cAAc,eAAe,6BAA6B,0BAA0B,wCAAwC,uBAAuB,qBAAqB,GAAG,oDAAoD,cAAc,6BAA6B,GAAG,8DAA8D,8BAA8B,GAAG,0DAA0D,uBAAuB,wBAAwB,GAAG,SAAS,2IAA2I,YAAY,WAAW,UAAU,YAAY,aAAa,aAAa,aAAa,aAAa,MAAM,KAAK,UAAU,YAAY,MAAM,KAAK,YAAY,MAAM,KAAK,YAAY,aAAa,mKAAmK,+BAA+B,cAAc,eAAe,6BAA6B,0BAA0B,wCAAwC,uBAAuB,qBAAqB,GAAG,oDAAoD,cAAc,6BAA6B,GAAG,8DAA8D,8BAA8B,GAAG,0DAA0D,uBAAuB,wBAAwB,GAAG,KAAK;;;;;;;;;;;;ACF5iD,2BAA2B,mBAAO,CAAC,uHAAkE;AACrG;AACA,cAAc,QAAS,UAAU,4IAA4I;;;;;;;;;;;;ACF7K,2BAA2B,mBAAO,CAAC,gIAA2E;AAC9G;AACA,cAAc,QAAS,UAAU,+IAA+I;;;;;;;;;;;;ACFhL,2BAA2B,mBAAO,CAAC,6HAAwE;AAC3G;AACA,cAAc,QAAS,UAAU,kJAAkJ;;;;;;;;;;;;ACFnL,2BAA2B,mBAAO,CAAC,gIAA2E;AAC9G;AACA,cAAc,QAAS,+CAA+C,sBAAsB,GAAG,SAAS,uIAAuI,YAAY,gKAAgK,sBAAsB,GAAG,KAAK;;;;;;;;;;;;ACFzb,2BAA2B,mBAAO,CAAC,gIAA2E;AAC9G;AACA,cAAc,QAAS,+CAA+C,sBAAsB,GAAG,SAAS,8HAA8H,YAAY,uJAAuJ,sBAAsB,GAAG,KAAK;;;;;;;;;;;;ACFva,2BAA2B,mBAAO,CAAC,mIAA8E;AACjH;AACA,cAAc,QAAS,2CAA2C,wBAAwB,uBAAuB,0BAA0B,GAAG,kEAAkE,wBAAwB,4BAA4B,qBAAqB,oBAAoB,wBAAwB,GAAG,sCAAsC,iBAAiB,uBAAuB,uBAAuB,GAAG,uCAAuC,8BAA8B,GAAG,6CAA6C,+BAA+B,GAAG,SAAS,0IAA0I,YAAY,aAAa,aAAa,MAAM,MAAM,YAAY,aAAa,aAAa,WAAW,YAAY,MAAM,KAAK,UAAU,YAAY,aAAa,MAAM,KAAK,YAAY,MAAM,KAAK,YAAY,+JAA+J,wBAAwB,uBAAuB,0BAA0B,GAAG,kEAAkE,wBAAwB,4BAA4B,qBAAqB,oBAAoB,wBAAwB,GAAG,sCAAsC,iBAAiB,uBAAuB,uBAAuB,GAAG,uCAAuC,8BAA8B,GAAG,6CAA6C,+BAA+B,GAAG,KAAK;;;;;;;;;;;;ACF9kD,2BAA2B,mBAAO,CAAC,mIAA8E;AACjH;AACA,cAAc,QAAS,4BAA4B,iBAAiB,uBAAuB,GAAG,SAAS,4IAA4I,UAAU,YAAY,kJAAkJ,iBAAiB,uBAAuB,GAAG,KAAK;;;;;;;;;;;;ACF3c,2BAA2B,mBAAO,CAAC,mIAA8E;AACjH;AACA,cAAc,QAAS,UAAU,2IAA2I;;;;;;;;;;;;ACF5K,2BAA2B,mBAAO,CAAC,mIAA8E;AACjH;AACA,cAAc,QAAS,UAAU,yIAAyI;;;;;;;;;;;;ACF1K,2BAA2B,mBAAO,CAAC,mIAA8E;AACjH;AACA,cAAc,QAAS,yBAAyB,gBAAgB,gBAAgB,gBAAgB,kCAAkC,GAAG,8BAA8B,0BAA0B,oBAAoB,4BAA4B,wBAAwB,qBAAqB,wBAAwB,qBAAqB,uBAAuB,wBAAwB,GAAG,SAAS,qIAAqI,UAAU,UAAU,UAAU,YAAY,MAAM,KAAK,YAAY,WAAW,YAAY,aAAa,aAAa,aAAa,aAAa,aAAa,aAAa,wIAAwI,gBAAgB,gBAAgB,gBAAgB,kCAAkC,GAAG,8BAA8B,0BAA0B,oBAAoB,4BAA4B,wBAAwB,qBAAqB,wBAAwB,qBAAqB,uBAAuB,wBAAwB,GAAG,KAAK;;;;;;;;;;;;ACFnoC,2BAA2B,mBAAO,CAAC,6HAAwE;AAC3G;AACA,cAAc,QAAS,kCAAkC,mCAAmC,GAAG,gDAAgD,0BAA0B,qBAAqB,wBAAwB,uBAAuB,wBAAwB,sBAAsB,GAAG,0BAA0B,uBAAuB,qBAAqB,uBAAuB,GAAG,6BAA6B,uBAAuB,gBAAgB,GAAG,yCAAyC,iCAAiC,wCAAwC,GAAG,SAAS,oIAAoI,YAAY,MAAM,KAAK,YAAY,aAAa,aAAa,aAAa,aAAa,aAAa,MAAM,KAAK,YAAY,aAAa,aAAa,MAAM,KAAK,YAAY,WAAW,KAAK,KAAK,YAAY,aAAa,gJAAgJ,mCAAmC,GAAG,gDAAgD,0BAA0B,qBAAqB,wBAAwB,uBAAuB,wBAAwB,sBAAsB,GAAG,0BAA0B,uBAAuB,qBAAqB,uBAAuB,GAAG,6BAA6B,uBAAuB,gBAAgB,GAAG,yCAAyC,iCAAiC,wCAAwC,GAAG,KAAK;;;;;;;;;;;;ACFvjD,2BAA2B,mBAAO,CAAC,0HAAqE;AACxG;AACA,cAAc,QAAS,6BAA6B,sBAAsB,qBAAqB,GAAG,SAAS,oHAAoH,YAAY,aAAa,2HAA2H,sBAAsB,qBAAqB,GAAG,KAAK;;;;;;;;;;;;ACFta,2BAA2B,mBAAO,CAAC,0HAAqE;AACxG;AACA,cAAc,QAAS,sCAAsC,iBAAiB,oBAAoB,sBAAsB,uBAAuB,eAAe,GAAG,sCAAsC,+BAA+B,6BAA6B,gCAAgC,2BAA2B,yBAAyB,wCAAwC,4BAA4B,iCAAiC,wBAAwB,wCAAwC,SAAS,yDAAyD,iCAAiC,kCAAkC,4BAA4B,qCAAqC,wCAAwC,GAAG,6CAA6C,kBAAkB,GAAG,uDAAuD,eAAe,GAAG,oCAAoC,gBAAgB,gBAAgB,iBAAiB,qBAAqB,uBAAuB,eAAe,GAAG,2CAA2C,qBAAqB,GAAG,SAAS,qIAAqI,UAAU,UAAU,YAAY,aAAa,WAAW,KAAK,KAAK,YAAY,aAAa,aAAa,aAAa,aAAa,aAAa,aAAa,SAAS,KAAK,KAAK,KAAK,YAAY,aAAa,aAAa,aAAa,aAAa,MAAM,KAAK,UAAU,KAAK,KAAK,UAAU,KAAK,KAAK,UAAU,UAAU,UAAU,YAAY,aAAa,WAAW,KAAK,KAAK,YAAY,qJAAqJ,iBAAiB,oBAAoB,sBAAsB,uBAAuB,eAAe,GAAG,sCAAsC,+BAA+B,6BAA6B,gCAAgC,2BAA2B,yBAAyB,wCAAwC,4BAA4B,iCAAiC,wBAAwB,wCAAwC,SAAS,yDAAyD,iCAAiC,kCAAkC,4BAA4B,qCAAqC,wCAAwC,GAAG,6CAA6C,kBAAkB,GAAG,uDAAuD,eAAe,GAAG,oCAAoC,gBAAgB,gBAAgB,iBAAiB,qBAAqB,uBAAuB,eAAe,GAAG,2CAA2C,qBAAqB,GAAG,KAAK;;;;;;;;;;;;ACFtwF,2BAA2B,mBAAO,CAAC,0HAAqE;AACxG;AACA,cAAc,QAAS,+CAA+C,qCAAqC,kBAAkB,eAAe,YAAY,sBAAsB,SAAS,2BAA2B,2BAA2B,4BAA4B,kBAAkB,oBAAoB,KAAK,OAAO,aAAa,4IAA4I,UAAU,KAAK,KAAK,cAAc,oKAAoK,qCAAqC,kBAAkB,eAAe,YAAY,sBAAsB,SAAS,2BAA2B,2BAA2B,4BAA4B,kBAAkB,oBAAoB,KAAK,OAAO,SAAS;;;;;;;;;;;;ACFx5B,2BAA2B,mBAAO,CAAC,0HAAqE;AACxG;AACA,cAAc,QAAS,+EAA+E,2CAA2C,iBAAiB,GAAG,0EAA0E,+BAA+B,GAAG,kFAAkF,iCAAiC,wCAAwC,GAAG,SAAS,iHAAiH,YAAY,WAAW,KAAK,KAAK,YAAY,MAAM,KAAK,YAAY,aAAa,0KAA0K,2CAA2C,iBAAiB,GAAG,0EAA0E,+BAA+B,GAAG,kFAAkF,iCAAiC,wCAAwC,GAAG,KAAK;;;;;;;;;;;;ACFlnC,2BAA2B,mBAAO,CAAC,0HAAqE;AACxG;AACA,cAAc,QAAS,UAAU,mJAAmJ;;;;;;;;;;;;ACFpL,2BAA2B,mBAAO,CAAC,6HAAwE;AAC3G;AACA,cAAc,QAAS,UAAU,uIAAuI;;;;;;;;;;;;;ACFxK;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,aAAa,sCAAsC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB;AACnB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB,uCAAuC;AAC5D;AACA;AACA,sCAAsC,0BAA0B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,sDAAsD,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtHA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,aAAa;AACb,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,aAAa;AACb,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,gBAAgB;AAChB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxFA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,4DAA4D;AACjE;AACA;AACA;AACA,SAAS,0CAA0C;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,8CAA8C;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/DA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,yBAAyB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,oBAAoB,uDAAuD;AAC3E,iBAAiB;AACjB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6DAA6D;AAC1E;AACA;AACA;AACA;AACA;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,gCAAgC,0BAA0B;AAC1D;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iBAAiB;AACnD,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iBAAiB;AACnD,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,8BAA8B;AAChE,kCAAkC,iBAAiB;AACnD,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,iBAAiB;AACnD,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnLA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,yBAAyB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,aAAa,6DAA6D;AAC1E;AACA;AACA;AACA;AACA;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA,gCAAgC,0BAA0B;AAC1D;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qCAAqC;AACzE,oCAAoC,iBAAiB;AACrD,iCAAiC;AACjC,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iBAAiB;AACrD,iCAAiC;AACjC,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,iCAAiC;AACjC,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3HA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,iDAAiD;AACtD;AACA,iBAAiB,kCAAkC;AACnD;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC,iBAAiB;AACjB,WAAW;AACX;AACA;AACA;AACA;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,uCAAuC;AACjE;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7DA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,8BAA8B;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,6BAA6B;AACpC;AACA;AACA,kBAAkB;AAClB,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,oBAAoB,0CAA0C;AAC9D,eAAe,8BAA8B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,+BAA+B,YAAY,WAAW,EAAE;AACxD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,qEAAqE;AAC1E;AACA,iBAAiB,mCAAmC;AACpD,qBAAqB,MAAM,mBAAmB,EAAE;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,mCAAmC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,eAAe;AACjC,qBAAqB,wBAAwB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,iBAAiB,mCAAmC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,iCAAiC,YAAY,WAAW,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,iBAAiB,8CAA8C;AAC/D;AACA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC,iBAAiB;AACjB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClGA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,iCAAiC;AACtC;AACA,iBAAiB,SAAS,yBAAyB,EAAE;AACrD;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA,gBAAgB;AAChB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,gCAAgC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qCAAqC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,iBAAiB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA,qCAAqC,iCAAiC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,uBAAuB;AAC1D;AACA;AACA;AACA;AACA;AACA,sCAAsC,qCAAqC;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA,qCAAqC,EAAE;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,0BAA0B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,qCAAqC;AACxD;AACA;AACA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,iCAAiC,iCAAiC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,0BAA0B;AAClE;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA,2CAA2C,EAAE;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,4BAA4B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA,iBAAiB,oCAAoC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA,yBAAyB,oCAAoC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,iCAAiC;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1VA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,0CAA0C,qBAAqB,EAAE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,sBAAsB,4BAA4B;AAClD;AACA;AACA;AACA;AACA,oBAAoB,2BAA2B;AAC/C,iBAAiB;AACjB,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,uBAAuB;AACvB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,2DAA2D;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,qBAAqB;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,gEAAgE;AACrE;AACA,iBAAiB,4BAA4B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACfA;;AAEA;AACA,cAAc,mBAAO,CAAC,spBAAsT;AAC5U,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,4IAA+E;AACjG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,+mBAAyS;AAC/T,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,yIAA4E;AAC9F,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,6sBAAuU;AAC7V,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,kJAAqF;AACvG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,qrBAAiU;AACvV,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,+IAAkF;AACpG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,osBAAoU;AAC1V,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,kJAAqF;AACvG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,yqBAA2T;AACjV,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,kJAAqF;AACvG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,iuBAAgV;AACtW,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,qJAAwF;AAC1G,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,uuBAAkV;AACxW,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,qJAAwF;AAC1G,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,qtBAA4U;AAClW,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,qJAAwF;AAC1G,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,+sBAA0U;AAChW,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,qJAAwF;AAC1G,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,ktBAA2U;AACjW,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,qJAAwF;AAC1G,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,0pBAAwT;AAC9U,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,+IAAkF;AACpG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,kmBAA+R;AACrT,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,4IAA+E;AACjG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,ooBAAgT;AACtU,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,4IAA+E;AACjG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,ypBAAuT;AAC7U,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,4IAA+E;AACjG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,ylBAA4R;AAClT,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,4IAA+E;AACjG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,+pBAAyT;AAC/U,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,4IAA+E;AACjG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;ACVf;;AAEA;AACA,cAAc,mBAAO,CAAC,6pBAAsT;AAC5U,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,+IAAkF;AACpG,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;ACVf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAAwE,CAAgB,yJAAG,EAAC,C;;;;;;;;;;;;ACA5F;AAAA;AACA;AACA,U;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEe,oF;;;;;;;;;;;;ACzEf;AAAA;AAAA;AAAA;AAAsY,CAAgB,oXAAG,EAAC,C;;;;;;;;;;;;ACA1Z;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACzC;AACL;AACwC;;;AAG3G;AAC4G;AAC5G,gBAAgB,2GAAU;AAC1B,EAAE,0FAAM;AACR,EAAE,6GAAM;AACR,EAAE,sHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AAC2T;AAC3T,WAAW,6UAAM,iBAAiB,qVAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAsY,CAAgB,6bAAG,EAAC,C;;;;;;;;;;;;ACA1Z;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0D;AAC8B;AACrB;AACkB;AACS;;AAE9F;AACA;AACA,U;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,aAAa,sEAAY;AACzB,gCAAgC,0FAAsB;AACtD,wBAAwB,4EAAe;AACvC,+BAA+B,wFAAqB;AACpD,kCAAkC,8FAAwB;AAC1D,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,O;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,O;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEe,gF;;;;;;;;;;;;AC/Qf;AAAA;AAAA,wCAAoE,CAAgB,qJAAG,EAAC,C;;;;;;;;;;;;ACAxF;AAAA;AAAA;AAAA;AAAsX,CAAgB,gXAAG,EAAC,C;;;;;;;;;;;;ACA1Y;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6G;AACzC;AACL;AACwC;;;AAGvG;AACyG;AACzG,gBAAgB,2GAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,yGAAM;AACR,EAAE,kHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AAC2R;AAC3R,WAAW,6SAAM,iBAAiB,qTAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAmW,CAAgB,6ZAAG,EAAC,C;;;;;;;;;;;;ACAvX;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AACA;AACA,U;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEe,mF;;;;;;;;;;;;ACnBf;AAAA;AAAA,wCAAuE,CAAgB,wJAAG,EAAC,C;;;;;;;;;;;;ACA3F;AAAA;AAAA;AAAA;AAA6Z,CAAgB,mXAAG,EAAC,C;;;;;;;;;;;;ACAjb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgH;AACzC;AACL;AACwC;;;AAG1G;AACkH;AAClH,gBAAgB,2GAAU;AAC1B,EAAE,yFAAM;AACR,EAAE,4GAAM;AACR,EAAE,qHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACoW;AACpW,WAAW,sXAAM,iBAAiB,8XAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAqb,CAAgB,seAAG,EAAC,C;;;;;;;;;;;;ACAzc;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAA0E,CAAgB,2JAAG,EAAC,C;;;;;;;;;;;;ACA9F;AAAA;AAAA;AAAA;AAAkF;;AAEpB;AAC2B;AACzF;AACA;;AAEA;AACA;AACA;AACA;AACA,U;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,6BAA6B,sFAAoB;;AAEjD,gBAAgB,8DAAwB;AACxC;AACA,gBAAgB,gFAAiC;AACjD,iBAAiB,gFAAiC;AAClD,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEe,sF;;;;;;;;;;;;AC7Gf;AAAA;AAAA;AAAA;AAAoZ,CAAgB,sXAAG,EAAC,C;;;;;;;;;;;;ACAxa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACzC;AACL;AACwC;;;AAG7G;AAC+G;AAC/G,gBAAgB,2GAAU;AAC1B,EAAE,4FAAM;AACR,EAAE,+GAAM;AACR,EAAE,wHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACmV;AACnV,WAAW,qWAAM,iBAAiB,6WAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAia,CAAgB,qdAAG,EAAC,C;;;;;;;;;;;;ACArb;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAAoE,CAAgB,qJAAG,EAAC,C;;;;;;;;;;;;ACAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACM;AACN;AACI;;AAEgD;AAClB;AACN;;AAE9E;AACA,SAAS,4DAAW;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,SAAS;;AAEjB;AACA;AACA;AACA;AACA;AACA,YAAY,iBAAiB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,gCAAgC,qGAAsB;AACtD,yBAAyB,yFAAgB;AACzC,uBAAuB,qFAAc;AACrC,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC,SAAS;AACT,2BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC,SAAS;AACT,2BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,yBAAyB,OAAO;AAChC,OAAO;AACP,yBAAyB,cAAc;AACvC;AACA;AACA;AACA,KAAK;AACL;AACA,aAAa,+DAAc;AAC3B,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,aAAa,+DAAc;AAC3B,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,WAAW,KAAK,EAAE;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEe,uE;;;;;;;;;;;;AClUf;AAAA;AAAA;AAAA;AAA0Z,CAAgB,gXAAG,EAAC,C;;;;;;;;;;;;ACA9a;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6G;AACzC;AACL;AACwC;;;AAGvG;AACkH;AAClH,gBAAgB,2GAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,yGAAM;AACR,EAAE,kHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AAC2V;AAC3V,WAAW,6WAAM,iBAAiB,qXAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAA4a,CAAgB,6dAAG,EAAC,C;;;;;;;;;;;;ACAhc;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAA2D,CAAgB,4IAAG,EAAC,C;;;;;;;;;;;;ACA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsG;;AAEpD;AACM;AACN;AACI;;AAEtD;AACA,SAAS,4DAAW;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,gCAAgC,qGAAsB;AACtD,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,aAAa,+DAAc;AAC3B,KAAK;AACL;AACA,aAAa,+DAAc;AAC3B,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,aAAa,+DAAc;AAC3B;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;;AAEe,uE;;;;;;;;;;;;ACjIf;AAAA;AAAA;AAAA;AAAiZ,CAAgB,uWAAG,EAAC,C;;;;;;;;;;;;ACAra;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoG;AACzC;AACL;AACwC;;;AAG9F;AACkH;AAClH,gBAAgB,2GAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,gGAAM;AACR,EAAE,yGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACgU;AAChU,WAAW,kVAAM,iBAAiB,0VAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAiZ,CAAgB,kcAAG,EAAC,C;;;;;;;;;;;;ACAra;AAAA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B,KAAK;AACL,uBAAuB,YAAY;AACnC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,6E;;;;;;;;;;;;AC7Bf;AAAA;;AAEe,4E;;;;;;;;;;;;ACFf;AAAe;AACf;AACA;AACA,0B;;;;;;;;;;;;ACHA;AAAA;;AAEe,0E;;;;;;;;;;;;ACFf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AACA;AACA,U;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEe,mF;;;;;;;;;;;;ACzBf;AAAA;AAAA,wCAAuE,CAAgB,wJAAG,EAAC,C;;;;;;;;;;;;ACA3F;AAAA;AAAA;AAAA;AAAya,CAAgB,mXAAG,EAAC,C;;;;;;;;;;;;ACA7b;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgH;AACzC;AACL;AACwC;;;AAG1G;AACqH;AACrH,gBAAgB,2GAAU;AAC1B,EAAE,yFAAM;AACR,EAAE,4GAAM;AACR,EAAE,qHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACiX;AACjX,WAAW,mYAAM,iBAAiB,2YAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAqc,CAAgB,mfAAG,EAAC,C;;;;;;;;;;;;ACAzd;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAsE;AACe;;;AAGrF;AACA;AACA,U;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wBAAwB,4EAAe;AACvC,6BAA6B,sFAAoB;AACjD,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEe,qF;;;;;;;;;;;;AC3Bf;AAAA;AAAA,wCAAyE,CAAgB,0JAAG,EAAC,C;;;;;;;;;;;;ACA7F;AAAA;AAAA;AAAA;AAA2a,CAAgB,qXAAG,EAAC,C;;;;;;;;;;;;ACA/b;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AACzC;AACL;AACwC;;;AAG5G;AACqH;AACrH,gBAAgB,2GAAU;AAC1B,EAAE,2FAAM;AACR,EAAE,8GAAM;AACR,EAAE,uHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACuX;AACvX,WAAW,yYAAM,iBAAiB,iZAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAA2c,CAAgB,yfAAG,EAAC,C;;;;;;;;;;;;ACA/d;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAAmE,CAAgB,oJAAG,EAAC,C;;;;;;;;;;;;ACAvF;AAAA;AACA;AACA,U;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEe,+E;;;;;;;;;;;;AC7Bf;AAAA;AAAA;AAAA;AAAqa,CAAgB,+WAAG,EAAC,C;;;;;;;;;;;;ACAzb;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4G;AACzC;AACL;AACwC;;;AAGtG;AACqH;AACrH,gBAAgB,2GAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,wGAAM;AACR,EAAE,iHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACqW;AACrW,WAAW,uXAAM,iBAAiB,+XAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAyb,CAAgB,ueAAG,EAAC,C;;;;;;;;;;;;ACA7c;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,K;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,0CAA0C,WAAW;;AAErD;AACA;;AAEA;;;AAGA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;;AAEe,6E;;;;;;;;;;;;ACxHf;AAAA;AAAA,wCAAiE,CAAgB,kJAAG,EAAC,C;;;;;;;;;;;;ACArF;AAAA;AAAA;AAAA;AAAma,CAAgB,6WAAG,EAAC,C;;;;;;;;;;;;ACAvb;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0G;AACzC;AACL;AACwC;;;AAGpG;AACqH;AACrH,gBAAgB,2GAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,sGAAM;AACR,EAAE,+GAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AAC+V;AAC/V,WAAW,iXAAM,iBAAiB,yXAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAmb,CAAgB,ieAAG,EAAC,C;;;;;;;;;;;;ACAvc;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AACA;AACA,U;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEe,8E;;;;;;;;;;;;AC9Bf;AAAA;AAAA,wCAAkE,CAAgB,mJAAG,EAAC,C;;;;;;;;;;;;ACAtF;AAAA;AAAA;AAAA;AAAoa,CAAgB,8WAAG,EAAC,C;;;;;;;;;;;;ACAxb;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2G;AACzC;AACL;AACwC;;;AAGrG;AACqH;AACrH,gBAAgB,2GAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,uGAAM;AACR,EAAE,gHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACkW;AAClW,WAAW,oXAAM,iBAAiB,4XAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAsb,CAAgB,oeAAG,EAAC,C;;;;;;;;;;;;ACA1c;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAA8F;;AAE9F;AACA;AACA;AACA;AACA;AACA,U;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,iCAAiC,4FAAuB;AACxD,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,yBAAyB,yBAAyB;AAClD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEe,6E;;;;;;;;;;;;ACjSf;AAAA;AAAA,wCAAiE,CAAgB,kJAAG,EAAC,C;;;;;;;;;;;;ACArF;AAAA;AAAA;AAAA;AAA2Y,CAAgB,6WAAG,EAAC,C;;;;;;;;;;;;ACA/Z;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0G;AACzC;AACL;AACwC;;;AAGpG;AAC+G;AAC/G,gBAAgB,2GAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,sGAAM;AACR,EAAE,+GAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACwT;AACxT,WAAW,0UAAM,iBAAiB,kVAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAsY,CAAgB,0bAAG,EAAC,C;;;;;;;;;;;;ACA1Z;AAAA;AAAA;AAAA;AAA+W,CAAgB,6VAAG,EAAC,C;;;;;;;;;;;;ACAnY;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAAkE,CAAgB,mJAAG,EAAC,C;;;;;;;;;;;;ACAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEgE;AAC2B;;AAErE;;AAEtB;AACA;AACA;AACA;AACA,U;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,uBAAuB,0EAAc;AACrC,iCAAiC,4FAAuB;;AAExD,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA,uBAAuB,cAAc,OAAO,iCAAiC;AAC7E,qBAAqB,cAAc,OAAO,iCAAiC;AAC3E,KAAK;;AAEL;AACA;AACA;AACA;AACA,2BAA2B,cAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kBAAkB,6CAAC;AACnB,+B;AACA;AACA;;AAEA,sBAAsB,6CAAC;AACvB;AACA,yBAAyB,6CAAC;AAC1B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO;AACP;AACA;;AAEA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,6CAAC;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL,GAAG;AACH;;AAEe,8E;;;;;;;;;;;;ACrRf;AAAA;AAAA;AAAA;AAAgY,CAAgB,8WAAG,EAAC,C;;;;;;;;;;;;ACApZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2G;AACzC;AACL;AACwC;AACjB;;;AAGpF;AAC4G;AAC5G,gBAAgB,2GAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,uGAAM;AACR,EAAE,gHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACyS;AACzS,WAAW,2TAAM,iBAAiB,mUAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC5Cf;AAAA;AAAA;AAAA;AAAoX,CAAgB,2aAAG,EAAC,C;;;;;;;;;;;;ACAxY;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA,U;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;;AAEe,qF;;;;;;;;;;;;ACxFf;AAAA;AAAA,wCAAyE,CAAgB,0JAAG,EAAC,C;;;;;;;;;;;;ACA7F;AAAA;AAAA;AAAA;AAAuY,CAAgB,qXAAG,EAAC,C;;;;;;;;;;;;ACA3Z;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AACzC;AACL;AACwC;;;AAG5G;AAC4G;AAC5G,gBAAgB,2GAAU;AAC1B,EAAE,2FAAM;AACR,EAAE,8GAAM;AACR,EAAE,uHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AAC8T;AAC9T,WAAW,gVAAM,iBAAiB,wVAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAyY,CAAgB,gcAAG,EAAC,C;;;;;;;;;;;;ACA7Z;AAAA;AAAA;AAAA;AAA4W,CAAgB,0VAAG,EAAC,C;;;;;;;;;;;;ACAhY;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAC4C;AACtB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,+DAAK;AACnB;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA,GAAG;AACH;AACA;AACA,qBAAqB,6CAA6C;AAClE,mBAAmB,6CAAC;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,6CAA6C;AAClE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,sBAAsB,+DAAK;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;;AAGA;AACA;;AAEA,uBAAuB,6CAAC;;AAExB;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qCAAqC,MAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,MAAM;AAChC;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,+BAA+B,+DAAK;;AAEpC;AACA;AACA,UAAU,+DAAK;AACf,gCAAgC,+DAAK;AACrC;AACA;AACA,SAAS;;;AAGT,oCAAoC,+DAAK;AACzC;;AAEA,2BAA2B,+DAAK;AAChC;AACA;AACA,SAAS;;AAET,gCAAgC,+DAAK;AACrC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B,+DAAK;AACjC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,aAAa,gCAAgC;;AAE7C;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,wBAAwB,+DAAK;AAC7B;AACA;AACA,UAAU,+DAAK;AACf;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;;AAEP;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,MAAM,+DAAK;;AAEX;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,wBAAwB,+DAAK;AAC7B;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAuB,uCAAuC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM,+DAAK;AACX;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAM,+DAAK;AACX,yBAAyB,+DAAK;;AAE9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,+DAAK;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F,UAAU;AACrG,4BAA4B,SAAS,EAAE,EAAE,MAAM;AAC/C;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;;AAEP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,WAAW,YAAY;AACvB;AACA,KAAK;AACL;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;;AAEA;AACA,+BAA+B,+DAAK;AACpC,YAAY,+DAAK;AACjB;AACA;;AAEA,iCAAiC,+DAAK;AACtC,KAAK;AACL;AACA,kBAAkB,+DAAK;AACvB,6BAA6B,+DAAK;;AAElC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,MAAM,6CAAC;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;;AAEe,2E;;;;;;;;;;;;ACp6Bf;AAAA;AAAA,wCAA+D,CAAgB,gJAAG,EAAC,C;;;;;;;;;;;;ACAnF;AAAA;AAAA;AAAA;AAAA;AAA4F;AAC7B;AACL;AACuB;;;AAGjF;AAC4G;AAC5G,gBAAgB,2GAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;;AAEf;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sEAAsE,SAAS;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2DAA2D,SAAS;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6DAA6D,SAAS;AACtE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,uDAAuD;;AAEvD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,kCAAkC;AACrD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,0CAA0C,SAAS;AACnD;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;;AAEpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA8C,SAAS;AACvD;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;;AAEA;AACA;AACA;AACA;;;AAGA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;;;AAIf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iDAAiD,SAAS;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,qCAAqC,2BAA2B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;AC7qCA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,6CAA6C,SAAS;AACtD;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA,uDAAuD,SAAS;AAChE;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mDAAmD,SAAS;AAC5D;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mDAAmD,SAAS;AAC5D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yFAAyF,SAAS;AAClG;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,KAAwF;AACxG;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB,KAAwF;AACxG,gBAAgB,KAA2C;AAC3D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,GAAG;AAC9B;AACA;;AAEA,2BAA2B,GAAG;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+CAA+C;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC,qCAAqC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,yGAAyG,wBAAwB;AACjI;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA8C;AAC9C,4CAA4C,6BAA6B;AACzE;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA,yGAAyG,wBAAwB;;AAEjI;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE,SAAS;AACT;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,0CAA0C;AAC1C;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4CAA4C;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gDAAgD;;AAEhD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C,uBAAuB,KAAK,EAAE;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iCAAiC;AACpE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+BAA+B,iCAAiC;AAChE;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,SAAS;AAC7D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,mCAAmC,oBAAoB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sDAAsD,SAAS;AAC/D;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,6CAA6C,2BAA2B;AACxE;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,SAAS;AAC7D;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,wDAAwD,SAAS;AACjE;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,6DAA6D,SAAS;AACtE;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8DAA8D,SAAS;AACvE;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kDAAkD,SAAS;AAC3D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,wDAAwD,SAAS;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sDAAsD,SAAS;AAC/D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD,8CAA8C;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,6BAA6B;AAC/D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,qDAAqD,SAAS;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;;AAGL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACe,kE;;;;;;;;;;;;ACzvHf;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;;AAEA,oDAAoD,SAAS;AAC7D;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;AACA;AACA,8FAA8F,SAAS;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,wDAAwD,SAAS;AACjE;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,wDAAwD,SAAS;AACjE;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA,wEAAwE,SAAS;AACjF;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;;AAEjB;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oDAAoD,SAAS;AAC7D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,uBAAuB;AACtD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;;AAGnB;AACA;AACA;AACA,mB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;AACA,mBAAmB;;;AAGnB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA,aAAa;AACb;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;;;AAGjB;AACA;AACA;AACA,iB;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA,iBAAiB;;;AAGjB;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;;AAE5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,gEAAgE,SAAS;AACzE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,mBAAmB,SAAS;;AAE5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,CAAC;;;;;;;;;;;;;ACzzBD;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD,SAAS;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2DAA2D,mBAAmB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA,8EAA8E,iBAAiB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,wCAAwC;AACxC,6BAA6B;AAC7B;AACA,wCAAwC;AACxC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;;AAErB,0DAA0D,SAAS;AACnE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mDAAmD,qBAAqB;AACxE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD,C;;;;;;;;;;;;AC9hBA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA,gCAAgC;;AAEhC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gDAAgD,SAAS;AACzD;AACA;;AAEA;AACA;AACA,6BAA6B,QAAQ;AACrC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,wCAAwC,QAAQ;AAChD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+DAA+D,SAAS;AACxE;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;;AAEL;AACA,C;;;;;;;;;;;;ACjPA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;;AAEA;AACA,mCAAmC,yCAAyC;AAC5E;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,SAAS;AAC7D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,+BAA+B;AACtE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mDAAmD,SAAS;AAC5D;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mFAAmF;AACnF;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;AACA;AACA,iDAAiD,SAAS;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA,6BAA6B;AAC7B;AACA;;AAEA;AACA;AACA,iCAAiC;AACjC,iCAAiC;AACjC,iCAAiC;AACjC,iCAAiC;AACjC;AACA;AACA,yCAAyC;AACzC;;AAEA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,iCAAiC;AACjC;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA;AACA,yBAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;;AAET;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,mCAAmC;AACvF;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA,qBAAqB;;AAErB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA,iDAAiD,SAAS;AAC1D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,2BAA2B;AACrE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,wDAAwD,SAAS;AACjE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,yFAAyF,SAAS;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D,SAAS;AACnE;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,C;;;;;;;;;;;;ACl5DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACmC;AACnC;AACA;AACA;AACA;AACkD;AAClD,sEAAY,CAAC,sDAAK;AAClB;AACgD;AAChD,qEAAW,CAAC,sDAAK;;AAEyB;AAC1C,kEAAQ,CAAC,sDAAK;;AAEyC;AACvD,8EAAS,CAAC,sDAAK;;AAE6B;AAC5C,mEAAS,CAAC,sDAAK;AACf;AACA;AACA;AACe,qH;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAA2E,CAAgB,4JAAG,EAAC,C;;;;;;;;;;;;ACA/F;AAAA;AAAA;AAAA;AAAsB;AACoC;;AAE1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,qBAAqB,sEAAY;AACjC,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,0BAA0B,6CAAC;AAC3B;AACA,GAAG;AACH;;AAEe,uF;;;;;;;;;;;;AC5Bf;AAAA;AAAA;AAAA;AAAyY,CAAgB,uXAAG,EAAC,C;;;;;;;;;;;;ACA7Z;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACzC;AACL;AACwC;;;AAG9G;AAC4G;AAC5G,gBAAgB,2GAAU;AAC1B,EAAE,6FAAM;AACR,EAAE,gHAAM;AACR,EAAE,yHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACoU;AACpU,WAAW,sVAAM,iBAAiB,8VAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAA+Y,CAAgB,scAAG,EAAC,C;;;;;;;;;;;;ACAna;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAA+D,CAAgB,gJAAG,EAAC,C;;;;;;;;;;;;ACAnF;AAAA;AACA;AACA,U;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEe,2E;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAyY,CAAgB,2WAAG,EAAC,C;;;;;;;;;;;;ACA7Z;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwG;AACzC;AACL;AACwC;;;AAGlG;AAC+G;AAC/G,gBAAgB,2GAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,oGAAM;AACR,EAAE,6GAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AAC2T;AAC3T,WAAW,6UAAM,iBAAiB,qVAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAAyY,CAAgB,6bAAG,EAAC,C","file":"client-components/AnnotationManager.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"List all {0} annotations...\":\"List all {0} annotation... | List all {0} annotations...\"},\"zh-TW\":{\"List all {0} annotations...\":\"列出全部{0}篇標註...\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"I don\\u0027t know what is \\\\\"{0}\\\\\"?\":\"I don\\u0027t know what is \\\\\"{0}\\\\\"?\",\"Why is \\\\\"{0}\\\\\"?\":\"Why is \\\\\"{0}\\\\\"?\"},\"zh-TW\":{\"I don\\u0027t know what is \\\\\"{0}\\\\\"?\":\"我不知道什麼是「{0}」？\",\"Why is \\\\\"{0}\\\\\"?\":\"為什麼是「{0}」？\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"Hint\":\"顯示說明\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"Hint\":\"顯示教學\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"Back to list\":\"回到列表\",\"Back to full list\":\"回到完整列表\",\"Finding\":\"正在搜尋\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"List Annotations\":\"列出標註\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","exports = module.exports = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".annotation-float-widget[data-v-ca5d3b70] {\\n  position: fixed !important;\\n  left: 1em;\\n  z-index: 1;\\n  width: calc(100vw - 3em);\\n  top: calc(60px + 1em);\\n  max-height: calc(50vh - 60px - 2em);\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n}\\n.annotation-float-widget.bottom[data-v-ca5d3b70] {\\n  top: auto;\\n  bottom: calc(60px + 1em);\\n}\\n.annotation-float-widget.bottom.selecting[data-v-ca5d3b70] {\\n  width: calc(100vw - 13em);\\n}\\n.annotation-float-widget .list-button[data-v-ca5d3b70] {\\n  margin-left: 0.5em;\\n  vertical-align: top;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"AnnotationFloatWidget.less?vue&type=style&index=0&id=ca5d3b70&lang=less&scoped=true&\"],\"names\":[],\"mappings\":\"AAAA;EACE,0BAA0B;EAC1B,SAAS;EACT,UAAU;EACV,wBAAwB;EACxB,qBAAqB;EACrB,mCAAmC;EACnC,kBAAkB;EAClB,gBAAgB;AAClB;AACA;EACE,SAAS;EACT,wBAAwB;AAC1B;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,kBAAkB;EAClB,mBAAmB;AACrB\",\"file\":\"AnnotationFloatWidget.less?vue&type=style&index=0&id=ca5d3b70&lang=less&scoped=true&\",\"sourcesContent\":[\".annotation-float-widget[data-v-ca5d3b70] {\\n  position: fixed !important;\\n  left: 1em;\\n  z-index: 1;\\n  width: calc(100vw - 3em);\\n  top: calc(60px + 1em);\\n  max-height: calc(50vh - 60px - 2em);\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n}\\n.annotation-float-widget.bottom[data-v-ca5d3b70] {\\n  top: auto;\\n  bottom: calc(60px + 1em);\\n}\\n.annotation-float-widget.bottom.selecting[data-v-ca5d3b70] {\\n  width: calc(100vw - 13em);\\n}\\n.annotation-float-widget .list-button[data-v-ca5d3b70] {\\n  margin-left: 0.5em;\\n  vertical-align: top;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"AnnotationManager.less?vue&type=style&index=0&id=1b9dd3da&lang=less&scoped=true&\"}]);\n","exports = module.exports = require(\"../../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"AnnotationDiscussion.less?vue&type=style&index=0&id=19987034&lang=less&scoped=true&\"}]);\n","exports = module.exports = require(\"../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"AnnotationEditorModules.less?vue&type=style&index=0&id=b22b523c&lang=less&scoped=true&\"}]);\n","exports = module.exports = require(\"../../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".annotation-panel-buttons[data-v-0c2da0b0] {\\n  user-select: none;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"ConfusedClarified.less?vue&type=style&index=0&id=0c2da0b0&lang=less&scoped=true&\"],\"names\":[],\"mappings\":\"AAAA;EACE,iBAAiB;AACnB\",\"file\":\"ConfusedClarified.less?vue&type=style&index=0&id=0c2da0b0&lang=less&scoped=true&\",\"sourcesContent\":[\".annotation-panel-buttons[data-v-0c2da0b0] {\\n  user-select: none;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".annotation-panel-buttons[data-v-45a0d506] {\\n  user-select: none;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"MainIdea.less?vue&type=style&index=0&id=45a0d506&lang=less&scoped=true&\"],\"names\":[],\"mappings\":\"AAAA;EACE,iBAAiB;AACnB\",\"file\":\"MainIdea.less?vue&type=style&index=0&id=45a0d506&lang=less&scoped=true&\",\"sourcesContent\":[\".annotation-panel-buttons[data-v-45a0d506] {\\n  user-select: none;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".AnnotaionInstruction[data-v-673c960f] {\\n  vertical-align: top;\\n  padding-top: 0.6em;\\n  padding-bottom: 0.6em;\\n}\\n.show-instruction[data-v-673c960f],\\n.summary[data-v-673c960f] {\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  max-width: 100%;\\n  vertical-align: top;\\n}\\n.show-instruction[data-v-673c960f] {\\n  float: right;\\n  margin-left: 0.5em;\\n  margin-top: -0.4em;\\n}\\n.column[data-v-673c960f]:not(.grid) {\\n  padding: 0.5em !important;\\n}\\n.column:not(.grid).right[data-v-673c960f] {\\n  padding-left: 0 !important;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"AnnotaionInstruction.less?vue&type=style&index=0&id=673c960f&lang=less&scoped=true&\"],\"names\":[],\"mappings\":\"AAAA;EACE,mBAAmB;EACnB,kBAAkB;EAClB,qBAAqB;AACvB;AACA;;EAEE,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;EAChB,eAAe;EACf,mBAAmB;AACrB;AACA;EACE,YAAY;EACZ,kBAAkB;EAClB,kBAAkB;AACpB;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,0BAA0B;AAC5B\",\"file\":\"AnnotaionInstruction.less?vue&type=style&index=0&id=673c960f&lang=less&scoped=true&\",\"sourcesContent\":[\".AnnotaionInstruction[data-v-673c960f] {\\n  vertical-align: top;\\n  padding-top: 0.6em;\\n  padding-bottom: 0.6em;\\n}\\n.show-instruction[data-v-673c960f],\\n.summary[data-v-673c960f] {\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  max-width: 100%;\\n  vertical-align: top;\\n}\\n.show-instruction[data-v-673c960f] {\\n  float: right;\\n  margin-left: 0.5em;\\n  margin-top: -0.4em;\\n}\\n.column[data-v-673c960f]:not(.grid) {\\n  padding: 0.5em !important;\\n}\\n.column:not(.grid).right[data-v-673c960f] {\\n  padding-left: 0 !important;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".right[data-v-6cd6ece2] {\\n  float: right;\\n  margin-top: -0.5em;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"AnnotationEditorHeader.less?vue&type=style&index=0&id=6cd6ece2&lang=less&scoped=true&\"],\"names\":[],\"mappings\":\"AAAA;EACE,YAAY;EACZ,kBAAkB;AACpB\",\"file\":\"AnnotationEditorHeader.less?vue&type=style&index=0&id=6cd6ece2&lang=less&scoped=true&\",\"sourcesContent\":[\".right[data-v-6cd6ece2] {\\n  float: right;\\n  margin-top: -0.5em;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"QuestionTemplate.less?vue&type=style&index=0&id=36896aef&lang=less&scoped=true&\"}]);\n","exports = module.exports = require(\"../../../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"ResourceSearch.less?vue&type=style&index=0&id=154ee022&lang=less&scoped=true&\"}]);\n","exports = module.exports = require(\"../../../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"img[data-v-fa31e19a] {\\n  height: 2em;\\n  width: auto;\\n  float: left;\\n  max-width: inherit !important;\\n}\\n.username[data-v-fa31e19a] {\\n  display: inline-block;\\n  max-width: 100%;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  vertical-align: top;\\n  line-height: 2em;\\n  margin-left: 0.5em;\\n  margin-right: 0.5em;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"UserInformation.less?vue&type=style&index=0&id=fa31e19a&lang=less&scoped=true&\"],\"names\":[],\"mappings\":\"AAAA;EACE,WAAW;EACX,WAAW;EACX,WAAW;EACX,6BAA6B;AAC/B;AACA;EACE,qBAAqB;EACrB,eAAe;EACf,uBAAuB;EACvB,mBAAmB;EACnB,gBAAgB;EAChB,mBAAmB;EACnB,gBAAgB;EAChB,kBAAkB;EAClB,mBAAmB;AACrB\",\"file\":\"UserInformation.less?vue&type=style&index=0&id=fa31e19a&lang=less&scoped=true&\",\"sourcesContent\":[\"img[data-v-fa31e19a] {\\n  height: 2em;\\n  width: auto;\\n  float: left;\\n  max-width: inherit !important;\\n}\\n.username[data-v-fa31e19a] {\\n  display: inline-block;\\n  max-width: 100%;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  vertical-align: top;\\n  line-height: 2em;\\n  margin-left: 0.5em;\\n  margin-right: 0.5em;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".back-button[data-v-7508456a] {\\n  vertical-align: top !important;\\n}\\n.summary-information .label[data-v-7508456a] {\\n  display: inline-block;\\n  line-height: 2em;\\n  vertical-align: top;\\n  margin-left: 0.5em;\\n  margin-right: 0.5em;\\n  user-select: none;\\n}\\n.list[data-v-7508456a] {\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n  padding-right: 1em;\\n}\\n.no-more[data-v-7508456a] {\\n  text-align: center;\\n  color: gray;\\n}\\n.pacor-search-result[data-v-7508456a] {\\n  font-weight: bold !important;\\n  background-color: yellow !important;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"AnnotationList.less?vue&type=style&index=0&id=7508456a&lang=less&scoped=true&\"],\"names\":[],\"mappings\":\"AAAA;EACE,8BAA8B;AAChC;AACA;EACE,qBAAqB;EACrB,gBAAgB;EAChB,mBAAmB;EACnB,kBAAkB;EAClB,mBAAmB;EACnB,iBAAiB;AACnB;AACA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,kBAAkB;AACpB;AACA;EACE,kBAAkB;EAClB,WAAW;AACb;AACA;EACE,4BAA4B;EAC5B,mCAAmC;AACrC\",\"file\":\"AnnotationList.less?vue&type=style&index=0&id=7508456a&lang=less&scoped=true&\",\"sourcesContent\":[\".back-button[data-v-7508456a] {\\n  vertical-align: top !important;\\n}\\n.summary-information .label[data-v-7508456a] {\\n  display: inline-block;\\n  line-height: 2em;\\n  vertical-align: top;\\n  margin-left: 0.5em;\\n  margin-right: 0.5em;\\n  user-select: none;\\n}\\n.list[data-v-7508456a] {\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n  padding-right: 1em;\\n}\\n.no-more[data-v-7508456a] {\\n  text-align: center;\\n  color: gray;\\n}\\n.pacor-search-result[data-v-7508456a] {\\n  font-weight: bold !important;\\n  background-color: yellow !important;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"body.disable-user-select {\\n  user-select: none;\\n  cursor: grabbing;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"AnnotationPanel.global.less?vue&type=style&index=1&lang=less&\"],\"names\":[],\"mappings\":\"AAAA;EACE,iBAAiB;EACjB,gBAAgB;AAClB\",\"file\":\"AnnotationPanel.global.less?vue&type=style&index=1&lang=less&\",\"sourcesContent\":[\"body.disable-user-select {\\n  user-select: none;\\n  cursor: grabbing;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".close-container[data-v-0a5b4950] {\\n  float: right;\\n  cursor: pointer;\\n  user-select: none;\\n  position: relative;\\n  z-index: 2;\\n}\\n.annotation-panel[data-v-0a5b4950] {\\n  position: fixed !important;\\n  margin-top: 0 !important;\\n  margin-bottom: 0 !important;\\n  left: 0.5em !important;\\n  bottom: 0 !important;\\n  width: calc(100vw - 2em) !important;\\n  z-index: 102 !important;\\n  /*\\n  animation-duration: 3s;\\n  animation-delay: 2s;\\n  animation-iteration-count: infinite;\\n  */\\n}\\n.annotation-panel > .ui.segment.form[data-v-0a5b4950] {\\n  border-bottom-left-radius: 0;\\n  border-bottom-right-radius: 0;\\n  padding: 1em !important;\\n  border-top-width: 5px !important;\\n  border-top-style: double !important;\\n}\\n.annotation-panel.hidden[data-v-0a5b4950] {\\n  display: none;\\n}\\n.annotation-panel .ui.segment.form[data-v-0a5b4950] {\\n  padding: 0;\\n}\\n.resize-handler[data-v-0a5b4950] {\\n  width: 100%;\\n  height: 2em;\\n  cursor: grab;\\n  margin-top: -2em;\\n  position: relative;\\n  z-index: 1;\\n}\\n.resize-handler.moving[data-v-0a5b4950] {\\n  cursor: grabbing;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"AnnotationPanel.less?vue&type=style&index=0&id=0a5b4950&lang=less&scoped=true&\"],\"names\":[],\"mappings\":\"AAAA;EACE,YAAY;EACZ,eAAe;EACf,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;AACZ;AACA;EACE,0BAA0B;EAC1B,wBAAwB;EACxB,2BAA2B;EAC3B,sBAAsB;EACtB,oBAAoB;EACpB,mCAAmC;EACnC,uBAAuB;EACvB;;;;GAIC;AACH;AACA;EACE,4BAA4B;EAC5B,6BAA6B;EAC7B,uBAAuB;EACvB,gCAAgC;EAChC,mCAAmC;AACrC;AACA;EACE,aAAa;AACf;AACA;EACE,UAAU;AACZ;AACA;EACE,WAAW;EACX,WAAW;EACX,YAAY;EACZ,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;AACA;EACE,gBAAgB;AAClB\",\"file\":\"AnnotationPanel.less?vue&type=style&index=0&id=0a5b4950&lang=less&scoped=true&\",\"sourcesContent\":[\".close-container[data-v-0a5b4950] {\\n  float: right;\\n  cursor: pointer;\\n  user-select: none;\\n  position: relative;\\n  z-index: 2;\\n}\\n.annotation-panel[data-v-0a5b4950] {\\n  position: fixed !important;\\n  margin-top: 0 !important;\\n  margin-bottom: 0 !important;\\n  left: 0.5em !important;\\n  bottom: 0 !important;\\n  width: calc(100vw - 2em) !important;\\n  z-index: 102 !important;\\n  /*\\n  animation-duration: 3s;\\n  animation-delay: 2s;\\n  animation-iteration-count: infinite;\\n  */\\n}\\n.annotation-panel > .ui.segment.form[data-v-0a5b4950] {\\n  border-bottom-left-radius: 0;\\n  border-bottom-right-radius: 0;\\n  padding: 1em !important;\\n  border-top-width: 5px !important;\\n  border-top-style: double !important;\\n}\\n.annotation-panel.hidden[data-v-0a5b4950] {\\n  display: none;\\n}\\n.annotation-panel .ui.segment.form[data-v-0a5b4950] {\\n  padding: 0;\\n}\\n.resize-handler[data-v-0a5b4950] {\\n  width: 100%;\\n  height: 2em;\\n  cursor: grab;\\n  margin-top: -2em;\\n  position: relative;\\n  z-index: 1;\\n}\\n.resize-handler.moving[data-v-0a5b4950] {\\n  cursor: grabbing;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \".annotation-type-selector[data-v-0f3f24a4] {\\n  /*\\n  position: fixed !important;\\n  //top: -100vh;\\n  top: 100px;\\n  left: 0;\\n  user-select: none;\\n  */\\n}\\n/*\\n.fab-main-container {\\n  right: 5rem !important;\\n  bottom: 5rem !important;\\n  \\n  &.hidden {\\n    display: none;\\n  }\\n  \\n}\\n*/\\n\", \"\",{\"version\":3,\"sources\":[\"AnnotationTypeSelector.less?vue&type=style&index=0&id=0f3f24a4&lang=less&scoped=true&\"],\"names\":[],\"mappings\":\"AAAA;EACE;;;;;;GAMC;AACH;AACA;;;;;;;;;;CAUC\",\"file\":\"AnnotationTypeSelector.less?vue&type=style&index=0&id=0f3f24a4&lang=less&scoped=true&\",\"sourcesContent\":[\".annotation-type-selector[data-v-0f3f24a4] {\\n  /*\\n  position: fixed !important;\\n  //top: -100vh;\\n  top: 100px;\\n  left: 0;\\n  user-select: none;\\n  */\\n}\\n/*\\n.fab-main-container {\\n  right: 5rem !important;\\n  bottom: 5rem !important;\\n  \\n  &.hidden {\\n    display: none;\\n  }\\n  \\n}\\n*/\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"[data-pacor-section-seq-id] [data-pacor-paragraph-seq-id] .pacor-selection {\\n  background-color: rgba(0, 0, 255, 0.7);\\n  color: white;\\n}\\n[data-pacor-section-seq-id] [data-pacor-paragraph-seq-id] .pacor-hover {\\n  text-decoration: underline;\\n}\\n[data-pacor-section-seq-id] [data-pacor-paragraph-seq-id] .pacor-search-result {\\n  font-weight: bold !important;\\n  background-color: yellow !important;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"RangyManager.global.less?vue&type=style&index=0&lang=less&\"],\"names\":[],\"mappings\":\"AAAA;EACE,sCAAsC;EACtC,YAAY;AACd;AACA;EACE,0BAA0B;AAC5B;AACA;EACE,4BAA4B;EAC5B,mCAAmC;AACrC\",\"file\":\"RangyManager.global.less?vue&type=style&index=0&lang=less&\",\"sourcesContent\":[\"[data-pacor-section-seq-id] [data-pacor-paragraph-seq-id] .pacor-selection {\\n  background-color: rgba(0, 0, 255, 0.7);\\n  color: white;\\n}\\n[data-pacor-section-seq-id] [data-pacor-paragraph-seq-id] .pacor-hover {\\n  text-decoration: underline;\\n}\\n[data-pacor-section-seq-id] [data-pacor-paragraph-seq-id] .pacor-search-result {\\n  font-weight: bold !important;\\n  background-color: yellow !important;\\n}\\n\"]}]);\n","exports = module.exports = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"SectionAnnotationManager.less?vue&type=style&index=0&id=d9b324f8&lang=less&scoped=true&\"}]);\n","exports = module.exports = require(\"../../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"SectionPanel.less?vue&type=style&index=0&id=24156f54&lang=less&scoped=true&\"}]);\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"annotation-float-widget\",\n      class: _vm.computedContainerClassNames\n    },\n    [\n      _vm.annotationCount > 0\n        ? _c(\n            \"div\",\n            { staticClass: \"ui secondary segment\" },\n            [\n              _c(\"annotation-item\", {\n                attrs: {\n                  config: _vm.config,\n                  status: _vm.status,\n                  lib: _vm.lib,\n                  mode: \"full\",\n                  annotation: _vm.annotation,\n                  findAnnotation: function(annotation) {\n                    _vm.$emit(\"findAnnotation\", annotation)\n                  },\n                  findUser: function(user) {\n                    _vm.$emit(\"findUser\", user)\n                  },\n                  findType: function(type) {\n                    _vm.$emit(\"findType\", type)\n                  },\n                  rangy: _vm.rangy\n                }\n              }),\n              _vm._v(\" \"),\n              _c(\n                \"div\",\n                {\n                  staticClass: \"ui column grid\",\n                  on: {\n                    click: function($event) {\n                      $event.stopPropagation()\n                      return _vm.$emit(\"list\", _vm.highlightPos)\n                    }\n                  }\n                },\n                [\n                  _c(\n                    \"div\",\n                    { class: _vm.computedButtonsClassNames },\n                    [\n                      _c(\"user-avatar-icons\", {\n                        staticStyle: { \"margin-right\": \"0.5em\" },\n                        attrs: {\n                          config: _vm.config,\n                          status: _vm.status,\n                          lib: _vm.lib,\n                          users: _vm.users,\n                          userCount: _vm.userCount\n                        },\n                        on: {\n                          find: function(user) {\n                            _vm.$emit(\"findUser\", user)\n                          }\n                        }\n                      }),\n                      _vm._v(\" \"),\n                      _vm._l(_vm.types, function(t) {\n                        return _c(\"annotation-module-button\", {\n                          attrs: {\n                            lib: _vm.lib,\n                            config: _vm.config,\n                            status: _vm.status,\n                            annotationModule: t.type,\n                            count: t.count\n                          },\n                          on: {\n                            find: function(type) {\n                              _vm.$emit(\"findType\", type)\n                            }\n                          }\n                        })\n                      }),\n                      _vm._v(\" \"),\n                      _vm.highlightPosLock\n                        ? _c(\n                            \"button\",\n                            {\n                              staticClass: \"ui mini button list-button\",\n                              attrs: { type: \"button\" }\n                            },\n                            [\n                              _vm._v(\n                                \"\\r\\n          \" +\n                                  _vm._s(\n                                    _vm.$t(\"List all {0} annotations...\", [\n                                      _vm.annotationCount\n                                    ])\n                                  ) +\n                                  \"\\r\\n        \"\n                              )\n                            ]\n                          )\n                        : _vm._e()\n                    ],\n                    2\n                  )\n                ]\n              )\n            ],\n            1\n          )\n        : _vm._e()\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"fragment\",\n    [\n      _c(\"rangy\", {\n        ref: \"RangyManager\",\n        attrs: {\n          status: _vm.status,\n          rangyConfig: _vm.rangyConfig,\n          lib: _vm.lib\n        },\n        on: {\n          select: _vm.onselect,\n          selectcollapsed: _vm.onselectcollapsed,\n          highlightClick: _vm.toggleHighlightPos,\n          highlightMouseover: _vm.onHighlightPosMouseover,\n          highlightMouseout: _vm.onHighlightPosMouseout\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\"annotation-type-selector\", {\n        directives: [\n          {\n            name: \"show\",\n            rawName: \"v-show\",\n            value: _vm.isSelectorVisible,\n            expression: \"isSelectorVisible\"\n          }\n        ],\n        ref: \"AnnotationTypeSelector\",\n        attrs: {\n          config: _vm.config,\n          status: _vm.status,\n          lib: _vm.lib,\n          selection: _vm.selection\n        },\n        on: { selectAnnotation: _vm.pin, list: _vm.listFromSelection }\n      }),\n      _vm._v(\" \"),\n      _c(\"annotation-panel\", {\n        ref: \"AnnotationPanel\",\n        attrs: {\n          config: _vm.config,\n          status: _vm.status,\n          lib: _vm.lib,\n          pinSelection: _vm.pinSelection,\n          rangy: _vm.$refs.RangyManager,\n          annotationModule: _vm.annotationModule,\n          findAnnotation: _vm.findAnnotation,\n          findUser: _vm.findUser,\n          findType: _vm.findType,\n          listPositions: _vm.listPositions\n        },\n        on: { hide: _vm.unpin }\n      }),\n      _vm._v(\" \"),\n      _vm.highlightPos\n        ? _c(\"annotation-float-widget\", {\n            ref: \"AnnotationFloatWidget\",\n            attrs: {\n              config: _vm.config,\n              status: _vm.status,\n              lib: _vm.lib,\n              highlightPos: _vm.highlightPos,\n              highlightEvent: _vm.highlightEvent,\n              highlightPosLock: _vm.highlightPosLock,\n              rangy: _vm.$refs.RangyManager\n            },\n            on: {\n              findAnnotation: _vm.onFindAnnotation,\n              findUser: _vm.onFindUser,\n              findType: _vm.onFindType,\n              list: _vm.onList\n            }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"section-annotation-manager\", {\n        attrs: { config: _vm.config, status: _vm.status, lib: _vm.lib }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"fragment\", [_vm._v(\"\\r\\n  [AnnotationDiscussion #TODO]\\r\\n\")])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ui stackable\", class: _vm.computedGridClass },\n    [\n      _c(\n        \"div\",\n        { staticClass: \"column annotation-editor\" },\n        [\n          _c(_vm.type, {\n            tag: \"component\",\n            attrs: {\n              config: _vm.config,\n              status: _vm.status,\n              pinSelection: _vm.pinSelection,\n              annotationModule: _vm.type,\n              annotationInstance: _vm.annotationInstance,\n              annotationConfig: _vm.annotationConfig,\n              lib: _vm.lib,\n              rangy: _vm.rangy,\n              heightPX: _vm.heightPX,\n              editable: _vm.editable\n            },\n            on: {\n              hide: function($event) {\n                return _vm.$emit(\"hide\", false)\n              },\n              delete: _vm.onDelete,\n              update: function($event) {\n                return _vm.$emit(\"update\")\n              },\n              reloadMyHighlights: _vm.reloadMyHighlights\n            }\n          })\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _vm.annotationConfig.enableCollaboration\n        ? _c(\n            \"div\",\n            { staticClass: \"column annotation-discussion\" },\n            [\n              _c(\"annotation-discussion\", {\n                ref: \"AnnotationDisscussion\",\n                attrs: {\n                  config: _vm.config,\n                  status: _vm.status,\n                  lib: _vm.lib,\n                  annotationInstance: _vm.annotationInstance\n                }\n              })\n            ],\n            1\n          )\n        : _vm._e()\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ui form\" },\n    [\n      _c(\"annotation-editor-header\", {\n        attrs: {\n          config: _vm.config,\n          status: _vm.status,\n          annotationModule: _vm.annotationModule\n        }\n      }),\n      _vm._v(\" \"),\n      !_vm.isQuestionSubmitted\n        ? _c(\"question-template\", {\n            ref: \"QuestionTemplate\",\n            attrs: { config: _vm.config, status: _vm.status, lib: _vm.lib },\n            on: { selectQuestion: _vm.selectQuestion }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"HTMLEditor\", {\n        ref: \"QuestionEditor\",\n        attrs: {\n          contents: _vm.question,\n          editable: _vm.isEditable,\n          height: _vm.computedQuestionEditorHeight,\n          placeholder: _vm.questionPlaceholder\n        },\n        on: {\n          input: function(c) {\n            _vm.question = c\n            _vm.isQuestionEdited = true\n          }\n        }\n      }),\n      _vm._v(\" \"),\n      _vm.isQuestionSubmitted\n        ? [\n            _c(\"resource-search\", {\n              ref: \"ResourceSearch\",\n              attrs: {\n                config: _vm.config,\n                status: _vm.status,\n                lib: _vm.lib,\n                propSelectIndex: _vm.recommandResourceSearchIndex,\n                propAnchorText: _vm.anchorText\n              }\n            }),\n            _vm._v(\" \"),\n            _c(\"HTMLEditor\", {\n              ref: \"AnswerEditor\",\n              attrs: {\n                contents: _vm.answer,\n                editable: _vm.editable,\n                height: _vm.computedAnswerEditorHeight,\n                placeholder: _vm.answerPlaceholder\n              },\n              on: {\n                input: function(c) {\n                  _vm.answer = c\n                  _vm.isAnswerEdited = true\n                }\n              }\n            })\n          ]\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.isEditable\n        ? _c(\n            \"div\",\n            { staticClass: \"ui one column grid annotation-panel-buttons\" },\n            [\n              _c(\"block-exit\"),\n              _vm._v(\" \"),\n              _c(\n                \"div\",\n                { class: _vm.computedButtonsClass },\n                [\n                  _vm.annotationConfig.enableControlPermission\n                    ? _c(\"checkbox-toggle\", {\n                        attrs: { label: _vm.$t(\"PUBLIC\") },\n                        model: {\n                          value: _vm.public,\n                          callback: function($$v) {\n                            _vm.public = $$v\n                          },\n                          expression: \"public\"\n                        }\n                      })\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  !_vm.isQuestionSubmitted\n                    ? _c(\n                        \"button\",\n                        {\n                          staticClass: \"ui button\",\n                          attrs: { type: \"button\" },\n                          on: { click: _vm.submitQuestion }\n                        },\n                        [\n                          _vm._v(\n                            \"\\r\\n          \" +\n                              _vm._s(_vm.$t(\"SUBMIT QUESTION\")) +\n                              \"  \\r\\n        \"\n                          )\n                        ]\n                      )\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm.isQuestionSubmitted && !_vm.isAnswerSubmitted\n                    ? _c(\n                        \"button\",\n                        {\n                          staticClass: \"ui button\",\n                          attrs: { type: \"button\" },\n                          on: { click: _vm.writeLater }\n                        },\n                        [\n                          _vm._v(\n                            \"\\r\\n          \" +\n                              _vm._s(_vm.$t(\"WRTIE LATER\")) +\n                              \"  \\r\\n        \"\n                          )\n                        ]\n                      )\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm.isQuestionSubmitted\n                    ? _c(\n                        \"button\",\n                        {\n                          staticClass: \"ui button\",\n                          class: { disabled: _vm.answer === \"\" },\n                          attrs: { type: \"button\" },\n                          on: { click: _vm.submitAnswer }\n                        },\n                        [\n                          _vm._v(\n                            \"\\r\\n          \" +\n                              _vm._s(_vm.$t(\"SAVE ANSWER\")) +\n                              \"  \\r\\n        \"\n                          )\n                        ]\n                      )\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm.isQuestionSubmitted\n                    ? _c(\n                        \"button\",\n                        {\n                          staticClass: \"ui red button\",\n                          attrs: { type: \"button\" },\n                          on: { click: _vm.deleteAnnotation }\n                        },\n                        [\n                          _vm._v(\n                            \"\\r\\n            \" +\n                              _vm._s(_vm.$t(\"DELETE\")) +\n                              \"  \\r\\n        \"\n                          )\n                        ]\n                      )\n                    : _vm._e()\n                ],\n                1\n              )\n            ],\n            1\n          )\n        : _vm._e()\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ui form\" },\n    [\n      _c(\"annotation-editor-header\", {\n        attrs: {\n          config: _vm.config,\n          status: _vm.status,\n          annotationModule: _vm.annotationModule\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\"HTMLEditor\", {\n        ref: \"editor\",\n        attrs: {\n          contents: _vm.note,\n          editable: _vm.editable,\n          height: _vm.computedEditorHeight,\n          placeholder: _vm.editorPlaceholder\n        },\n        on: {\n          input: function(c) {\n            _vm.note = c\n          }\n        }\n      }),\n      _vm._v(\" \"),\n      _vm.editable\n        ? _c(\n            \"div\",\n            { staticClass: \"ui one column grid annotation-panel-buttons\" },\n            [\n              _c(\"block-exit\"),\n              _vm._v(\" \"),\n              _c(\n                \"div\",\n                { class: _vm.computedButtonsClass },\n                [\n                  _vm.annotationConfig.enableControlPermission\n                    ? _c(\"checkbox-toggle\", {\n                        attrs: { label: _vm.$t(\"PUBLIC\") },\n                        model: {\n                          value: _vm.public,\n                          callback: function($$v) {\n                            _vm.public = $$v\n                          },\n                          expression: \"public\"\n                        }\n                      })\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  _vm.annotationInstance\n                    ? [\n                        _c(\n                          \"button\",\n                          {\n                            staticClass: \"ui button\",\n                            class: { disabled: !_vm.enableAddAnnotation },\n                            attrs: { type: \"button\" },\n                            on: { click: _vm.editAnnotation }\n                          },\n                          [\n                            _vm._v(\n                              \"\\r\\n          \" +\n                                _vm._s(_vm.$t(\"EDIT\")) +\n                                \"  \\r\\n        \"\n                            )\n                          ]\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"button\",\n                          {\n                            staticClass: \"ui red button\",\n                            attrs: { type: \"button\" },\n                            on: { click: _vm.deleteAnnotation }\n                          },\n                          [\n                            _vm._v(\n                              \"\\r\\n          \" +\n                                _vm._s(_vm.$t(\"DELETE\")) +\n                                \"  \\r\\n        \"\n                            )\n                          ]\n                        )\n                      ]\n                    : [\n                        _c(\n                          \"countdown-button\",\n                          {\n                            attrs: {\n                              minWordCount: _vm.moduleConfig.minWords,\n                              text: _vm.note,\n                              lib: _vm.lib,\n                              locale: _vm.status.preference.locale\n                            },\n                            on: { click: _vm.addAnnotation }\n                          },\n                          [\n                            _vm._v(\n                              \"\\r\\n          \" +\n                                _vm._s(_vm.$t(\"ADD\")) +\n                                \"  \\r\\n        \"\n                            )\n                          ]\n                        )\n                      ]\n                ],\n                2\n              )\n            ],\n            1\n          )\n        : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ui segment AnnotaionInstruction\" },\n    [\n      _c(\"div\", { staticClass: \"show-instruction\" }, [\n        _c(\n          \"button\",\n          {\n            staticClass: \"ui mini button\",\n            attrs: { type: \"button\" },\n            on: { click: _vm.showInstruction }\n          },\n          [_vm._v(\"\\r\\n      \" + _vm._s(_vm.$t(\"Hint\")) + \"\\r\\n    \")]\n        )\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"summary\" }, [\n        _vm._v(\"\\r\\n    \" + _vm._s(_vm.instruction.summary) + \"\\r\\n  \")\n      ]),\n      _vm._v(\" \"),\n      _c(\"modal\", {\n        ref: \"Modal\",\n        attrs: {\n          config: _vm.config,\n          status: _vm.status,\n          contentURL: _vm.instruction.url,\n          cancelButtonText: \"CLOSE\",\n          cancelable: \"true\"\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"header\",\n            fn: function() {\n              return [\n                _c(\"annotation-module-button\", {\n                  style: { float: \"left\", \"margin-right\": \"1em\" },\n                  attrs: {\n                    status: _vm.status,\n                    annotationModule: _vm.annotationModule\n                  }\n                }),\n                _vm._v(\n                  \"\\r\\n        \" +\n                    _vm._s(_vm.instruction.summary) +\n                    \"\\r\\n      \"\n                )\n              ]\n            },\n            proxy: true\n          }\n        ])\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [\n    _c(\n      \"div\",\n      { staticClass: \"right column\" },\n      [\n        _c(\"annotaion-instruction\", {\n          attrs: {\n            config: _vm.config,\n            status: _vm.status,\n            annotationModule: _vm.annotationModule\n          }\n        })\n      ],\n      1\n    ),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      { staticClass: \"left column\" },\n      [\n        _c(\"user-information\", {\n          attrs: { annotationModule: _vm.annotationModule, status: _vm.status }\n        })\n      ],\n      1\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"QuestionTemplate ui form\" }, [\n    _c(\"div\", { staticClass: \"inline field\" }, [\n      _c(\"label\", [\n        _vm._v(\n          \"\\r\\n      \" + _vm._s(_vm.$t(\"Write your question\")) + \":\\r\\n    \"\n        )\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"select\",\n        {\n          directives: [\n            {\n              name: \"model\",\n              rawName: \"v-model\",\n              value: _vm.selectIndex,\n              expression: \"selectIndex\"\n            }\n          ],\n          on: {\n            change: function($event) {\n              var $$selectedVal = Array.prototype.filter\n                .call($event.target.options, function(o) {\n                  return o.selected\n                })\n                .map(function(o) {\n                  var val = \"_value\" in o ? o._value : o.value\n                  return val\n                })\n              _vm.selectIndex = $event.target.multiple\n                ? $$selectedVal\n                : $$selectedVal[0]\n            }\n          }\n        },\n        _vm._l(_vm.questions, function(question, i) {\n          return _c(\"option\", { domProps: { value: i } }, [\n            _vm._v(\n              \"\\r\\n        \" + _vm._s(_vm.$t(question.hint)) + \"\\r\\n      \"\n            )\n          ])\n        }),\n        0\n      )\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"ExternalResource ui form middle aligned column grid\" },\n    [\n      _c(\"div\", { staticClass: \"three wide column\" }, [\n        _c(\"label\", { on: { click: _vm.focus } }, [\n          _vm._v(\n            \"\\r\\n        \" + _vm._s(_vm.$t(\"Find your answer\")) + \":\\r\\n      \"\n          )\n        ])\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"three wide column\" }, [\n        _c(\"input\", {\n          directives: [\n            {\n              name: \"model\",\n              rawName: \"v-model\",\n              value: _vm.anchorText,\n              expression: \"anchorText\"\n            }\n          ],\n          ref: \"input\",\n          attrs: { type: \"text\" },\n          domProps: { value: _vm.anchorText },\n          on: {\n            input: function($event) {\n              if ($event.target.composing) {\n                return\n              }\n              _vm.anchorText = $event.target.value\n            }\n          }\n        })\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"eight wide column\" }, [\n        _c(\n          \"select\",\n          {\n            directives: [\n              {\n                name: \"model\",\n                rawName: \"v-model\",\n                value: _vm.selectIndex,\n                expression: \"selectIndex\"\n              }\n            ],\n            staticClass: \"ui fluid input\",\n            on: {\n              change: function($event) {\n                var $$selectedVal = Array.prototype.filter\n                  .call($event.target.options, function(o) {\n                    return o.selected\n                  })\n                  .map(function(o) {\n                    var val = \"_value\" in o ? o._value : o.value\n                    return val\n                  })\n                _vm.selectIndex = $event.target.multiple\n                  ? $$selectedVal\n                  : $$selectedVal[0]\n              }\n            }\n          },\n          _vm._l(_vm.resources, function(resource, i) {\n            return _c(\"option\", { domProps: { value: i } }, [\n              _vm._v(\n                \"\\r\\n          \" +\n                  _vm._s(_vm.$t(resource.name)) +\n                  \"\\r\\n        \"\n              )\n            ])\n          }),\n          0\n        )\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"two wide column inline field\" }, [\n        _c(\n          \"button\",\n          {\n            staticClass: \"ui fluid button\",\n            class: _vm.computedButtonClass,\n            attrs: { type: \"button\" },\n            on: { click: _vm.doSearch }\n          },\n          [_vm._v(\"\\r\\n        \" + _vm._s(_vm.$t(\"SEARCH\")) + \"\\r\\n      \")]\n        )\n      ])\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"UserInformation\" },\n    [\n      _c(\"img\", { attrs: { src: _vm.status.avatar } }),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"username\" }, [\n        _vm._v(\"\\r\\n    \" + _vm._s(_vm.username) + \"\\r\\n  \")\n      ]),\n      _vm._v(\" \"),\n      _c(\"annotation-module-button\", {\n        attrs: { status: _vm.status, annotationModule: _vm.annotationModule }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"AnnotationList\" },\n    [\n      _vm.annotations.length > 1\n        ? [\n            !_vm.isFiltering\n              ? _c(\n                  \"div\",\n                  { staticClass: \"summary-information\" },\n                  [\n                    _vm.annotationInstance && _vm.annotations.length > 1\n                      ? _c(\n                          \"button\",\n                          {\n                            staticClass:\n                              \"ui mini labeled icon button back-button\",\n                            attrs: { type: \"button\" },\n                            on: {\n                              click: function($event) {\n                                $event.stopPropagation()\n                                _vm.annotationInstance = null\n                              }\n                            }\n                          },\n                          [\n                            _c(\"i\", { staticClass: \"angle left icon\" }),\n                            _vm._v(\n                              \"\\r\\n      \" +\n                                _vm._s(_vm.$t(\"Back to list\")) +\n                                \"\\r\\n    \"\n                            )\n                          ]\n                        )\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _vm.status.search.showAnnotationList &&\n                    _vm.status.search.keyword !== \"\"\n                      ? _c(\"div\", { staticClass: \"label\" }, [\n                          _vm._v(\n                            \"\\r\\n      \" +\n                              _vm._s(_vm.$t(\"Searching: \")) +\n                              \"\\r\\n      \"\n                          ),\n                          _c(\"span\", { staticClass: \"pacor-search-result\" }, [\n                            _vm._v(\n                              \"\\r\\n        \" +\n                                _vm._s(_vm.status.search.keyword) +\n                                \"\\r\\n      \"\n                            )\n                          ])\n                        ])\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _c(\"div\", { staticClass: \"label\" }, [\n                      _vm._v(\n                        \"\\r\\n      \" +\n                          _vm._s(\n                            _vm.$t(\"{0} Annotations\", [_vm.annotationCount])\n                          ) +\n                          \":\\r\\n    \"\n                      )\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"user-avatar-icons\", {\n                      staticStyle: { \"margin-right\": \"0.5em\" },\n                      attrs: {\n                        config: _vm.config,\n                        status: _vm.status,\n                        lib: _vm.lib,\n                        users: _vm.users,\n                        userCount: _vm.userCount\n                      },\n                      on: {\n                        find: function(user) {\n                          _vm.findUser = user\n                        }\n                      }\n                    }),\n                    _vm._v(\" \"),\n                    _vm._l(_vm.types, function(t) {\n                      return _c(\"annotation-module-button\", {\n                        attrs: {\n                          lib: _vm.lib,\n                          config: _vm.config,\n                          status: _vm.status,\n                          annotationModule: t.type,\n                          count: t.count\n                        },\n                        on: {\n                          find: function(type) {\n                            _vm.findType = type\n                          }\n                        }\n                      })\n                    })\n                  ],\n                  2\n                )\n              : _vm._e(),\n            _vm._v(\" \"),\n            _vm.isFiltering\n              ? _c(\n                  \"div\",\n                  { staticClass: \"summary-information\" },\n                  [\n                    _c(\n                      \"button\",\n                      {\n                        staticClass: \"ui mini labeled icon button back-button\",\n                        attrs: { type: \"button\" },\n                        on: {\n                          click: function($event) {\n                            $event.stopPropagation()\n                            return _vm.clearFilter($event)\n                          }\n                        }\n                      },\n                      [\n                        _c(\"i\", { staticClass: \"angle left icon\" }),\n                        _vm._v(\n                          \"\\r\\n      \" +\n                            _vm._s(_vm.$t(\"Back to full list\")) +\n                            \"\\r\\n    \"\n                        )\n                      ]\n                    ),\n                    _vm._v(\" \"),\n                    _c(\"div\", { staticClass: \"label\" }, [\n                      _vm._v(\n                        \"\\r\\n      \" + _vm._s(_vm.$t(\"Finding\")) + \":\\r\\n    \"\n                      )\n                    ]),\n                    _vm._v(\" \"),\n                    _vm.findUser\n                      ? _c(\"user-avatar-icons\", {\n                          staticStyle: { \"margin-right\": \"0.5em\" },\n                          attrs: {\n                            config: _vm.config,\n                            status: _vm.status,\n                            lib: _vm.lib,\n                            users: [_vm.findUser]\n                          },\n                          on: {\n                            find: function($event) {\n                              _vm.findUser = null\n                            }\n                          }\n                        })\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _vm.findType\n                      ? _c(\"annotation-module-button\", {\n                          attrs: {\n                            lib: _vm.lib,\n                            config: _vm.config,\n                            status: _vm.status,\n                            annotationModule: _vm.findType\n                          },\n                          on: {\n                            find: function($event) {\n                              _vm.findType = null\n                            }\n                          }\n                        })\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _c(\"div\", { staticClass: \"label\" }, [\n                      _vm._v(\n                        \"\\r\\n      \" +\n                          _vm._s(\n                            _vm.$t(\"Total {0} Annotations\", [\n                              _vm.filteredAnnotationCount\n                            ])\n                          ) +\n                          \"\\r\\n    \"\n                      )\n                    ])\n                  ],\n                  1\n                )\n              : _vm._e(),\n            _vm._v(\" \"),\n            _c(\"div\", { staticClass: \"ui divider\" })\n          ]\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        {\n          directives: [\n            {\n              name: \"show\",\n              rawName: \"v-show\",\n              value:\n                _vm.annotationInstance === null && _vm.isFiltering === false,\n              expression: \"annotationInstance === null && isFiltering === false\"\n            }\n          ],\n          staticClass: \"list\",\n          style: _vm.computedListStyle,\n          on: {\n            scroll: function($event) {\n              $event.stopPropagation()\n              return _vm.scrollList($event)\n            }\n          }\n        },\n        [\n          _vm._l(_vm.annotations, function(annotation) {\n            return _c(\"annotation-item\", {\n              attrs: {\n                config: _vm.config,\n                status: _vm.status,\n                lib: _vm.lib,\n                isFull: false,\n                annotation: annotation,\n                findAnnotation: function(annotation) {\n                  _vm.annotationInstance = annotation\n                },\n                findUser: function(user) {\n                  _vm.findUser = user\n                },\n                findType: function(type) {\n                  _vm.findType = type\n                },\n                rangy: _vm.rangy\n              }\n            })\n          }),\n          _vm._v(\" \"),\n          _vm.noMore\n            ? _c(\n                \"div\",\n                { staticClass: \"ui segment no-more\" },\n                [\n                  _vm.annotations.length > 0\n                    ? [\n                        _vm._v(\n                          \"\\r\\n        \" +\n                            _vm._s(_vm.$t(\"No More\")) +\n                            \"\\r\\n      \"\n                        )\n                      ]\n                    : [\n                        _vm._v(\n                          \"\\r\\n        \" +\n                            _vm._s(_vm.$t(\"No Search Result\")) +\n                            \"\\r\\n      \"\n                        )\n                      ]\n                ],\n                2\n              )\n            : _vm._e()\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        {\n          directives: [\n            {\n              name: \"show\",\n              rawName: \"v-show\",\n              value:\n                _vm.annotationInstance === null && _vm.isFiltering === true,\n              expression: \"annotationInstance === null && isFiltering === true\"\n            }\n          ],\n          staticClass: \"list\",\n          style: _vm.computedListStyle,\n          on: {\n            scroll: function($event) {\n              $event.stopPropagation()\n              return _vm.scrollFilterList($event)\n            }\n          }\n        },\n        [\n          _vm._l(_vm.filteredAnnotations, function(annotation) {\n            return _c(\"annotation-item\", {\n              attrs: {\n                config: _vm.config,\n                status: _vm.status,\n                lib: _vm.lib,\n                isFull: false,\n                annotation: annotation,\n                findAnnotation: function(annotation) {\n                  _vm.annotationInstance = annotation\n                },\n                findUser: function(user) {\n                  _vm.findUser = user\n                },\n                findType: function(type) {\n                  _vm.findType = type\n                },\n                rangy: _vm.rangy\n              }\n            })\n          }),\n          _vm._v(\" \"),\n          _vm.filteredNoMore\n            ? _c(\"div\", { staticClass: \"ui segment no-more\" }, [\n                _vm._v(\"\\r\\n      \" + _vm._s(_vm.$t(\"No More\")) + \"\\r\\n    \")\n              ])\n            : _vm._e()\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"find-annotation\" },\n        [\n          _c(\"annotation-editor-modules\", {\n            ref: \"auth\",\n            attrs: {\n              config: _vm.config,\n              status: _vm.status,\n              lib: _vm.lib,\n              annotationInstance: _vm.annotationInstance,\n              heightPX: _vm.editorHeightPX,\n              rangy: _vm.rangy\n            },\n            on: {\n              hide: function($event) {\n                _vm.annotationInstance = null\n              },\n              delete: _vm.onDelete,\n              update: _vm.onUpdate\n            }\n          })\n        ],\n        1\n      )\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"annotation-panel\", class: { hidden: _vm.isHide } },\n    [\n      _c(\n        \"div\",\n        {\n          ref: \"panel\",\n          staticClass: \"ui secondary segment form \",\n          class: _vm.computedSegmentClass,\n          style: _vm.computedSegmentStyle\n        },\n        [\n          _c(\n            \"div\",\n            {\n              staticClass: \"close-container\",\n              on: {\n                click: function($event) {\n                  $event.stopPropagation()\n                  return _vm.hide($event)\n                }\n              }\n            },\n            [_c(\"i\", { staticClass: \"close icon\" })]\n          ),\n          _vm._v(\" \"),\n          _c(\"div\", {\n            staticClass: \"resize-handler\",\n            class: { moving: _vm.resizeLocker },\n            on: { mousedown: _vm.onResizeStart, touchstart: _vm.onResizeStart }\n          }),\n          _vm._v(\" \"),\n          !_vm.annotationModule\n            ? [\n                _c(\"annotation-list\", {\n                  ref: \"AnnotationList\",\n                  attrs: {\n                    config: _vm.config,\n                    status: _vm.status,\n                    lib: _vm.lib,\n                    listPositions: _vm.listPositions,\n                    findAnnotation: _vm.findAnnotation,\n                    propFindUser: _vm.findUser,\n                    propFindType: _vm.findType,\n                    heightPX: _vm.heightPX,\n                    rangy: _vm.lib.rangy\n                  },\n                  on: {\n                    close: function($event) {\n                      return _vm.hide(true)\n                    }\n                  }\n                })\n              ]\n            : [\n                _c(\"annotation-editor-modules\", {\n                  ref: \"auth\",\n                  attrs: {\n                    config: _vm.config,\n                    status: _vm.status,\n                    lib: _vm.lib,\n                    annotationModule: _vm.annotationModule,\n                    pinSelection: _vm.pinSelection,\n                    annotationInstance: _vm.findAnnotation,\n                    rangy: _vm.lib.rangy,\n                    heightPX: _vm.heightPX\n                  },\n                  on: { hide: _vm.hide }\n                })\n              ]\n        ],\n        2\n      )\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { ref: \"Selector\", staticClass: \"annotation-type-selector\" },\n    [\n      _c(\n        \"vue-fab\",\n        {\n          ref: \"fab\",\n          attrs: {\n            mainBtnColor: \"white\",\n            mainColor: \"#666\",\n            size: \"big\",\n            iconType: \"SemanticUI\",\n            activeIcon: \"angle down\",\n            clickAutoCloseType: \"fab\",\n            position: _vm.computedFABPosition,\n            verticalMargin: \"10em\",\n            horizontalMargin: \"5em\",\n            hideOnStart: true,\n            activeIconRotate: false,\n            transitionEnable: false,\n            scrollAutoShow: false,\n            clickOutsideCloseMenu: false,\n            autoOpenMenu: true\n          }\n        },\n        [\n          _vm._l(_vm.modules, function(module, i) {\n            return _c(\"fab-item\", {\n              attrs: {\n                idx: i,\n                title: _vm.$t(\"ANNOTATION_TYPE.\" + module.type),\n                icon: module.style.button.icon,\n                btnColor: module.style.button.backgroundColor\n              },\n              on: {\n                clickItem: function($event) {\n                  return _vm.clickItem(module.type)\n                }\n              }\n            })\n          }),\n          _vm._v(\" \"),\n          _vm.enableList\n            ? _c(\"fab-item\", {\n                attrs: {\n                  icon: \"list\",\n                  idx: _vm.modules.length,\n                  title: _vm.$t(\"List Annotations\")\n                },\n                on: { clickItem: _vm.list }\n              })\n            : _vm._e()\n        ],\n        2\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"fragment\")\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"fragment\",\n    [\n      _vm._l(_vm.sectionNodes, function(node) {\n        return [\n          _c(\"section-panel\", {\n            ref: \"auth\",\n            refInFor: true,\n            attrs: {\n              config: _vm.config,\n              status: _vm.status,\n              lib: _vm.lib,\n              node: node\n            }\n          })\n        ]\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { ref: \"panel\", staticClass: \"non-invasive-web-style-framework\" },\n    [\n      _c(\"div\", { staticClass: \"ui segment\" }, [\n        _vm._v(\"\\r\\n    Template\\r\\n  \")\n      ])\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationFloatWidget.less?vue&type=style&index=0&id=ca5d3b70&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6cdaca44\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationFloatWidget.less?vue&type=style&index=0&id=ca5d3b70&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationFloatWidget.less?vue&type=style&index=0&id=ca5d3b70&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationManager.less?vue&type=style&index=0&id=1b9dd3da&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"46367176\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationManager.less?vue&type=style&index=0&id=1b9dd3da&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationManager.less?vue&type=style&index=0&id=1b9dd3da&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationDiscussion.less?vue&type=style&index=0&id=19987034&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"49325226\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationDiscussion.less?vue&type=style&index=0&id=19987034&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationDiscussion.less?vue&type=style&index=0&id=19987034&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorModules.less?vue&type=style&index=0&id=b22b523c&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7b30494e\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorModules.less?vue&type=style&index=0&id=b22b523c&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorModules.less?vue&type=style&index=0&id=b22b523c&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ConfusedClarified.less?vue&type=style&index=0&id=0c2da0b0&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"649b0d50\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ConfusedClarified.less?vue&type=style&index=0&id=0c2da0b0&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ConfusedClarified.less?vue&type=style&index=0&id=0c2da0b0&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./MainIdea.less?vue&type=style&index=0&id=45a0d506&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5a8fc5a5\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./MainIdea.less?vue&type=style&index=0&id=45a0d506&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./MainIdea.less?vue&type=style&index=0&id=45a0d506&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotaionInstruction.less?vue&type=style&index=0&id=673c960f&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"d407075a\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotaionInstruction.less?vue&type=style&index=0&id=673c960f&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotaionInstruction.less?vue&type=style&index=0&id=673c960f&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorHeader.less?vue&type=style&index=0&id=6cd6ece2&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"ec708176\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorHeader.less?vue&type=style&index=0&id=6cd6ece2&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorHeader.less?vue&type=style&index=0&id=6cd6ece2&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./QuestionTemplate.less?vue&type=style&index=0&id=36896aef&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b0e565f0\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./QuestionTemplate.less?vue&type=style&index=0&id=36896aef&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./QuestionTemplate.less?vue&type=style&index=0&id=36896aef&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ResourceSearch.less?vue&type=style&index=0&id=154ee022&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"297d5c22\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ResourceSearch.less?vue&type=style&index=0&id=154ee022&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ResourceSearch.less?vue&type=style&index=0&id=154ee022&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./UserInformation.less?vue&type=style&index=0&id=fa31e19a&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"89c37a8c\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./UserInformation.less?vue&type=style&index=0&id=fa31e19a&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./UserInformation.less?vue&type=style&index=0&id=fa31e19a&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationList.less?vue&type=style&index=0&id=7508456a&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"ca8b1628\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationList.less?vue&type=style&index=0&id=7508456a&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationList.less?vue&type=style&index=0&id=7508456a&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.global.less?vue&type=style&index=1&lang=less&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"485deba6\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.global.less?vue&type=style&index=1&lang=less&\", function() {\n     var newContent = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.global.less?vue&type=style&index=1&lang=less&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.less?vue&type=style&index=0&id=0a5b4950&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"779a5b89\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.less?vue&type=style&index=0&id=0a5b4950&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.less?vue&type=style&index=0&id=0a5b4950&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationTypeSelector.less?vue&type=style&index=0&id=0f3f24a4&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"118aced4\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationTypeSelector.less?vue&type=style&index=0&id=0f3f24a4&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationTypeSelector.less?vue&type=style&index=0&id=0f3f24a4&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./RangyManager.global.less?vue&type=style&index=0&lang=less&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"020f6537\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./RangyManager.global.less?vue&type=style&index=0&lang=less&\", function() {\n     var newContent = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./RangyManager.global.less?vue&type=style&index=0&lang=less&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionAnnotationManager.less?vue&type=style&index=0&id=d9b324f8&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"561a4e83\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionAnnotationManager.less?vue&type=style&index=0&id=d9b324f8&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionAnnotationManager.less?vue&type=style&index=0&id=d9b324f8&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionPanel.less?vue&type=style&index=0&id=24156f54&lang=less&scoped=true&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e4f67e82\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionPanel.less?vue&type=style&index=0&id=24156f54&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionPanel.less?vue&type=style&index=0&id=24156f54&lang=less&scoped=true&\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","export * from \"-!../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./AnnotationFloatWidget.html?vue&type=template&id=ca5d3b70&scoped=true&\"","import mod from \"-!./AnnotationFloatWidget.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./AnnotationFloatWidget.js?vue&type=script&lang=js&\"","let AnnotationFloatWidget = {\n  props: ['lib', 'status', 'config', 'highlightPos', 'highlightEvent', 'highlightPosLock', 'rangy'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n      annotation: null,\n      annotationCount: 0,\n      users: [],\n      userCount: 0,\n      types: [],\n    }\n  },\n  components: {\n  },\n  computed: {\n    computedContainerClassNames () {\n      let classList = []\n      if (this.highlightPos !== null) {\n        let windowHeight = window.innerHeight\n        let clientY = this.highlightEvent.clientY\n        if (clientY < (windowHeight / 2) ) {\n          classList.push('bottom')\n        }\n      }\n      \n      if (this.rangy.isSelecting) {\n        classList.push('selecting')\n      }\n      //return 'bottom'\n      if (classList.length > 0) {\n        return classList.join(' ')\n      }\n    },\n    computedButtonsClassNames () {\n      //console.log(this.status.preference.leftHanded)\n      if (this.status.preference.leftHanded === false) {\n        return 'right aligned column'\n      }\n      else {\n        return 'column'\n      }\n    }\n  },\n  watch: {\n  },\n  mounted() {\n    this.load()\n  },\n  destroyed () {\n    this.rangy.hoverOut()\n  },\n  methods: {\n    load: async function () {\n      let query = {\n        anchorPositions: this.highlightPos\n      }\n      let url = 'client/Annotation/floatWidget'\n      \n      let result = await this.lib.AxiosHelper.post(url, query)\n      if (result === null) {\n        return false\n      }\n      \n      //console.log(result)\n      for (let key in result) {\n        this[key] = result[key]\n      }\n      \n      //this.$emit('list', this.highlightPos) // for test\n    }\n  } // methods\n}\n\nexport default AnnotationFloatWidget","import mod from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationFloatWidget.less?vue&type=style&index=0&id=ca5d3b70&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationFloatWidget.less?vue&type=style&index=0&id=ca5d3b70&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./AnnotationFloatWidget.html?vue&type=template&id=ca5d3b70&scoped=true&\"\nimport script from \"./AnnotationFloatWidget.js?vue&type=script&lang=js&\"\nexport * from \"./AnnotationFloatWidget.js?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationFloatWidget.less?vue&type=style&index=0&id=ca5d3b70&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ca5d3b70\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./AnnotationFloatWidget.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationFloatWidget%5CAnnotationFloatWidget.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('ca5d3b70')) {\n      api.createRecord('ca5d3b70', component.options)\n    } else {\n      api.reload('ca5d3b70', component.options)\n    }\n    module.hot.accept(\"./AnnotationFloatWidget.html?vue&type=template&id=ca5d3b70&scoped=true&\", function () {\n      api.rerender('ca5d3b70', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationFloatWidget/AnnotationFloatWidget.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationFloatWidget.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationFloatWidget%5CAnnotationFloatWidget.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationFloatWidget.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationFloatWidget%5CAnnotationFloatWidget.vue&lang=yaml\"","export * from \"-!../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./AnnotationManager.html?vue&type=template&id=1b9dd3da&scoped=true&\"","import RangyManager from './RangyManager/RangyManager.vue'\nimport AnnotationTypeSelector from './AnnotationTypeSelector/AnnotationTypeSelector.vue'\nimport AnnotationPanel from './AnnotationPanel/AnnotationPanel.vue'\nimport AnnotationFloatWidget from './AnnotationFloatWidget/AnnotationFloatWidget.vue'\nimport SectionAnnotationManager from './SectionAnnotationManager/SectionAnnotationManager.vue'\n\nlet AnnotationManager = {\n  props: ['lib', 'status', 'config'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n      selection: null,\n      pinSelection: null,\n      restoreSelection: null,\n      annotationModule: null,\n      //annotationModule: 'MainIdea', // for test\n      afterTime: null,\n      loadHighlightInterval: 60 * 1000,\n      \n      highlightPos: null,\n      highlightEvent: null,\n      highlightPosLock: false,\n      highlightPosLockTimer: null,\n      //loadHighlightInterval: 3 * 1000  // for test\n      \n      findAnnotation: null,\n      findUser: null,\n      findType: null,\n      listPositions: null\n    }\n  },\n  components: {\n    'rangy': RangyManager,\n    'annotation-type-selector': AnnotationTypeSelector,\n    'annotation-panel': AnnotationPanel,\n    'annotation-float-widget': AnnotationFloatWidget,\n    'section-annotation-manager': SectionAnnotationManager\n  },\n  computed: {\n    rangyConfig: function () {\n      let output = {}\n      if (typeof(this.status) === 'object'\n              && typeof(this.status.readingConfig) === 'object') {\n        output.articleSelector = this.status.readingConfig.articleSelector\n        output.sectionSelector = this.status.readingConfig.sectionSelector\n        output.annotationTypeModules = this.status.readingConfig.annotationTypeModules\n      }\n      return output\n    },\n    highlightsURL () {\n      let highlightsURL\n      if (this.lib.auth.currentStepAnnotationConfig.enableCollaboration === true) {\n        if (this.afterTime === null) {\n          highlightsURL = '/client/Annotation/highlights'\n        }\n        else {\n          highlightsURL = '/client/Annotation/highlightsOthers'\n        }\n      }\n      else {\n        highlightsURL = '/client/Annotation/highlightsMy'\n      }\n      return highlightsURL\n    },\n    isSelectorVisible () {\n      //return (this.annotatioModule === null && this.listPositions === null)\n      //return true\n      //console.log(this.annotationModule, this.listPositions)\n      return (this.annotationModule === null\n              && (this.listPositions === null || this.listPositions.length === 0))\n    }\n//    enableHover () {\n//      console.log(['enableHover', this.listPositions])\n//      return (this.listPositions === null \n//        || (Array.isArray(this.listPositions) && this.listPositions.length === 0))\n//    }\n  },\n  watch: {\n//    \"highlightPos\": function (highlightPos) {\n//      if (highlightPos !== null) {\n//        console.log(highlightPos)\n//      }\n//      else {\n//        console.log('cancel highlight')\n//      }\n//    }\n  },\n  mounted () {\n    this.loadHighlights()\n    \n    //console.log(this.$refs.RangyManager)\n    //this._testPanel()\n    //this.searchInArticle('天')\n    \n    this.lib.rangy = this.$refs.RangyManager\n  },\n  methods: {\n    _testPanel () {\n      this.annotationModule = 'Confused'\n      this.$refs.AnnotationPanel.show()\n    },\n    loadHighlights: async function () {\n      let data = {}\n      if (typeof(this.afterTime) === 'number') {\n        data.afterTime = this.afterTime\n      }\n      \n      let result = await this.lib.AxiosHelper.get(this.highlightsURL, data)\n      //console.log(result)\n      this.afterTime = (new Date()).getTime()\n      if (result !== 0) {\n        this.$refs.RangyManager.deserializeAppend(result)\n      }\n      \n      //$('[data-pacor-highlight]:first').click() // for test\n      \n      if (this.lib.auth.currentStepAnnotationConfig.enableCollaboration === false) {\n        // 如果不是開放合作，那就不用讀取其他人的資料\n        return false\n      }\n      \n      setTimeout(() => {\n        this.loadHighlights()\n      }, this.loadHighlightInterval)\n    },\n    onselect: function (selection) {\n      if (this.pinSelection !== null) {\n        this.unpin()\n        //return false\n      }\n      //console.log(selection)\n      this.selection = selection\n    },\n    onselectcollapsed: function () {\n      //console.log('collapsed')\n      this.selection = null\n    },\n    pin: function (type) {\n      this.restoreSelection = this.selection\n      this.selection = null\n      this.annotationModule = type\n      this.pinSelection = this.$refs.RangyManager.pinSelection()\n      //this.$refs.AnnotationPanel.show()\n      //console.log(type)\n      \n      this.onHighlightPosMouseout(true)\n    },\n    listFromSelection () {\n      //this.selection = null\n      this.listPositions = this.$refs.RangyManager.pinSelection().anchorPositions\n    },\n    unpin: function (doUnpin) {\n      //console.log(this.selection)\n      //console.trace(doSelect)\n      //this.selection = null\n      this.pinSelection = null\n      this.onHighlightPosMouseout(true)\n      this.findAnnotation = null\n      this.findUser = null\n      this.findType = null\n      this.annotationModule = null\n      this.listPositions = null\n      \n      //this.selection = this.restoreSelection\n      if (doUnpin !== false) {\n        this.$refs.RangyManager.unpinSelection(true)\n        //this.selection = this.restoreSelection\n      }\n      //this.$refs.AnnotationTypeSelector.show()\n      //console.log('unpin', 'float widget有顯示嗎？', this.selection)\n    },\n    toggleHighlightPos (data) {\n      if (this.selection !== null) {\n        return false\n      } \n      \n      //console.log(this.listPositions)\n//      if (!this.enableHover) {\n//        return false\n//      }\n      \n      /*\n      if (this.highlightPos === null) {\n        this.highlightPos = pos\n        this.highlightPosLock = true\n      }\n      else {\n        this.highlightPos = null\n        this.highlightPosLock = false\n      }\n       */\n      if (this.highlightPos !== null && this.highlightPosLock !== true) {\n        //console.log('這個時機對嗎')\n        this.onHighlightPosMouseout(true)\n        this.onList(this.highlightPos)\n        //this.highlightPosLock = !this.highlightPosLock\n        return false\n      }\n      else {\n        // 在觸控的情況下\n        // \n        //console.log('toggleHighlightPos 直接 click', data)\n        \n        if (this.highlightPos === null) {\n          clearTimeout(this.highlightPosLockTimer)\n          this.highlightPos = data.anchorPositions\n          this.highlightEvent = data.event\n          this.highlightPosLock = true\n        }\n        else {\n          this.highlightPos = null\n          this.highlightEvent = null\n          this.highlightPosLock = false\n        }\n      }\n    },\n    onHighlightPosMouseover (data) {\n      if (this.selection !== null) {\n        return false\n      } \n      \n      if (this.highlightPosLock === false) {\n        clearTimeout(this.highlightPosLockTimer)\n        if (data.event.which !== 0) {\n          return false\n        }\n\n        this.highlightPos = data.anchorPositions\n        this.highlightEvent = data.event\n      }\n    },\n    onHighlightPosMouseout (doUnlock) {\n      if (doUnlock === true) {\n        this.highlightPosLock = false\n      }\n      \n      if (this.highlightPosLock === false\n           && this.highlightPos !== null) {\n        // 延遲一點再消失吧\n        this.highlightPosLockTimer = setTimeout(() => {\n          this.highlightPos = null\n          this.highlightEvent = null\n        }, 0)\n      }\n    },\n    onList (anchorPositions) {\n      //throw '列出annotation ' +  anchorPositions.length\n      this.listPositions = anchorPositions\n      this.highlightPos = null\n      this.findAnnotation = null\n    },\n    onFindAnnotation (annotation) {\n      //console.log('onFindAnnotation', annotation)\n      //throw '編輯annotation ' +  annotation.id\n      this.findAnnotation = annotation\n      this.listPositions = this.highlightPos\n      this.highlightPos = null\n    },\n    onFindUser (user) {\n      this.findUser = user\n      this.listPositions = this.highlightPos\n      this.highlightPos = null\n    },\n    onFindType (type) {\n      this.findType = type\n      this.listPositions = this.highlightPos\n      this.highlightPos = null\n    },\n  } // methods\n}\n\nexport default AnnotationManager","import mod from \"-!./AnnotationManager.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./AnnotationManager.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationManager.less?vue&type=style&index=0&id=1b9dd3da&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationManager.less?vue&type=style&index=0&id=1b9dd3da&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./AnnotationManager.html?vue&type=template&id=1b9dd3da&scoped=true&\"\nimport script from \"./AnnotationManager.js?vue&type=script&lang=js&\"\nexport * from \"./AnnotationManager.js?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationManager.less?vue&type=style&index=0&id=1b9dd3da&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b9dd3da\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./AnnotationManager.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationManager.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1b9dd3da')) {\n      api.createRecord('1b9dd3da', component.options)\n    } else {\n      api.reload('1b9dd3da', component.options)\n    }\n    module.hot.accept(\"./AnnotationManager.html?vue&type=template&id=1b9dd3da&scoped=true&\", function () {\n      api.rerender('1b9dd3da', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationManager.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationManager.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationManager.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationManager.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationManager.vue&lang=yaml\"","export * from \"-!../../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./AnnotationDiscussion.html?vue&type=template&id=19987034&scoped=true&\"","let AnnotationDiscussion = {\n  props: ['lib', 'status', 'config', 'annotationInstance'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n    }\n  },\n  components: {\n  },\n  computed: {\n  },\n  watch: {\n  },\n  mounted() {\n  },\n  methods: {\n  } // methods\n}\n\nexport default AnnotationDiscussion","import mod from \"-!./AnnotationDiscussion.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./AnnotationDiscussion.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationDiscussion.less?vue&type=style&index=0&id=19987034&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationDiscussion.less?vue&type=style&index=0&id=19987034&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./AnnotationDiscussion.html?vue&type=template&id=19987034&scoped=true&\"\nimport script from \"./AnnotationDiscussion.js?vue&type=script&lang=js&\"\nexport * from \"./AnnotationDiscussion.js?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationDiscussion.less?vue&type=style&index=0&id=19987034&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19987034\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./AnnotationDiscussion.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CAnnotationDiscussion%5CAnnotationDiscussion.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('19987034')) {\n      api.createRecord('19987034', component.options)\n    } else {\n      api.reload('19987034', component.options)\n    }\n    module.hot.accept(\"./AnnotationDiscussion.html?vue&type=template&id=19987034&scoped=true&\", function () {\n      api.rerender('19987034', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationDiscussion/AnnotationDiscussion.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationDiscussion.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CAnnotationDiscussion%5CAnnotationDiscussion.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationDiscussion.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CAnnotationDiscussion%5CAnnotationDiscussion.vue&lang=yaml\"","export * from \"-!../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./AnnotationEditorModules.html?vue&type=template&id=b22b523c&scoped=true&\"","import mod from \"-!./AnnotationEditorModules.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./AnnotationEditorModules.js?vue&type=script&lang=js&\"","import AnnotationDiscussion from './AnnotationDiscussion/AnnotationDiscussion.vue'\n\nimport AnnotationModuleMainIdea from './MainIdea/MainIdea.vue'\nimport AnnotationModuleConfusedClarified from './ConfusedClarified/ConfusedClarified.vue'\n//import AnnotationModuleConfused from './Confused/Confused.vue'\n//import AnnotationModuleClarified from './Clarified/Clarified.vue'\n\nlet AnnotationEditorModules = {\n  props: ['lib', 'status', 'config'\n    , 'annotationModule', 'pinSelection', 'annotationInstance'\n    , 'rangy', 'heightPX'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n    }\n  },\n  components: {\n    'annotation-discussion': AnnotationDiscussion,\n    \n    'MainIdea': AnnotationModuleMainIdea,\n    //'ConfusedClarified': AnnotationModuleConfusedClarified\n    'Confused': AnnotationModuleConfusedClarified,\n    'Clarified': AnnotationModuleConfusedClarified\n  },\n  computed: {\n    computedGridClass () {\n      let classList = []\n      if (this.annotationConfig.enableCollaboration === true) {\n        classList.push('two')\n      }\n      else {\n        classList.push('one')\n      }\n      \n      return classList.join(' ') + ' column grid'\n    },\n    annotationConfig () {\n      return this.lib.auth.currentStepAnnotationConfig\n    },\n    type () {\n      if (typeof(this.annotationModule) === 'string') {\n        return this.annotationModule\n      }\n      else if (this.annotationInstance !== null) {\n        return this.annotationInstance.type\n      }\n    },\n    editable () {\n      return (typeof(this.annotationModule) === 'string' \n              || this.status.role !== 'reader'\n              || ( this.annotationInstance !== null && this.annotationInstance.user_id === this.status.userID ))\n    }\n  },\n  watch: {\n    annotationInstance () {\n      this._initHover()\n    }\n  },\n  mounted() {\n    this._initHover()\n  },\n  methods: {\n    _initHover () {\n      //console.log(this.annotationInstance)\n      if (typeof(this.rangy) === 'object') {\n        if (this.annotationInstance !== null \n                && typeof(this.annotationInstance) === 'object') {\n          setTimeout(() => {\n            this.rangy.hoverIn(this.annotationInstance, true)\n          }, 100)\n        }\n        else {\n          this.rangy.hoverOut(true)\n        }\n      }\n    },\n    reloadMyHighlights: async function () {\n      // 先移除我的標註\n      this.rangy.removeMyHighlights()\n      //throw '等等'\n      \n      let data = {}\n      let result = await this.lib.AxiosHelper.get('/client/Annotation/highlightsMy', data)\n      //console.log(result)\n      if (result !== 0) {\n        this.rangy.deserializeAppend(result)\n      }\n    },\n    onDelete: async function () {\n      let test = false\n      \n      if (test || window.confirm(this.$t('Are you sure to delete this annotation?'))) {\n        \n        let data = {\n          id: this.annotationInstance.id\n        }\n        \n        if (test !== true) {\n          await this.lib.AxiosHelper.get('/client/Annotation/destroy', data)\n        }\n        await this.reloadMyHighlights()\n        this.$emit('delete')\n\n        return // 跟上層說關閉視窗\n      }\n    }\n  } // methods\n}\n\nexport default AnnotationEditorModules","import mod from \"-!../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorModules.less?vue&type=style&index=0&id=b22b523c&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorModules.less?vue&type=style&index=0&id=b22b523c&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./AnnotationEditorModules.html?vue&type=template&id=b22b523c&scoped=true&\"\nimport script from \"./AnnotationEditorModules.js?vue&type=script&lang=js&\"\nexport * from \"./AnnotationEditorModules.js?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationEditorModules.less?vue&type=style&index=0&id=b22b523c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b22b523c\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./AnnotationEditorModules.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CAnnotationEditorModules.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('b22b523c')) {\n      api.createRecord('b22b523c', component.options)\n    } else {\n      api.reload('b22b523c', component.options)\n    }\n    module.hot.accept(\"./AnnotationEditorModules.html?vue&type=template&id=b22b523c&scoped=true&\", function () {\n      api.rerender('b22b523c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/AnnotationEditorModules.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationEditorModules.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CAnnotationEditorModules.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationEditorModules.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CAnnotationEditorModules.vue&lang=yaml\"","export * from \"-!../../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./ConfusedClarified.html?vue&type=template&id=0c2da0b0&scoped=true&\"","import mod from \"-!./ConfusedClarified.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./ConfusedClarified.js?vue&type=script&lang=js&\"","import CommonProps from './../commons/CommonProps'\nimport CommonComputed from './../commons/CommonComputed'\nimport CommonWatch from './../commons/CommonWatch'\nimport CommonMethods from './../commons/CommonMethods'\n\nimport AnnotationEditorHeader from './../components/AnnotationEditorHeader/AnnotationEditorHeader.vue'\nimport QuestionTemplate from './../components/QuestionTemplate/QuestionTemplate.vue'\nimport ResourceSearch from './../components/ResourceSearch/ResourceSearch.vue'\n\nlet Confused = {\n  props: CommonProps,\n  data() {\n    this.$i18n.locale = this.config.locale\n    \n    let question = ''\n    let answer = ''\n    let properties = null\n    let notes\n    let type\n    let id\n    //let note = '<p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p>' // for test\n    if (this.annotationInstance !== null \n            && typeof(this.annotationInstance) === 'object') {\n      \n      ({type, id} = this.annotationInstance)\n      \n      //console.log(this.annotationInstance)\n//      if (this.annotationInstance.note !== null \n//              && this.annotationInstance.note !== undefined\n//              && typeof(this.annotationInstance.note) === 'object') {\n//        notes = this.annotationInstance.note\n//        ({question, answer} = notes)\n//      }\n      if (Array.isArray(this.annotationInstance.notes)) {\n        this.annotationInstance.notes.forEach(note => {\n          if (note.type === 'question') {\n            question = note.note\n          }\n          else if (note.type === 'answer') {\n            answer = note.note\n          }\n        })\n      }\n      \n      if (this.annotationInstance.properties !== null \n              && typeof(this.annotationInstance.properties) === 'object') {\n        properties = this.annotationInstance.properties\n      }\n    }\n    \n    return {\n      question: question,\n      questionReset: question,\n      isQuestionEdited: false,\n      answer: answer,\n      answerReset: answer,\n      isAnswerEdited: false,\n      recommandResourceSearchIndex: 0,\n      \n      id: id,\n      type: type,\n      notes: notes,\n      properties: properties\n      //public: \n    }\n  },\n  components: {\n    'annotation-editor-header': AnnotationEditorHeader,\n    'question-template': QuestionTemplate,\n    'resource-search': ResourceSearch,\n  },\n  computed: {\n    annotationConfig () {\n      return this.lib.auth.currentStepAnnotationConfig\n    },\n    public () {\n      return (this.annotationConfig.defaultPermission === 'public')\n    },\n    isAnswerDifferent () {\n      return (this.answer !== this.answerReset)\n    },\n    isQuestionDifferent () {\n      return (this.question !== this.questionReset)\n    },\n    isNoteDifferent () {\n      return (this.isAnswerDifferent || this.isAnswerDifferent)\n    },\n    isQuestionSubmitted () {\n      //console.log(this.properties)\n      return (this.properties !== null \n              && typeof(this.properties) === 'object'\n              && typeof(this.properties.question_submitted_at) === 'number')\n    },\n    isAnswerSubmitted () {\n      return (this.properties !== null \n              && typeof(this.properties) === 'object'\n              && typeof(this.properties.answer_submitted_at) === 'number')\n    },\n    enableAddAnnotation () {\n      if (this.isNoteDifferent \n              && typeof(this.question) === 'string'\n              && this.question !== '') {\n        return true\n      }\n      return false\n    },\n    enableEditAnnotation () {\n      return this.enableAddAnnotation\n    },\n    computedQuestionEditorHeight () {\n      if (this.isQuestionSubmitted === false) {\n        let height\n        if (this.enableCollaboration === true\n                && this.lib.style.isStackWidth()) {\n          height = (this.lib.style.getClientHeight() / 2)\n          height = `calc(${height}px - 14em)`\n        } else {\n          height = `calc(${this.heightPX}px - 14em)`\n        }\n        //console.log(height)\n        return height\n      }\n      else {\n        let height\n        if (this.enableCollaboration === true\n                && this.lib.style.isStackWidth()) {\n          height = (this.lib.style.getClientHeight() / 2)\n          height = `calc(${height}px - 21em)`\n        } else {\n          height = `calc(${this.heightPX}px - 21em)`\n        }\n        //console.log(height)\n        return height\n      }\n    },\n    computedAnswerEditorHeight () {\n      let height\n      if (this.enableCollaboration === true\n              && this.lib.style.isStackWidth()) {\n        height = (this.lib.style.getClientHeight() / 2)\n        height = `calc(${height}px - 10em)`\n      } else {\n        height = `calc(${this.heightPX}px - 21em)`\n      }\n      //console.log(height)\n      return height\n    },\n    computedButtonsClass () {\n      return CommonComputed.computedButtonsClass(this)\n    },\n    moduleConfig () {\n      return this.status.readingConfig.annotationTypeModules[this.annotationModule]\n    },\n    anchorText () {\n      let anchorText\n      if (this.annotationInstance === null) {\n        anchorText = this.rangy.getPinSelectionAnchorText()\n      }\n      else {\n        anchorText = this.rangy.getHoverAnchorText()\n      }\n      \n      if (anchorText === undefined) {\n        anchorText = ''\n      }\n      \n      // 刪除標點符號\n      anchorText = this.lib.StringHelper.removePunctuations(anchorText)\n      \n      //console.log(anchorText)\n      return anchorText\n    },\n    isEditable () {\n      return CommonComputed.isEditable(this)\n    },\n    questionPlaceholder () {\n      let config = this.status.readingConfig.annotationTypeModules['ConfusedClarified']\n      return this.$t(config.questionPlaceholder)\n    },\n    answerPlaceholder () {\n      let config = this.status.readingConfig.annotationTypeModules['ConfusedClarified']\n      return this.$t(config.answerPlaceholder)\n    }\n  },\n  watch: {\n    annotationInstance (annotationInstance) {\n      if (annotationInstance !== null \n            && typeof(annotationInstance) === 'object'\n            && typeof(annotationInstance.note) === 'string') {\n        this.note = annotationInstance.note\n        this.$refs.editor.html(this.note)\n      }\n    }\n  },\n//  mounted() {\n//  },\n  methods: {\n    submitQuestion: async function () {\n      this.properties = {\n        question_submitted_at: (new Date()).getTime()\n      }\n      \n      let data = {\n        anchorPositions: this.pinSelection.anchorPositions,\n        type: this.annotationModule,\n        notes: {\n          'question': this.question\n        },\n        properties: this.properties\n      }\n      \n      if (this.lib.auth.currentStepAnnotationConfig.enableControlPermission === true) {\n        data.public = this.public\n      }\n      \n      //console.log(data)\n      \n      let id = await this.lib.AxiosHelper.post('/client/Annotation/create', data)\n      console.log(id) // for test\n      \n      if (typeof(id) !== 'number') {\n        throw 'Create failed'\n        return false  // 新增失敗\n      }\n      //this.id = id\n      // 請在這裡建立annotationInstance，然後轉換成edit狀態\n      this.id = id\n      this.type = this.annotationModule,\n      this.notes = {\n        'question': this.question\n      }\n      \n      this.rangy.highlightPinnedSelection('my-' + this.annotationModule, this.pinSelection.anchorParagraphIds, false)\n    },\n    submitAnswer: async function () {\n      let type = 'Clarified'\n      this.type = type\n      this.properties.answer_submitted_at = (new Date()).getTime()\n      \n      let data = {\n        id: this.id,\n        type: type,\n        notes: {\n          'question': this.question,\n          'answer': this.answer\n        },\n        properties: this.properties\n      }\n      \n      if (this.lib.auth.currentStepAnnotationConfig.enableControlPermission === true) {\n        data.public = this.public\n      }\n      \n      //console.log(data)\n      \n      let result = await this.lib.AxiosHelper.post('/client/Annotation/update', data)\n      //console.log(result) // for test\n      if (result !== 1) {\n        throw 'Update failed'\n        return false  // 新增失敗\n      }\n      \n      //this.rangy.highlightPinnedSelection('my-' + this.annotationModule, this.pinSelection.anchorParagraphIds)\n      //this.rangy.reloadMyHighlights()\n      this.$emit('reloadMyHighlights')\n      this.$emit('update')\n    },\n    writeLater: async function () {\n      let data = {\n        id: this.id,\n        notes: {\n          'question': this.question,\n          'answer': this.answer\n        }\n      }\n      \n      if (this.lib.auth.currentStepAnnotationConfig.enableControlPermission === true) {\n        data.public = this.public\n      }\n      \n      //console.log(data)\n      \n      let result = await this.lib.AxiosHelper.post('/client/Annotation/update', data)\n      //console.log(id) // for test\n      if (result !== 1) {\n        throw 'Update failed'\n        return false  // 新增失敗\n      }\n      \n      this.$emit('update')\n    },\n    deleteAnnotation () {\n      this.$emit('delete')\n    },\n    hide () {\n      this.$emit('hide', true)\n    },\n    selectQuestion (question) {\n      if (!this.$refs.QuestionEditor) {\n        setTimeout(() => {\n          this.selectQuestion(question)\n        }, 100)\n        return false\n      }\n      //console.log([this.isQuestionEdited, this.question])\n      if (this.isQuestionEdited === true\n          && this.question !== '') {\n        if (!window.confirm(this.$t('New question will overwrite your question. Are you sure?'))) {\n          return false\n        }\n      }\n      //console.log(question)\n      let q = question.template.replace(`{anchorText}`, '{0}')\n      //console.log(this.anchorText)\n      q = this.$t(q, [this.anchorText])\n      this.$refs.QuestionEditor.html(q)\n      this.isQuestionEdited = false\n      this.recommandResourceSearchIndex = question.searchIndex\n    }\n  } // methods\n}\n\nexport default Confused","import mod from \"-!../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ConfusedClarified.less?vue&type=style&index=0&id=0c2da0b0&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ConfusedClarified.less?vue&type=style&index=0&id=0c2da0b0&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./ConfusedClarified.html?vue&type=template&id=0c2da0b0&scoped=true&\"\nimport script from \"./ConfusedClarified.js?vue&type=script&lang=js&\"\nexport * from \"./ConfusedClarified.js?vue&type=script&lang=js&\"\nimport style0 from \"./ConfusedClarified.less?vue&type=style&index=0&id=0c2da0b0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c2da0b0\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./ConfusedClarified.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CConfusedClarified%5CConfusedClarified.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0c2da0b0')) {\n      api.createRecord('0c2da0b0', component.options)\n    } else {\n      api.reload('0c2da0b0', component.options)\n    }\n    module.hot.accept(\"./ConfusedClarified.html?vue&type=template&id=0c2da0b0&scoped=true&\", function () {\n      api.rerender('0c2da0b0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/ConfusedClarified/ConfusedClarified.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./ConfusedClarified.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CConfusedClarified%5CConfusedClarified.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./ConfusedClarified.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CConfusedClarified%5CConfusedClarified.vue&lang=yaml\"","export * from \"-!../../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./MainIdea.html?vue&type=template&id=45a0d506&scoped=true&\"","import mod from \"-!./MainIdea.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./MainIdea.js?vue&type=script&lang=js&\"","import AnnotationEditorHeader from './../components/AnnotationEditorHeader/AnnotationEditorHeader.vue'\n\nimport CommonProps from './../commons/CommonProps'\nimport CommonComputed from './../commons/CommonComputed'\nimport CommonWatch from './../commons/CommonWatch'\nimport CommonMethods from './../commons/CommonMethods'\n\nlet MainIdea = {\n  props: CommonProps,\n  data() {\n    this.$i18n.locale = this.config.locale\n    \n    let note = ''\n    //let note = '<p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p><p>1</p>' // for test\n    if (this.annotationInstance !== null \n            && typeof(this.annotationInstance) === 'object'\n            && typeof(this.annotationInstance.note) === 'string') {\n      note = this.annotationInstance.note\n    }\n    //console.log(note)\n    \n    return {\n      note: note,\n      noteReset: note,\n      //public: \n    }\n  },\n  components: {\n    'annotation-editor-header': AnnotationEditorHeader\n  },\n  computed: {\n    annotationConfig () {\n      return this.lib.auth.currentStepAnnotationConfig\n    },\n    public () {\n      return (this.annotationConfig.defaultPermission === 'public')\n    },\n    isNoteDifferent () {\n      return (this.note !== this.noteReset)\n    },\n    enableAddAnnotation () {\n      if (this.isNoteDifferent \n              && typeof(this.note) === 'string'\n              && this.note !== '') {\n        return true\n      }\n      return false\n    },\n    enableEditAnnotation () {\n      return this.enableAddAnnotation\n    },\n    computedEditorHeight () {\n      return CommonComputed.computedEditorHeight(this)\n    },\n    computedButtonsClass () {\n      return CommonComputed.computedButtonsClass(this)\n    },\n    moduleConfig () {\n      return this.status.readingConfig.annotationTypeModules[this.annotationModule]\n    },\n    editorPlaceholder () {\n      return this.$t(this.moduleConfig.placeholder)\n    },\n    isEditable () {\n      return CommonComputed.isEditable(this)\n    }\n  },\n  watch: {\n    annotationInstance (annotationInstance) {\n      if (annotationInstance !== null \n            && typeof(annotationInstance) === 'object'\n            && typeof(annotationInstance.note) === 'string') {\n        this.note = annotationInstance.note\n        this.$refs.editor.html(this.note)\n      }\n    }\n  },\n//  mounted() {\n//  },\n  methods: {\n    addAnnotation: async function () {\n      \n      let data = {\n        anchorPositions: this.pinSelection.anchorPositions,\n        type: this.annotationModule,\n        notes: {\n          'default': this.note\n        }\n      }\n      \n      if (this.lib.auth.currentStepAnnotationConfig.enableControlPermission === true) {\n        data.public = this.public\n      }\n      \n      //console.log(data)\n      \n      let id = await this.lib.AxiosHelper.post('/client/Annotation/create', data)\n      //console.log(id) // for test\n      if (typeof(id) !== 'number') {\n        return false  // 新增失敗\n      }\n      \n      this.rangy.highlightPinnedSelection('my-' + this.annotationModule, this.pinSelection.anchorParagraphIds)\n      this.$refs.editor.reset()\n      this.$emit('hide', false)\n    },\n    editAnnotation: async function () {\n      let data = {\n        id: this.annotationInstance.id,\n        note: this.note\n      }\n      \n      let result = await this.lib.AxiosHelper.post('/client/Annotation/update', data)\n      \n      if (result !== 1) {\n        throw this.$t('Update failed.')\n      }\n      \n      this.$emit('update')\n    },\n    deleteAnnotation () {\n      this.$emit('delete')\n    },\n    hide () {\n      this.$emit('hide', true)\n    }\n  } // methods\n}\n\nexport default MainIdea","import mod from \"-!../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./MainIdea.less?vue&type=style&index=0&id=45a0d506&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./MainIdea.less?vue&type=style&index=0&id=45a0d506&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./MainIdea.html?vue&type=template&id=45a0d506&scoped=true&\"\nimport script from \"./MainIdea.js?vue&type=script&lang=js&\"\nexport * from \"./MainIdea.js?vue&type=script&lang=js&\"\nimport style0 from \"./MainIdea.less?vue&type=style&index=0&id=45a0d506&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45a0d506\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./MainIdea.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CMainIdea%5CMainIdea.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('45a0d506')) {\n      api.createRecord('45a0d506', component.options)\n    } else {\n      api.reload('45a0d506', component.options)\n    }\n    module.hot.accept(\"./MainIdea.html?vue&type=template&id=45a0d506&scoped=true&\", function () {\n      api.rerender('45a0d506', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/MainIdea/MainIdea.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./MainIdea.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CMainIdea%5CMainIdea.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./MainIdea.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5CMainIdea%5CMainIdea.vue&lang=yaml\"","const CommonComputed = {\n  computedButtonsClass(vm) {\n    if (vm.status.preference === null\n            || vm.status.preference.leftHanded === false) {\n      return 'right aligned column'\n    } else {\n      return 'column'\n    }\n  },\n  computedEditorHeight(vm) {\n    let height\n    if (vm.enableCollaboration === true\n            && vm.lib.style.isStackWidth()) {\n      height = (vm.lib.style.getClientHeight() / 2)\n      height = `calc(${height}px - 12em)`\n    } else {\n      height = `calc(${vm.heightPX}px - 12em)`\n    }\n    //console.log(height)\n    return height\n  },\n  isEditable (vm) {\n    if (vm.annotationInstance === null) {\n      return true\n    }\n    return vm.lib.auth.isEditable(vm.annotationInstance)\n  }\n}\n\nexport default CommonComputed","const CommonMethods = {}\n\nexport default CommonMethods","export default ['lib', 'status', 'config'\n    , 'annotationModule', 'annotationInstance'\n    , 'heightPX', 'pinSelection'\n    , 'rangy', 'editable']","const CommonWatch = {}\n\nexport default CommonWatch","export * from \"-!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./AnnotaionInstruction.html?vue&type=template&id=673c960f&scoped=true&\"","let AnnotaionInstruction = {\n  props: ['config', 'status', 'annotationModule'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n    }\n  },\n  components: {\n  },\n  computed: {\n    instruction () {\n      return this.status.readingConfig.annotationTypeModules[this.annotationModule].instruction\n    }\n  },\n  watch: {\n  },\n  mounted() {\n  },\n  methods: {\n    showInstruction () {\n      this.$refs.Modal.show()\n    }\n  } // methods\n}\n\nexport default AnnotaionInstruction","import mod from \"-!./AnnotaionInstruction.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./AnnotaionInstruction.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotaionInstruction.less?vue&type=style&index=0&id=673c960f&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotaionInstruction.less?vue&type=style&index=0&id=673c960f&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./AnnotaionInstruction.html?vue&type=template&id=673c960f&scoped=true&\"\nimport script from \"./AnnotaionInstruction.js?vue&type=script&lang=js&\"\nexport * from \"./AnnotaionInstruction.js?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotaionInstruction.less?vue&type=style&index=0&id=673c960f&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"673c960f\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./AnnotaionInstruction.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CAnnotaionInstruction%5CAnnotaionInstruction.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('673c960f')) {\n      api.createRecord('673c960f', component.options)\n    } else {\n      api.reload('673c960f', component.options)\n    }\n    module.hot.accept(\"./AnnotaionInstruction.html?vue&type=template&id=673c960f&scoped=true&\", function () {\n      api.rerender('673c960f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotaionInstruction/AnnotaionInstruction.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotaionInstruction.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CAnnotaionInstruction%5CAnnotaionInstruction.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotaionInstruction.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CAnnotaionInstruction%5CAnnotaionInstruction.vue&lang=yaml\"","export * from \"-!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./AnnotationEditorHeader.html?vue&type=template&id=6cd6ece2&scoped=true&\"","import UserInformation from './../UserInformation/UserInformation.vue'\nimport AnnotaionInstruction from './../AnnotaionInstruction/AnnotaionInstruction.vue'\n\n\nlet AnnotationEditorHeader = {\n  props: ['status', 'config', 'annotationModule'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n    }\n  },\n  components: {\n    'user-information': UserInformation,\n    'annotaion-instruction': AnnotaionInstruction\n  },\n  /*\n  computed: {\n  },\n  watch: {\n  },\n  mounted() {\n  },\n  methods: {\n  } // methods\n   */\n}\n\nexport default AnnotationEditorHeader","import mod from \"-!./AnnotationEditorHeader.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./AnnotationEditorHeader.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorHeader.less?vue&type=style&index=0&id=6cd6ece2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationEditorHeader.less?vue&type=style&index=0&id=6cd6ece2&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./AnnotationEditorHeader.html?vue&type=template&id=6cd6ece2&scoped=true&\"\nimport script from \"./AnnotationEditorHeader.js?vue&type=script&lang=js&\"\nexport * from \"./AnnotationEditorHeader.js?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationEditorHeader.less?vue&type=style&index=0&id=6cd6ece2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cd6ece2\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./AnnotationEditorHeader.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CAnnotationEditorHeader%5CAnnotationEditorHeader.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6cd6ece2')) {\n      api.createRecord('6cd6ece2', component.options)\n    } else {\n      api.reload('6cd6ece2', component.options)\n    }\n    module.hot.accept(\"./AnnotationEditorHeader.html?vue&type=template&id=6cd6ece2&scoped=true&\", function () {\n      api.rerender('6cd6ece2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/AnnotationEditorHeader/AnnotationEditorHeader.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationEditorHeader.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CAnnotationEditorHeader%5CAnnotationEditorHeader.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationEditorHeader.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CAnnotationEditorHeader%5CAnnotationEditorHeader.vue&lang=yaml\"","export * from \"-!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./QuestionTemplate.html?vue&type=template&id=36896aef&scoped=true&\"","import mod from \"-!./QuestionTemplate.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./QuestionTemplate.js?vue&type=script&lang=js&\"","let QuestionTemplate = {\n  props: ['lib', 'status', 'config'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n      selectIndex: 0\n    }\n  },\n  computed: {\n    questions () {\n      return this.status.readingConfig.annotationTypeModules['ConfusedClarified'].questionTemplates\n    }\n  },\n  watch: {\n    selectIndex () {\n      this.onSelect()\n    }\n  },\n  mounted() {\n    this.onSelect()\n  },\n  methods: {\n    onSelect () {\n      let question = this.questions[this.selectIndex]\n      this.$emit('selectQuestion', question)\n    }\n  } // methods\n}\n\nexport default QuestionTemplate","import mod from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./QuestionTemplate.less?vue&type=style&index=0&id=36896aef&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./QuestionTemplate.less?vue&type=style&index=0&id=36896aef&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./QuestionTemplate.html?vue&type=template&id=36896aef&scoped=true&\"\nimport script from \"./QuestionTemplate.js?vue&type=script&lang=js&\"\nexport * from \"./QuestionTemplate.js?vue&type=script&lang=js&\"\nimport style0 from \"./QuestionTemplate.less?vue&type=style&index=0&id=36896aef&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36896aef\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./QuestionTemplate.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CQuestionTemplate%5CQuestionTemplate.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('36896aef')) {\n      api.createRecord('36896aef', component.options)\n    } else {\n      api.reload('36896aef', component.options)\n    }\n    module.hot.accept(\"./QuestionTemplate.html?vue&type=template&id=36896aef&scoped=true&\", function () {\n      api.rerender('36896aef', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/QuestionTemplate/QuestionTemplate.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./QuestionTemplate.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CQuestionTemplate%5CQuestionTemplate.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./QuestionTemplate.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CQuestionTemplate%5CQuestionTemplate.vue&lang=yaml\"","export * from \"-!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./ResourceSearch.html?vue&type=template&id=154ee022&scoped=true&\"","let ResourceSearch = {\n  props: ['lib', 'status', 'config', 'propSelectIndex', 'propAnchorText'],\n  data() {\n    this.$i18n.locale = this.config.locale\n    return {\n      selectIndex: this.propSelectIndex,\n      anchorText: this.propAnchorText\n    }\n  },\n//  components: {\n//  },\n  computed: {\n    resources() {\n      return this.status.readingConfig.annotationTypeModules['ConfusedClarified'].externalResourceSearches\n    },\n    computedButtonClass() {\n      if (this.anchorText === '') {\n        return 'disabled'\n      }\n      \n      let i = this.selectIndex\n      if (i === null || i === undefined) {\n        return 'disabled'\n      }\n\n      if (isNaN(i) === false && typeof (i) === 'string') {\n        i = parseInt(i, 10)\n      }\n      if (!(i > -1 && i < this.resources.length)) {\n        return 'disabled'\n      }\n    },\n    selectIndexInteger() {\n      let i = this.selectIndex\n      if (i === null || i === undefined) {\n        return null\n      }\n\n      if (isNaN(i) === false && typeof (i) === 'string') {\n        i = parseInt(i, 10)\n      }\n      if (i > -1 && i < this.resources.length) {\n        return i\n      } else {\n        return null\n      }\n    },\n    urlPattern() {\n      if (this.selectIndexInteger === null) {\n        return null\n      }\n\n      return this.resources[this.selectIndexInteger].urlPattern\n    }\n  },\n  watch: {\n    propSelectIndex (propSelectIndex) {\n      this.selectIndex = propSelectIndex\n    },\n    propAnchorText (propAnchorText) {\n      this.anchorText = propAnchorText\n    } \n  },\n//  mounted() {\n//  },\n  methods: {\n    doSearch() {\n      if (this.urlPattern === null) {\n        return false\n      }\n      let url = this.urlPattern.replace('{anchorText}', this.anchorText)\n\n      //window.open(url, '_blank')\n      //window.open(url, windowname, \"resizable=no, toolbar=no, scrollbars=no, menubar=no, status=no, directories=no, width=\" + w + \", height=\" + h + \", left=\" + x + \", top=\" + y)\n      \n      let ratio = 0.8\n      \n      \n      this._popupCenter(url, '_blank', screen.availWidth * ratio, screen.availHeight * ratio)\n    },\n    _popupCenter: function (url, title, w, h) {\n      var userAgent = navigator.userAgent,\n      mobile = function() {\n        return /\\b(iPhone|iP[ao]d)/.test(userAgent) ||\n          /\\b(iP[ao]d)/.test(userAgent) ||\n          /Android/i.test(userAgent) ||\n          /Mobile/i.test(userAgent);\n      },\n      screenX = typeof window.screenX != 'undefined' ? window.screenX : window.screenLeft,\n      screenY = typeof window.screenY != 'undefined' ? window.screenY : window.screenTop,\n      outerWidth = typeof window.outerWidth != 'undefined' ? window.outerWidth : document.documentElement.clientWidth,\n      outerHeight = typeof window.outerHeight != 'undefined' ? window.outerHeight : document.documentElement.clientHeight - 22,\n      targetWidth = mobile() ? null : w,\n      targetHeight = mobile() ? null : h,\n      V = screenX < 0 ? window.screen.width + screenX : screenX,\n      left = parseInt(V + (outerWidth - targetWidth) / 2, 10),\n      right = parseInt(screenY + (outerHeight - targetHeight) / 2.5, 10),\n      features = [];\n  if (targetWidth !== null) {\n    features.push('width=' + targetWidth);\n  }\n  if (targetHeight !== null) {\n    features.push('height=' + targetHeight);\n  }\n  features.push('left=' + left);\n  features.push('top=' + right);\n  features.push('scrollbars=1');\n\n  var newWindow = window.open(url, title, features.join(','));\n\n  if (window.focus) {\n    newWindow.focus();\n  }\n    },\n    focus () {\n      this.$refs.input.focus()\n    }\n  } // methods\n}\n\nexport default ResourceSearch","import mod from \"-!./ResourceSearch.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./ResourceSearch.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ResourceSearch.less?vue&type=style&index=0&id=154ee022&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./ResourceSearch.less?vue&type=style&index=0&id=154ee022&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./ResourceSearch.html?vue&type=template&id=154ee022&scoped=true&\"\nimport script from \"./ResourceSearch.js?vue&type=script&lang=js&\"\nexport * from \"./ResourceSearch.js?vue&type=script&lang=js&\"\nimport style0 from \"./ResourceSearch.less?vue&type=style&index=0&id=154ee022&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"154ee022\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./ResourceSearch.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CResourceSearch%5CResourceSearch.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('154ee022')) {\n      api.createRecord('154ee022', component.options)\n    } else {\n      api.reload('154ee022', component.options)\n    }\n    module.hot.accept(\"./ResourceSearch.html?vue&type=template&id=154ee022&scoped=true&\", function () {\n      api.rerender('154ee022', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/ResourceSearch/ResourceSearch.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./ResourceSearch.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CResourceSearch%5CResourceSearch.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./ResourceSearch.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CResourceSearch%5CResourceSearch.vue&lang=yaml\"","export * from \"-!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./UserInformation.html?vue&type=template&id=fa31e19a&scoped=true&\"","let UserInformation = {\n  props: ['status', 'annotationModule'],\n  data() {    \n    //this.$i18n.locale = this.config.locale\n    return {\n    }\n  },\n  computed: {\n    username () {\n      if (typeof(this.status.displayName) === 'string') {\n        return this.status.displayName\n      }\n      else {\n        return this.status.username\n      }\n    }\n  },\n  /*\n  components: {\n  },\n  \n  watch: {\n  },\n  mounted() {\n  },\n  methods: {\n  } // methods\n  */\n}\n\nexport default UserInformation","import mod from \"-!./UserInformation.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./UserInformation.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./UserInformation.less?vue&type=style&index=0&id=fa31e19a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./UserInformation.less?vue&type=style&index=0&id=fa31e19a&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./UserInformation.html?vue&type=template&id=fa31e19a&scoped=true&\"\nimport script from \"./UserInformation.js?vue&type=script&lang=js&\"\nexport * from \"./UserInformation.js?vue&type=script&lang=js&\"\nimport style0 from \"./UserInformation.less?vue&type=style&index=0&id=fa31e19a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fa31e19a\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./UserInformation.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CUserInformation%5CUserInformation.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('fa31e19a')) {\n      api.createRecord('fa31e19a', component.options)\n    } else {\n      api.reload('fa31e19a', component.options)\n    }\n    module.hot.accept(\"./UserInformation.html?vue&type=template&id=fa31e19a&scoped=true&\", function () {\n      api.rerender('fa31e19a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationEditorModules/components/UserInformation/UserInformation.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./UserInformation.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CUserInformation%5CUserInformation.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./UserInformation.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationEditorModules%5Ccomponents%5CUserInformation%5CUserInformation.vue&lang=yaml\"","export * from \"-!../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./AnnotationList.html?vue&type=template&id=7508456a&scoped=true&\"","import AnnotationEditorModules from './../AnnotationEditorModules/AnnotationEditorModules.vue'\n\nlet AnnotationList = {\n  props: ['lib', 'status', 'config', 'listPositions'\n    , 'findAnnotation', 'propFindUser', 'propFindType'\n    , 'heightPX'\n    , 'rangy'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n      annotations: [],\n      annotationCount: 0,\n      users: [],\n      userCount: 0,\n      types: [],\n      page: 0,\n      noMore: false,\n      \n      filteredAnnotations: [],\n      filteredAnnotationCount: 0,\n      filteredUsers: [],\n      filteredUserCount: 0,\n      filteredTypes: [],\n      filteredPage: 0,\n      filteredNoMore: false,\n      \n      annotationInstance: this.findAnnotation,\n      findUser: this.propFindUser,\n      findType: this.propFindType,\n      \n      hoverAnnotation: null\n    }\n  },\n  components: {\n    'annotation-editor-modules': AnnotationEditorModules,\n  },\n  computed: {\n    'editorHeightPX' () {\n      let summeryHeight = 50\n      if (this.annotations.length < 2) {\n        summeryHeight = 0\n      }\n      return this.heightPX - summeryHeight\n    },\n    isFiltering () {\n      return (this.findUser !== null || this.findType !== null)\n    },\n    findUserID () {\n      if (this.findUser !== null) {\n        return this.findUser.id\n      }\n    },\n    computedListStyle () {\n      let style = {\n        'max-height': `${this.editorHeightPX - 50}px`\n      }\n      return style\n    }\n  },\n  watch: {\n    'propFindUser' (propFindUser) {\n      this.findUser = propFindUser\n    },\n    'propFindType' (propFindType) {\n      this.findType = propFindType\n    },\n    'listPositions' () {\n      this.page = 0\n      this.noMore = false\n      this.annotationInstance = this.findAnnotation\n      this.loadInit()\n    },\n    'findAnnotation' (findAnnotation) {\n      this.annotationInstance = findAnnotation\n    },\n    'findUser' () {\n      this.filterPage = 0\n      this.filterNoMore = false\n      this.loadFilter()\n    },\n    'findType' () {\n      this.filterPage = 0\n      this.filterNoMore = false\n      this.loadFilter()\n    },\n    'page' (page) {\n      if (page > 0) {\n        this.loadInitNext()\n      }\n    },\n    'filteredPage' (page) {\n      if (page > 0) {\n        this.loadFilterNext()\n      }\n    },\n    'hoverAnnotation' (annotation) {\n      if (annotation !== null) {\n        this.rangy.hoverIn(annotation)\n      }\n      else {\n        this.rangy.hoverOut(annotation)\n      }\n    },\n    'status.search.showAnnotationList': async function (show) {\n      let query = {\n        withCount: true,\n        page: this.page,\n        keyword: this.status.search.keyword\n        //t: (new Date()).getTime()\n      }\n      let url = '/client/Annotation/list'\n\n      let result = await this.lib.AxiosHelper.post(url, query)\n      if (result === 0) {\n        this.noMore = true\n        return false\n      }\n      //console.log(result)\n\n      for (let key in result) {\n        this[key] = result[key]\n      }\n    }\n  },\n  mounted() {\n    this.loadInit()\n    this.loadFilter()\n  },\n  methods: {\n    loadInit: async function (selectOnlyOne) {\n      if (Array.isArray(this.listPositions)) {\n        let query = {\n          anchorPositions: this.listPositions,\n          withCount: true,\n          page: this.page,\n          //t: (new Date()).getTime()\n        }\n        let url = '/client/Annotation/list'\n        \n        let result = await this.lib.AxiosHelper.post(url, query)\n        if (result === 0) {\n          return this.$emit('close')\n        }\n        //console.log(result)\n        \n        for (let key in result) {\n          this[key] = result[key]\n        }\n        \n        //console.log(this.annotations.length)\n        if (selectOnlyOne !== false) {\n          if (this.annotations.length === 1) {\n            this.annotationInstance = this.annotations[0]\n          }\n        }\n      }\n    },\n    loadInitNext: async function () {\n      if (Array.isArray(this.listPositions)) {\n        let query = {\n          anchorPositions: this.listPositions,\n          withCount: true,\n          page: this.page\n        }\n        let url = '/client/Annotation/listNext'\n        \n        let result = await this.lib.AxiosHelper.post(url, query)\n        //console.log(result)\n        if (Array.isArray(result) && result.length > 0) {\n          this.annotations = this.annotations.concat(result)\n        }\n        else {\n          this.noMore = true\n        }\n      }\n    },\n    loadFilter: async function () {\n      if (Array.isArray(this.listPositions)\n              && (this.findUserID !== null || this.findType !== null) ) {\n        \n        let query = {\n          anchorPositions: this.listPositions,\n          withCount: true,\n          // @TODO 這邊應該要加入page\n          findUserID: this.findUserID,\n          findType: this.findType,\n          page: this.filteredPage\n        }\n        \n        let url = '/client/Annotation/list'\n        \n        let result = await this.lib.AxiosHelper.post(url, query)\n        //console.log(result)\n        \n        this.filteredAnnotations = result.annotations\n        this.filteredAnnotationCount = result.annotationCount\n      }\n    },\n    loadFilterNext: async function () {\n      if (Array.isArray(this.listPositions)\n              && (this.findUserID !== null || this.findType !== null) ) {\n        \n        let query = {\n          anchorPositions: this.listPositions,\n          withCount: true,\n          // @TODO 這邊應該要加入page\n          findUserID: this.findUserID,\n          findType: this.findType,\n          page: this.filteredPage\n        }\n        \n        let url = '/client/Annotation/listNext'\n        \n        let result = await this.lib.AxiosHelper.post(url, query)\n        //console.log(result)\n        \n        if (Array.isArray(result) && result.length > 0) {\n          this.filteredAnnotations = this.filteredAnnotations.concat(result)\n        }\n        else {\n          this.filteredNoMore = true\n        }\n      }\n    },\n    clearFilter () {\n      this.findUser = null\n      this.findType = null\n    },\n    reload: async function () {\n      this.annotations = []\n      this.page = 0\n      this.noMore = false\n      \n      this.filteredAnnotation = []\n      this.filteredPage = 0\n      this.filteredNoMore = false\n      \n      await this.loadInit(false)\n      await this.loadFilter()\n      //console.log('do reload')\n    },\n    hoverToggle (annotation) {\n      this.hoverAnnotation = annotation\n    },\n    hoverIn (annotation) {\n      this.hoverAnnotation = annotation\n    },\n    hoverOut () {\n      this.hoverAnnotation = null\n    },\n    scrollList (event) {\n      if (this.noMore === true) {\n        return false\n      }\n      let element = event.target;\n      if (element.scrollHeight - element.scrollTop === element.clientHeight) {\n        //console.log('scrolled');\n        this.page++\n      }\n    },\n    scrollFilterList (event) {\n      if (this.filteredNoMore === true) {\n        return false\n      }\n      let element = event.target;\n      if (element.scrollHeight - element.scrollTop === element.clientHeight) {\n        //console.log('scrolled');\n        this.filteredPage++\n      }\n    },\n    \n    onDelete () {\n      // 從列表中刪除這個標註\n      //this.rangy.removeHighlightByAnnotation(this.annotationInstance)\n      this.onUpdate()\n    },\n    onUpdate: async function () {\n      await this.reload()\n      //this.annotations = this.annotations.filter(annotation => annotation !== (this.annotationInstance))\n      //this.filteredAnnotations = this.filteredAnnotations.filter(annotation => annotation !== (this.annotationInstance))\n      \n      this.annotationInstance = null\n      if (this.annotations.length < 2) {\n        this.$emit('close')\n      }\n    }\n  } // methods\n}\n\nexport default AnnotationList","import mod from \"-!./AnnotationList.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./AnnotationList.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationList.less?vue&type=style&index=0&id=7508456a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationList.less?vue&type=style&index=0&id=7508456a&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./AnnotationList.html?vue&type=template&id=7508456a&scoped=true&\"\nimport script from \"./AnnotationList.js?vue&type=script&lang=js&\"\nexport * from \"./AnnotationList.js?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationList.less?vue&type=style&index=0&id=7508456a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7508456a\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./AnnotationList.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationList%5CAnnotationList.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('7508456a')) {\n      api.createRecord('7508456a', component.options)\n    } else {\n      api.reload('7508456a', component.options)\n    }\n    module.hot.accept(\"./AnnotationList.html?vue&type=template&id=7508456a&scoped=true&\", function () {\n      api.rerender('7508456a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationList/AnnotationList.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationList.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationList%5CAnnotationList.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationList.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationList%5CAnnotationList.vue&lang=yaml\"","import mod from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.global.less?vue&type=style&index=1&lang=less&\"; export default mod; export * from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.global.less?vue&type=style&index=1&lang=less&\"","export * from \"-!../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./AnnotationPanel.html?vue&type=template&id=0a5b4950&scoped=true&\"","import mod from \"-!./AnnotationPanel.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./AnnotationPanel.js?vue&type=script&lang=js&\"","//import VueDraggableResizable from 'vue-draggable-resizable'\n//import 'vue-draggable-resizable/dist/VueDraggableResizable.css'\n\nimport AnnotationList from './AnnotationList/AnnotationList.vue'\nimport AnnotationEditorModules from './AnnotationEditorModules/AnnotationEditorModules.vue'\n\nimport $ from 'jquery'\n\nlet AnnotationPanel = {\n  props: ['lib', 'status', 'config'\n    , 'pinSelection', 'annotationModule', 'rangy'\n    , 'findAnnotation', 'listPositions', 'findUser', 'findType'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n      annotationInstance: null,\n      \n      //heightVH: 50,\n      heightPX: 500,\n      isHide: true,\n      placeholder: null,\n      transitionMode: 'slide up',\n      resizeLocker: false,\n      localStorageKeyPrefix: 'client.components.ReadingProgressesModuels.Reading.components.AnnotationManager.AnnotationPanel.'\n    }\n  },\n  components: {\n    //'vue-draggable-resizable': VueDraggableResizable,\n    \n    'annotation-list': AnnotationList,\n    'annotation-editor-modules': AnnotationEditorModules,\n    \n  },\n  computed: {\n    annotationConfig () {\n      let stepConfig = this.lib.auth.currentStepConfig\n      return stepConfig.annotation\n    },\n//    enableCollaboration () {\n//      //return true // for test\n//      return this.annotationConfig.enableCollaboration\n//    },\n//    enablePermissionControll () {\n//      //return true // for test\n//      return this.annotationConfig.enablePermissionControll\n//    },\n    computedPlaceholderHeight () {\n      //return `calc(${this.heightVH}vh - ${this.navigationPlaceholderHeight}px)`\n      return `calc(${this.heightPX}px - ${this.navigationPlaceholderHeight}px)`\n    },\n    \n    computedSegmentStyle () {\n      if (this.annotationConfig.enableCollaboration === true\n              && this.lib.style.isStackWidth() === true) {\n        return {\n          'max-height': `${this.heightPX}px`,\n          'overflow-y': 'auto',\n          'overflow-x': 'hidden'\n        }\n      }\n      else {\n        return {\n          'height': `${this.heightPX}px`\n        }\n      }\n    },\n    computedSegmentClass () {\n      if (typeof(this.annotationModule) === 'string') {\n        return this.status.readingConfig.annotationTypeModules[this.annotationModule].style.segmentColor\n      }\n    },\n  },\n  watch: {\n    pinSelection: function (pinSelection) {\n      if (pinSelection !== null \n              && typeof(pinSelection) === 'object') {\n        //console.log(pinSelection)\n        this.show()\n      }\n      else {\n        this.hide()\n      }\n    },\n    listPositions: function (listPositions) {\n      if (listPositions !== null \n              && typeof(listPositions) === 'object') {\n        this.show()\n      }\n      else {\n        this.hide()\n      }\n    },\n    heightVH: function (heightVH) {\n      if (typeof(heightVH) === 'number') {\n        this.placeholder.css('height', heightVH + 'vh')\n      }\n    },\n    'status.search.showAnnotationList' (show) {\n      //console.log(show)\n      if (show === true) {\n        this.show()\n      }\n    }\n//    isHide () {\n//      \n//    }\n  },\n  mounted() {\n    this._initHeightPX()\n    \n    this._initPlaceholder()\n    //this._test()\n    \n    //$.extend(require('jquery-ui'))\n    //$.extend(jQueryUI)\n    \n    //console.log(typeof($(this.$refs.panel).resizable))\n    \n  },\n  destroyed() {\n    this.placeholder.remove()\n  },\n  methods: {\n    _initHeightPX () {\n      let sizeRatio = localStorage.getItem(this.localStorageKeyPrefix + 'sizeRatio')\n      if (sizeRatio === null) {\n        sizeRatio = 0.5\n      }\n      else {\n        sizeRatio = parseFloat(sizeRatio)\n      }\n      //console.log(sizeRatio)\n      this.heightPX = (window.innerHeight * sizeRatio)\n    },\n    _initPlaceholder () {\n      let navPH = $('.Navigation.placeholder:first')\n      if (navPH.length === 1) { \n        this.navigationPlaceholderHeight = navPH.height()\n      }\n    \n      let container = $('<div class=\"non-invasive-web-style-framework\"></div>')\n            .appendTo('body')\n      this.placeholder = $('<div class=\"AnnotationPanel placeholder\"></div>')\n            .css('height', this.computedPlaceholderHeight)\n            .hide()\n            .appendTo(container)\n    },\n    show () {\n      //console.log(this.lib.rangy) // for test\n      this.isHide = false\n      this.placeholder.transition(this.transitionMode)\n      window.$(this.$refs.panel).transition(this.transitionMode, () => {\n        //this.placeholder.show()\n      })\n      \n      this.scrollToPinSelection()\n    },\n    hide: function (doUnpin) {\n      this.lib.rangy.hoverOut(true)\n      this.placeholder.transition(this.transitionMode)\n      window.$(this.$refs.panel).transition(this.transitionMode, () => {\n        if (this.isHide === true) {\n          return false\n        }\n        this.isHide = true\n      })\n      if (this.status.search.showAnnotationList === true) {\n        this.status.search.showAnnotationList = false\n      }\n      this.$emit('hide', doUnpin)\n    },\n    scrollToPinSelection () {\n      if (this.pinSelection === null) {\n        return false\n      }\n      \n      let rect = this.pinSelection.rect\n      let viewportHeight = window.innerHeight\n      \n      //if (rect.middle < viewportHeight / 2) {\n      if (rect.bottom < (viewportHeight - this.heightPX)) {\n        return false  // 不做捲動\n      }\n      \n      //let middle = this.pinSelection.rect.middle\n      let middle = ((viewportHeight - this.heightPX) / 2)\n      let scrollTop = this.getScrollTop()\n      //console.log(scrollTop, rect.middle, middle)\n      \n      window.scrollTo({\n        top: (scrollTop + rect.middle - middle),  // 等於是往上捲半個可顯示的畫面\n        behavior: 'smooth'\n      })\n    },\n    /**\n     * @author http://www.eion.com.tw/Blogger/?Pid=1154\n     */\n    getScrollTop () {\n      let bodyTop = 0;\n      if (typeof window.pageYOffset !== \"undefined\") {\n        bodyTop = window.pageYOffset;\n\n      } else if (typeof document.compatMode === \"undefined\"\n                 && document.compatMode !== \"BackCompat\") {\n        bodyTop = document.documentElement.scrollTop;\n\n      } else if (typeof document.body !== \"undefined\") {\n        bodyTop = document.body.scrollTop;\n      }\n      /*顯示出捲動後的高度值*/\n      return bodyTop\n    },\n    \n    onResizeStart: function (event) {\n      if (this.resizeLocker === true) {\n        return false\n      }\n      this.resizeLocker = true\n      \n      let body = $('body')\n      body.addClass('disable-user-select')\n      //console.log(event)\n      //console.log(event)\n      let currentY = event.clientY\n      \n      let moveEvent = (event) => {\n        if (this.lib.style.isSmallHeight() === false) {\n          if (event.clientY < 100\n                  || (window.innerHeight - event.clientY) < 200) {\n            return false\n          }\n        }\n        else {\n          if (event.clientY < 50\n                  || (window.innerHeight - event.clientY) < 100) {\n            return false\n          }\n        }\n          \n        \n        let interval = currentY - event.clientY\n        this.heightPX = this.heightPX + interval\n        currentY = event.clientY\n        //console.log(this.heightPX)\n        //console.log(event)\n        //event.preventDefault()\n        //event.stopPropagation()\n      }\n      \n      let removeMoveEvent = () => {\n        document.removeEventListener('mousemove', moveEvent)\n        document.removeEventListener('mouseup', removeMoveEvent)\n        \n        document.removeEventListener('touchmove', moveEvent)\n        document.removeEventListener('touchend', removeMoveEvent)\n        body.removeClass('disable-user-select')\n        this.resizeLocker = false\n        \n        // 計算最後的比例，然後存到preference去\n        let sizeRatio = ((window.innerHeight - currentY) / window.innerHeight)\n        //console.log(sizeRatio)\n        localStorage.setItem(this.localStorageKeyPrefix + 'sizeRatio', sizeRatio)\n      }\n      \n      document.addEventListener('mousemove', moveEvent)\n      document.addEventListener('mouseup', removeMoveEvent)\n      \n      document.addEventListener('touchmove', moveEvent)\n      document.addEventListener('touchend', removeMoveEvent)\n      \n      event.preventDefault()\n      event.stopPropagation()\n    },\n    \n  } // methods\n}\n\nexport default AnnotationPanel","import mod from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.less?vue&type=style&index=0&id=0a5b4950&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationPanel.less?vue&type=style&index=0&id=0a5b4950&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./AnnotationPanel.html?vue&type=template&id=0a5b4950&scoped=true&\"\nimport script from \"./AnnotationPanel.js?vue&type=script&lang=js&\"\nexport * from \"./AnnotationPanel.js?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationPanel.less?vue&type=style&index=0&id=0a5b4950&lang=less&scoped=true&\"\nimport style1 from \"./AnnotationPanel.global.less?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a5b4950\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./AnnotationPanel.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationPanel.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0a5b4950')) {\n      api.createRecord('0a5b4950', component.options)\n    } else {\n      api.reload('0a5b4950', component.options)\n    }\n    module.hot.accept(\"./AnnotationPanel.html?vue&type=template&id=0a5b4950&scoped=true&\", function () {\n      api.rerender('0a5b4950', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationPanel/AnnotationPanel.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationPanel.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationPanel.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationPanel.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationPanel%5CAnnotationPanel.vue&lang=yaml\"","export * from \"-!../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./AnnotationTypeSelector.html?vue&type=template&id=0f3f24a4&scoped=true&\"","/**\n * https://www.npmjs.com/package/vue-float-action-button\n */\nlet AnnotationTypeSelector = {\n  props: ['status', 'config', 'lib', 'selection'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n      timer: null\n    }\n  },\n  watch: {\n    'selection': function () {\n      let fab = this.$refs.fab\n      clearTimeout(this.timer)\n      if (this.selection !== null) {\n        //console.log('open')\n        this.timer = setTimeout(() => {\n          fab.onOffFab(true)\n        }, 100)\n      }\n      else {\n        this.timer = setTimeout(() => {\n          fab.onOffFab(false)\n        }, 100)\n      }\n      //if (this.selection !== null) {\n      //  console.trace(this.selection)\n      //}\n      //fab.onOffFab((this.selection !== null))\n    }\n  },\n  computed: {\n    modules: function () {\n      let modules = []\n      \n      let currentStep = this.lib.auth.currentStep\n      //console.log(currentStep)\n      if (typeof(currentStep) === 'string') {\n        \n        let config = this.status.readingConfig\n        if (typeof(config) === 'object') {\n          let annotationTypes = config.readingProgressModules[currentStep].annotation.types\n          if (Array.isArray(annotationTypes)) {\n            annotationTypes.forEach(type => {\n              let module = config.annotationTypeModules[type]\n              //console.log(module)\n              if (typeof(module) === 'object'\n                      && module.addable === true) {\n                module.type = type\n                modules.push(module)\n              }\n            })\n          }\n        }\n      }\n      //console.log(modules)\n      modules.reverse()\n      return modules\n    },\n    computedFABPosition () {\n      //console.log(this.status.preference.leftHanded)\n      if (this.status.preference.leftHanded === true) {\n        return 'bottom-left'\n      }\n      else {\n        return 'bottom-right'\n      }\n    },\n    enableList () {\n      return (this.selection !== null \n            && this.selection.highlights.length > 0)\n    }\n  },\n//  mounted() {\n//    console.log(this.status.preference.leftHanded)\n//  },\n  methods: {\n    clickItem: function (type) {\n      //console.log('clickItem', type)\n      this.$emit('selectAnnotation', type)\n    },\n    list () {\n      this.$emit('list')\n    }\n  } // methods\n}\n\nexport default AnnotationTypeSelector","import mod from \"-!./AnnotationTypeSelector.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./AnnotationTypeSelector.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationTypeSelector.less?vue&type=style&index=0&id=0f3f24a4&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./AnnotationTypeSelector.less?vue&type=style&index=0&id=0f3f24a4&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./AnnotationTypeSelector.html?vue&type=template&id=0f3f24a4&scoped=true&\"\nimport script from \"./AnnotationTypeSelector.js?vue&type=script&lang=js&\"\nexport * from \"./AnnotationTypeSelector.js?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationTypeSelector.less?vue&type=style&index=0&id=0f3f24a4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f3f24a4\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./AnnotationTypeSelector.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationTypeSelector%5CAnnotationTypeSelector.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0f3f24a4')) {\n      api.createRecord('0f3f24a4', component.options)\n    } else {\n      api.reload('0f3f24a4', component.options)\n    }\n    module.hot.accept(\"./AnnotationTypeSelector.html?vue&type=template&id=0f3f24a4&scoped=true&\", function () {\n      api.rerender('0f3f24a4', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/AnnotationTypeSelector/AnnotationTypeSelector.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationTypeSelector.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationTypeSelector%5CAnnotationTypeSelector.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./AnnotationTypeSelector.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CAnnotationTypeSelector%5CAnnotationTypeSelector.vue&lang=yaml\"","import mod from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./RangyManager.global.less?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./RangyManager.global.less?vue&type=style&index=0&lang=less&\"","export * from \"-!../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./RangyManager.html?vue&type=template&id=41c21264&\"","//import rangy from 'rangy-updated'\nimport rangy from './rangy/rangy-webpack.js'\nimport $ from 'jquery'\n\nlet RangyManager = {\n  props: ['lib', 'status', 'rangyConfig'],\n  data() {\n    //console.log(this.status)\n    //this.$i18n.locale = this.config.locale\n    return {\n      //serializedHighlights: null,\n      \n      //articleSelector: this.status.readingConfig.articleSelector,\n      //sectionSelector: this.status.readingConfig.sectionSelector,\n      articleNode: null,\n      sectionNodes: null,\n      paragraphNodes: null,\n      \n      selectionApplier: null,\n      selectionHighlighter: null,\n      selection: null,\n      selectionSaved: null,\n      \n      highlighter: null,\n      highlightClasses: [],\n      \n      hoverHighlighter: null,\n      hoverAnnotation: null,\n      hoverAnnotationLock: false,\n      \n      searchResultApplier: null,\n      searchResultTimer: null\n    }\n  },  // data() {\n  computed: {\n    isPinned () {\n      return (this.selectionHighlighter.highlights.length > 0)\n    },\n    isSelecting () {\n      return (rangy.getSelection().toString() !== '')\n    }\n  },  // computed: {\n  \n  watch: {\n    'status.search.keyword' (keyword) {\n      clearTimeout(this.searchResultTimer)\n      this.searchResultTimer = setTimeout(() => {\n        this.searchInArticle(keyword)\n      }, 100)\n      \n    }\n  },  // watch: {\n  mounted() {\n    //console.log('ok')\n    //console.log(rangy)\n    //window.rangy = rangy\n    this._initHighlighter()\n    //console.log(rangy)\n    \n    //document.addEventListener('selectionchange', () => {\n    //console.log(document.getSelection());\n    //});\n    this._initAnchorPosition()\n    this._initOnSelectEventListener()\n    \n    this._initSearch()\n    \n    //this.status.search.keyword = '天' // for test\n  },  // mounted() {\n  methods: {\n    _initAnchorPosition: function () {\n      for (let i = 0; i < this.rangyConfig.articleSelector.length; i++) {\n        let node = $(this.rangyConfig.articleSelector[i])\n        if (node.length > 0) {\n          this.articleNode = node\n          break\n        }\n      }\n      \n      if (this.articleNode === null) {\n        //console.warn('Cannot found any article node.')\n        throw this.$t('Cannot found any article node.')\n        return false\n      }\n      \n      let children = this.articleNode.children()\n      for (let i = 0; i < this.rangyConfig.sectionSelector.length; i++) {\n        let nodes = children.filter(this.rangyConfig.sectionSelector[i])\n        if (nodes.length > 0) {\n          this.sectionNodes = nodes\n          break\n        }\n      }\n      \n      if (this.sectionNodes === null) {\n        //console.warn('Cannot found any article node.')\n        throw this.$t('Cannot found any section node.')\n        return false\n      }\n      \n      this.sectionNodes.each((i, node) => {\n        //node = window.$(node)\n        //node.attr('data-pacor-section-seq-id', i)\n        \n        node.setAttribute('data-pacor-section-seq-id', i)\n      })\n      \n      this.sectionNodes.children().each((i, node) => {\n        //node = window.$(node)\n        //node.attr('data-pacor-section-seq-id', i)\n        \n        node.setAttribute('data-pacor-paragraph-seq-id', i)\n        //console.log(typeof(node.id), node.id)\n        if (typeof(node.id) !== 'string' || node.id === '') {\n          let id = 'pacor-paragraph-id-' + i\n          node.setAttribute('id', id)\n        }\n      })\n    },\n    _initOnSelectEventListener: function () {\n      \n      let triggerSelect = () => {\n        setTimeout(() => {\n          this.onselect()\n        }, 0)\n      }\n      \n      document.addEventListener('touchend', triggerSelect)\n      document.addEventListener('keyup', triggerSelect)\n      document.addEventListener('mouseup', triggerSelect)\n      document.addEventListener('mousedown', triggerSelect)\n      \n      this._initSelectionApplier()\n    },\n    onselect: function () {\n      let selection = rangy.getSelection()\n      if (selection.toString().length > 0 && selection.isCollapsed === false) {\n        let range = selection.getRangeAt(0).cloneRange()\n        let rect = range.getBoundingDocumentRect()\n        selection.rect = rect\n        \n        // 我想要知道它的id跟section做法\n        selection.anchorPositions = []\n        selection.anchorParagraphIds = []\n        \n        let nodes = this._getNodesInRange(selection.getAllRanges())\n        //let nodes = [selection.anchorNode]\n        //console.log(nodes)\n        let highlightClassList = []\n        \n        //console.log(nodes)\n        \n        //let section_seq_id = []\n        //let paragraph_seq_id = []\n        //let paragraph_id = []\n        \n        nodes.forEach(anchorNode => {\n          if (typeof(anchorNode.getAttribute) === 'function' \n                  && anchorNode.getAttribute('data-pacor-highlight') !== 'undefined') {\n            anchorNode.classList.forEach(c => {\n              if ( (c.startsWith('my-') || c.endsWith('others-')) \n                      && highlightClassList.indexOf(c) === -1) {\n                highlightClassList.push(c)\n              }\n            })\n          }\n          \n          \n          //let anchorNode = window.$(selection.anchorNode)\n          let position = {}\n          \n          anchorNode = $(anchorNode)\n          \n          // ------------------\n          \n          \n          // ------------------\n          \n          let parentSection = anchorNode.parents('[data-pacor-section-seq-id]:first')\n          if (parentSection.length === 1) {\n            //selection.anchorPosition.section_seq_id = parseInt(parentSection.attr('data-pacor-section-seq-id'), 10)\n            position.section_seq_id = parseInt(parentSection.attr('data-pacor-section-seq-id'), 10)\n            /*\n            if (section_seq_id.indexOf(id) === -1) {\n              section_seq_id.push(id)\n            }\n            */\n            \n          }\n          else {\n            // we will not select out of scope.\n            return false\n          }\n\n          let parentParagraph = anchorNode.parents('[data-pacor-paragraph-seq-id]:first')\n          if (parentParagraph.length === 1) {\n            //selection.anchorPosition.paragraph_seq_id = parseInt(parentParagraph.attr('data-pacor-paragraph-seq-id'), 10)\n            //selection.anchorPosition.paragraph_id = parentParagraph.attr('id')\n            position.paragraph_seq_id = parseInt(parentParagraph.attr('data-pacor-paragraph-seq-id'), 10)\n            //if (paragraph_seq_id.indexOf(seqID) === -1) {\n            //  paragraph_seq_id.push(seqID)\n            //}\n            \n            position.paragraph_id = parentParagraph.attr('id')\n            selection.anchorParagraphIds.push(position.paragraph_id)\n            //if (paragraph_id.indexOf(id) === -1) {\n            //  paragraph_id.push(id)\n            //}\n          }\n          else {\n            // we will not select out of scope.\n            return false\n          }\n          \n          selection.anchorPositions.push(position)\n        })  // nodes.forEach(anchorNode => {\n        \n        if (selection.anchorPositions.length === 0) {\n          return false\n        }\n        \n        selection.highlights = highlightClassList\n        \n        \n        this.$emit('select', selection)\n        \n        //console.log(highlightClassList)\n        //console.log('onselect', this.highlighter.getHighlightsForElement(selection.getRangeAt(0)))\n        this.selection = selection\n      }\n      else {\n        if (this.selection !== null) {\n          this.selection = null\n          this.$emit('selectcollapsed')\n        }\n      }\n    },\n    \n    _getNextNode: function (node) {\n      if (node.firstChild) {\n          return node.firstChild;\n        }\n      while (node){\n        if (node.nextSibling) {\n          return node.nextSibling;\n        }\n        node = node.parentNode;\n      }\n    },\n    \n    _getNodesInRange: function (ranges) {\n      let nodes = []\n      \n      if (Array.isArray(ranges) === false) {\n        ranges = [ranges]\n      }\n      \n      ranges.forEach(range => {\n        var start = range.startContainer;\n        var end = range.endContainer;\n        var commonAncestor = range.commonAncestorContainer;\n\n        var node;\n\n        // walk parent nodes from start to common ancestor\n        for (node = start.parentNode; node; node = node.parentNode) {\n          nodes.push(node)\n          if (node === commonAncestor) {\n            break\n          }\n        }\n        nodes.reverse()\n\n        // walk children and siblings from start until end is found\n        for (node = start; node; node = this._getNextNode(node)) {\n          nodes.push(node)\n          if (node === end)\n            break\n        }\n      })\n\n      return nodes;\n    },\n    \n    // ------------------------------------------------------\n    \n    _initSelectionApplier: function () {\n      // Enable buttons\n      let classApplierModule = rangy.modules.ClassApplier;\n\n      // Next line is pure paranoia: it will only return false if the browser has no support for ranges,\n      // selections or TextRanges. Even IE 5 would pass this test.\n      if (rangy.supported && classApplierModule && classApplierModule.supported) {\n        this.selectionApplier = rangy.createClassApplier(\"pacor-selection\", {\n          tagNames: [\"span\", \"a\", \"b\", \"img\"],\n          ignoreWhiteSpace: true,\n        })\n        \n        \n        this.selectionHighlighter = rangy.createHighlighter()\n        this.selectionHighlighter.addClassApplier(this.selectionApplier)\n        \n        let hoverApplier = rangy.createClassApplier(\"pacor-hover\", {\n          tagNames: [\"span\", \"a\", \"b\", \"img\"],\n          ignoreWhiteSpace: true,\n        })\n        \n        this.hoverHighlighter = rangy.createHighlighter()\n        this.hoverHighlighter.addClassApplier(hoverApplier)\n      }\n    },\n    \n    pinSelection: function () {\n      this.unpinSelection()\n      if (this.selection === null \n              || Array.isArray(this.selection.anchorPositions) === false\n              || Array.isArray(this.selection.anchorParagraphIds) === false) {\n        return false\n      }\n      \n      this.selectionSaved = rangy.saveSelection()\n      //console.log(this.selectionSaved)\n      //.log(this.selection.getAllRanges())\n      \n      //console.log(this.selectionSaved)\n      //let range = this.selection.saveRanges()\n      //console.log(range)\n      //console.log(this.selection.getRangeAt(0))\n      \n      //this.selectionApplier.toggleSelection(window, 'pacor-paragraph-id-0')\n      let highlights = this.selectionHighlighter.highlightSelection('pacor-selection', {\n        exclusive: false,\n        containerElementId: this.selection.anchorParagraphIds\n      })\n      \n      // 在這裡為它們加上文字如何？\n      //console.log(highlights)\n      this.selection.anchorPositions.forEach((position, i) => {\n        let h = highlights[i]\n        let {start_pos, end_pos, anchor_text} = this._getAnchorPositionFromHighlight(h)\n        \n        position.start_pos = start_pos\n        position.end_pos = end_pos\n        position.anchor_text = anchor_text\n        //console.log(anchor_text)\n        //position.anchor_text = h.classApplier.toString()\n      })\n      //console.log(this.selection.anchorPositions)\n      \n      //console.log(highlight)\n      //console.log(this.selectionHighlighter.serialize())\n      //console.log(this.highlighter.serialize())\n      \n      \n      /*\n      if (typeof(scrollOptions) === 'object') {\n        if (typeof(scrollOptions.delay) === 'number') {\n          setTimeout(() => {\n            rangy.restoreSelection(this.selectionSaved)\n            this.selection.anchorNode.scrollIntoView(scrollOptions)\n            this.selection.removeAllRanges()\n          }, scrollOptions.delay)\n        }\n        else {\n          this.selection.anchorNode.scrollIntoView(scrollOptions)\n        }\n      }\n      */\n      //console.log('pinSelection', this.selection.anchorPositions[0])\n      this.selection.removeAllRanges()\n      //this.selection = null\n      \n      return this.selection\n    },\n    _getAnchorPositionFromHighlight (highlight) {\n      if (highlight === undefined) {\n        return ''\n      }\n      let start_pos = highlight.characterRange.start\n      let end_pos = highlight.characterRange.end\n\n      let element = document.getElementById(highlight.containerElementId)\n      //console.log(element, h.containerElementId, i)\n      let anchor_text\n      if (start_pos > 0) {\n        //anchor_text = element.innerText.slice(start_pos - 1, end_pos - 1)\n        anchor_text = element.innerText.slice(start_pos, end_pos)\n      }\n      else {\n        anchor_text = element.innerText.slice(0, end_pos - 1)\n      }\n      return {\n        start_pos,\n        end_pos,\n        anchor_text\n      }\n    },\n    unpinSelection : function (restoreSelection) {\n      //console.trace('unpinSelection')\n      this.selectionHighlighter.removeAllHighlights()\n      window.$('.pacor-selection').removeClass('pacor-selection')\n      this.hoverOut(true)\n      \n      /*\n      if (typeof(scrollOptions) === 'object') {\n        if (typeof(scrollOptions.delay) === 'number') {\n          setTimeout(() => {\n            rangy.restoreSelection(this.selectionSaved)\n            this.selection.anchorNode.scrollIntoView(scrollOptions)\n            this.selection.removeAllRanges()\n          }, scrollOptions.delay)\n        }\n        else {\n          this.selection.anchorNode.scrollIntoView(scrollOptions)\n        }\n      }*/\n      \n      //console.log(restoreSelection, this.selectionSaved)\n      if (restoreSelection === true && this.selectionSaved !== null) {\n        let selection = rangy.getSelection()\n        if (selection.toString().length === 0) {\n          //console.log('是我嗎？')\n          rangy.restoreSelection(this.selectionSaved)\n          this.selectionSaved = null\n        }\n      }\n      return this\n    },\n    highlightPinnedSelection: function (className, anchorParagraphIds, doUnpin) {\n      if (this.highlightClasses.indexOf(className) === -1\n              || this.selectionSaved === null) {\n        return false\n      }\n      \n      \n      //let sel = rangy.getSelection()\n      //let id = window.$(sel.anchorNode).parents(\"[data-pacor-paragraph-seq-id]:first\").prop('id')\n      //return\n      //toggleItalicYellowBg();\n      //let ids = JSON.parse(JSON.stringify(this.selection.anchorPosition.paragraph_id))\n      //console.log(this.selection.anchorPosition.paragraph_id)\n      \n      /*\n      let highlights = []\n      \n      let loop = (i) => {\n        console.log(i, ids.length)\n        rangy.restoreSelection(this.selectionSaved)\n        if (i < ids.length) {\n          let id = ids[i]\n          console.log(id)\n          let highlight = this.highlighter.highlightSelection(className, {\n            exclusive: false,\n            containerElementId: id,\n            selection: this.selection\n          })\n          highlights = highlights.concat(highlight)\n          this.selection.removeAllRanges()\n          setTimeout(function () {\n            loop(i+1)\n          }, 500)\n          return\n        }\n        else {\n          console.log(highlights)\n\n          //console.log(className)\n          this.selection.removeAllRanges()\n          this.unpinSelection()\n\n          this.selection.highlight = highlights\n        }\n      }\n      loop(0)\n      */\n      /*\n      this.selection.anchorPosition.paragraph_id.forEach(id => {\n        console.log(id, className)\n        let highlight = this.highlighter.highlightSelection(className, {\n          exclusive: false,\n          containerElementId: id\n        })\n        highlights = highlights.concat(highlight)\n      })\n        \n      console.log(highlights)\n      \n      //console.log(className)\n      this.selection.removeAllRanges()\n      this.unpinSelection()\n      \n      this.selection.highlight = highlights\n      \n      return this.selection\n       */\n      \n      //let ids = JSON.parse(JSON.stringify(this.selection.anchorPosition.paragraph_id))\n      \n      rangy.restoreSelection(this.selectionSaved)\n      \n      this.highlighter.highlightSelection(className, {\n        exclusive: false,\n        containerElementId: anchorParagraphIds\n      })\n      //console.log(highlight[0])\n      \n      if (doUnpin !== false) {\n        let selection = rangy.getSelection()\n        selection.removeAllRanges()\n\n        this.selectionSaved = null\n        this.unpinSelection()\n      }\n      \n      //this.selection.highlight = highlight\n      \n      //return this.selection\n    },\n    \n    removeMyHighlights () {\n      \n      this.highlighter.highlights = this.highlighter.highlights.filter(hl => {\n        let className = hl.classApplier.className\n        if (className.startsWith('my-')) {\n          hl.unapply()\n          return false\n        }\n        else {\n          return true\n        }\n      })\n      \n    },\n    \n    removeHighlightByAnnotation (annotation) {\n      let type = this.lib.auth.getHighlightAnnotationType(annotation)\n      if (this.highlightClasses.indexOf(type) === -1) {\n        return false\n      }\n      \n      //let range = this.highlighter.highlights[0].getRange().cloneRange()\n      //window.range = range // for test\n      \n      //console.log(type)\n      let highlightsToRemove = []\n      \n      this.highlighter.highlights.forEach(hl => {\n        let range = hl.characterRange\n        //console.log(range)\n        let className = hl.classApplier.className\n        //console.log(className, type)\n        for (let i = 0; i < annotation.anchorPositions.length; i++) {\n          let pos = annotation.anchorPositions[i]\n          //console.log(pos)\n          if (type === className \n                  && hl.containerElementId === pos.paragraph_id\n                  && range.start === pos.start_pos\n                  && range.end === pos.end_pos) {\n            hl.unapply()\n            highlightsToRemove.push(hl)\n            // 然後要把這個從highlights中移除\n            break\n          }\n        }\n      })\n      \n      this.highlighter.highlights = this.highlighter.highlights.filter(hl => (highlightsToRemove.indexOf(hl) === -1))\n      \n      this.unpinSelection()\n      this.hoverOut(true)\n    },\n    \n    removeHighlightFromPinnedSelection: function (className) {\n      //console.log([this.highlightClasses.indexOf(className), this.selectionSaved])\n      if (this.highlightClasses.indexOf(className) === -1\n              || this.selectionSaved === null) {\n        return false\n      }\n      \n      rangy.restoreSelection(this.selectionSaved);\n      //let sel = rangy.getSelection()\n      //let id = window.$(sel.anchorNode).parents(\"[data-pacor-paragraph-seq-id]:first\").prop('id')\n      //return\n      //toggleItalicYellowBg();\n      \n      //let highlight = this.highlighter.getHighlightForElement(this.selection)\n      //highlight.removeHighlights( [className] )\n      \n      //console.log(className)\n      this.highlighter.unhighlightSelection( [className] )\n      \n      //console.log(className)\n      if (this.selection !== null) {\n        this.selection.removeAllRanges()\n      }\n      this.unpinSelection()\n      \n      //this.selection.highlightClassName = className\n      \n      //return this.selection\n      return this\n    },\n    \n    // -------------------\n    \n    _getAnchorPositionFromElement (element, event) {\n      let highlights = this.highlighter.getHighlightsForElement(element)\n      if (highlights === null) {\n        return null\n      }\n      \n      let pidJSON = {}\n      highlights.forEach(highlight => {\n        let start_pos = highlight.characterRange.start\n        let end_pos = highlight.characterRange.end\n        let paragraph_id = highlight.containerElementId\n        \n        if (typeof(pidJSON[paragraph_id]) === 'undefined') {\n          pidJSON[paragraph_id] = {\n            start_pos,\n            end_pos,\n            paragraph_id\n          }\n        }\n        else {\n          if (start_pos < pidJSON[paragraph_id].start_pos) {\n            pidJSON[paragraph_id].start_pos = start_pos\n          }\n          if (end_pos > pidJSON[paragraph_id].end_pos) {\n            pidJSON[paragraph_id].end_pos = end_pos\n          }\n        }\n      })\n      \n      let output = []\n      for (let key in pidJSON) {\n        output.push(pidJSON[key])\n      }\n      return {\n        anchorPositions: output,\n        event: event\n      }\n    },\n    \n    _initHighlighter: function () {\n      if (typeof(this.rangyConfig.annotationTypeModules) !== 'object') {\n        return false\n      }\n      let rules = []\n      rangy.init()\n      this.highlighter = rangy.createHighlighter()\n      \n      window.hl = this.highlighter  // @TODO for test\n      \n      let vm = this\n      let options = {\n        ignoreWhiteSpace: true,\n        tagNames: [\"span\", \"a\", \"b\", \"img\"],\n        elementAttributes: {\n          'data-pacor-highlight': ''\n        },\n        elementProperties: {\n          onclick: function (event) {\n            let pos = vm._getAnchorPositionFromElement(this, event)\n            //console.log(pos)\n            vm.$emit('highlightClick', pos)\n            //event.stopPropagation()\n            //event.preventDefault()\n          },\n          onmouseover: function (event) {\n            vm.$emit('highlightMouseover', vm._getAnchorPositionFromElement(this, event))\n            \n            //event.stopPropagation()\n            //event.preventDefault()\n          },\n          onmouseout: function (event) {\n            vm.$emit('highlightMouseout')\n            //event.stopPropagation()\n            //event.preventDefault()\n          }\n        }\n      }\n      \n      let ownerClasses = ['my', 'others']\n      ownerClasses.forEach(ownerClass => {\n        for (let moduleName in this.rangyConfig.annotationTypeModules) {\n          let className = ownerClass + '-' + moduleName\n          let applier = rangy.createClassApplier(className, options)\n          this.highlighter.addClassApplier(applier);\n          this.highlightClasses.push(className)\n\n          // 如果有css style的話\n          let config = this.rangyConfig.annotationTypeModules[moduleName]\n          if (typeof(config.style) === 'object'\n                  && typeof(config.style.highlight) === 'object'\n                  && typeof(config.style.highlight[ownerClass]) === 'string') {\n            let rule = config.style.highlight[ownerClass]\n            //console.log(rule)\n            if (typeof(rule) === 'string') {\n              let selector = `[data-pacor-section-seq-id] [data-pacor-paragraph-seq-id] .${className}`\n              rules.push(`${selector} {${rule}}`)\n            }\n          }\n        } // for (let className in this.rangyConfig.annotationTypeModules) {\n      })\n      \n      if (rules.length > 0) {\n        let sheet\n        if (window.document.styleSheets.length > 0) {\n          sheet = window.document.styleSheets[0]\n        }\n        else {\n          sheet = document.createElement(\"style\")\n          sheet.type = \"text/css\"\n          document.head.appendChild(sheet)\n        }\n        \n        rules.reverse()\n        rules.forEach(rule => {\n          //console.log(rule)\n          sheet.insertRule(rule, sheet.cssRules.length)\n        })\n      } // if (rules.length > 0) {\n      \n    },\n    \n    // -----------------------------------------------------------------\n    \n    hoverIn: function (annotation, doLock) {\n      //console.log(disableHoverout)\n      if (this.hoverAnnotation === annotation) {\n        if (doLock !== true) {\n          this.hoverOut()\n        }\n        this.hoverAnnotationLock = doLock\n        return false\n      }\n      \n      this.hoverOut()\n      //$('.rangySelectionBoundary').html('')\n      //this.unpinSelection()\n      //annotation = this._adjustPositionWithPinnedSelection(annotation)\n      //console.log(annotation)\n      setTimeout(() => {\n        let highlight = this._annotationToHighlighString(annotation, 'pacor-hover')\n        //console.log(highlight)\n        this.hoverHighlighter.deserialize(highlight)\n        this.hoverAnnotation = annotation\n        this.hoverAnnotationLock = doLock\n      }, 0)\n        \n      //console.log(this.hoverAnnotationLock)\n      return this\n    },\n    _adjustPositionWithPinnedSelection (annotation) {\n      if (this.isPinned === false) {\n        return annotation\n      }\n      \n      //console.log('hoverIn', annotation.anchorPositions[0])\n      //let shift = this.isPinned ? 1 : 0\n      //console.log(shift)\n      let pinHighlights = this.selectionHighlighter.highlights\n      annotation.anchorPositions = annotation.anchorPositions.map(pos => {\n        pinHighlights.forEach(pin => {\n          pin = this._highlightToAnchorPosition(pin)\n          //console.log(pos)\n          //console.log(pin)\n          if (pin.paragraph_id !== pos.paragraph_id) {\n            return false\n          }\n          \n          if (pos.start_pos > pin.start_pos \n                  && pos.end_pos < pin.end_pos ) {\n            // 包含的狀態\n            pos.start_pos = pos.start_pos + 1\n            pos.end_pos = pos.end_pos + 1\n          }\n          else if (pos.end_pos === pin.end_pos) {\n            pos.start_pos = pos.start_pos + 1\n            pos.end_pos = pos.end_pos + 2\n          }\n          else if (pos.end_pos === pin.start_pos\n                  || pos.end_pos === pin.start_pos + 1) {\n            pos.end_pos = pos.end_pos + 1\n          }\n          else if (pos.start_pos === pin.start_pos + 1) {\n            pos.end_pos = pos.end_pos + 2\n          }\n        })\n        return pos\n      })\n      \n      return annotation\n    },\n    _highlightToAnchorPosition (highlight) {\n      let range = highlight.characterRange\n      return {\n        start_pos: range.start,\n        end_pos: range.end,\n        paragraph_id: highlight.containerElementId\n      }\n    },\n    hoverOut : function (doUnlock) {\n      if (doUnlock === true) {\n        this.hoverAnnotationLock = false\n      }\n      \n      if (this.hoverAnnotationLock === true) {\n        return false\n      }\n      //console.trace('hoverOut')\n      this.hoverHighlighter.removeAllHighlights()\n      this.hoverAnnotation = null\n      return this\n    },\n    getHoverAnchorText () {\n      let highlight = this.hoverHighlighter.highlights[0]\n      let {anchor_text} = this._getAnchorPositionFromHighlight(highlight)\n      return anchor_text\n    },\n    getPinSelectionAnchorText () {\n      let highlight = this.selectionHighlighter.highlights[0]\n      //console.log(highlight)\n      let {anchor_text} = this._getAnchorPositionFromHighlight(highlight)\n      //console.log(anchor_text)\n      return anchor_text\n    },\n    \n    // -----------------------------------------------------------------\n    \n    _annotationToHighlighString (annotations, type) {\n      if (annotations === null || annotations === undefined) {\n        return ''\n      }\n      \n      if (Array.isArray(annotations) === false) {\n        annotations = [annotations]\n      }\n      \n      let highlightJSONArray = []\n      let id = 0\n      annotations.forEach((annotation) => {\n        if (type === undefined) {\n          type = annotation.type\n          if (annotation.user_id === this.status.userID) {\n            type = 'my-' + type\n          }\n          else {\n            type = 'others-' + type\n          }\n        }\n        \n        annotation.anchorPositions.forEach(pos => {\n          id++\n          highlightJSONArray.push([\n            pos.start_pos,\n            pos.end_pos,\n            id,\n            type,\n            pos.paragraph_id\n          ].join('$'))\n        })\n      })\n      highlightJSONArray.unshift('type:textContent')\n      highlightJSONArray = highlightJSONArray.join('|')\n      \n      return highlightJSONArray\n    },\n    deserialize: function (highlightJSONArray, options) {\n      // \"type:textContent|28$198$2$confused-clarified$pacor-paragraph-id-2\"\n      if (typeof(highlightJSONArray) !== 'string') {\n        highlightJSONArray = this._annotationToHighlighString(highlightJSONArray)\n      }\n      \n      this.highlighter.deserializeAsync(highlightJSONArray, options)\n      return this\n    },\n    deserializeAppend: function (highlightJSONArray) {\n      return this.deserialize(highlightJSONArray, {\n        append: true\n      })\n    },\n    \n    // -----------------------------\n    \n    _initSearch () {\n      var classApplierModule = rangy.modules.ClassApplier;\n      if (!(rangy.supported && classApplierModule && classApplierModule.supported)) {\n        return false\n      }\n      \n      this.searchResultApplier = rangy.createClassApplier(\"pacor-search-result\")\n    },\n    searchInArticle (searchTerm) {\n      var range = rangy.createRange();\n      var searchScopeRange = rangy.createRange();\n      \n      //searchScopeRange.selectNodeContents(document.body);\n      let node = this.articleNode[0]\n      //let node = document.body\n      range.selectNodeContents(node);\n\n      var options = {\n          caseSensitive: false,\n          wholeWordsOnly: false,\n          withinRange: searchScopeRange,\n          direction: \"forward\" // This is redundant because \"forward\" is the default\n      };\n\n      range.selectNodeContents(node);\n      //this.searchResultApplier.undoToRange(range);\n      \n      $('.pacor-search-result').removeClass('pacor-search-result')\n      if (searchTerm === \"\") {\n        //this.searchResultApplier.detach()\n        //console.log('移除嗎？')\n        return false\n      }\n\n      // Iterate over matches\n      while (range.findText(searchTerm, options)) {\n        // range now encompasses the first text match\n        this.searchResultApplier.applyToRange(range)\n        // Collapse the range to the position immediately after the match\n        range.collapse(false);\n      }\n    }\n    \n  } // methods\n}\n\nexport default RangyManager","import mod from \"-!./RangyManager.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./RangyManager.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RangyManager.html?vue&type=template&id=41c21264&\"\nimport script from \"./RangyManager.js?vue&type=script&lang=js&\"\nexport * from \"./RangyManager.js?vue&type=script&lang=js&\"\nimport style0 from \"./RangyManager.global.less?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('41c21264')) {\n      api.createRecord('41c21264', component.options)\n    } else {\n      api.reload('41c21264', component.options)\n    }\n    module.hot.accept(\"./RangyManager.html?vue&type=template&id=41c21264&\", function () {\n      api.rerender('41c21264', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/RangyManager/RangyManager.vue\"\nexport default component.exports","/**\n * Class Applier module for Rangy.\n * Adds, removes and toggles classes on Ranges and Selections\n *\n * Part of Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core.\n *\n * Copyright 2015, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.1-dev\n * Build date: 20 May 2015\n */\n\nexport default (rangy) => {\n\n  rangy.createModule(\"ClassApplier\", [\"WrappedSelection\"], function (api, module) {\n    var dom = api.dom;\n    var DomPosition = dom.DomPosition;\n    var contains = dom.arrayContains;\n    var util = api.util;\n    var forEach = util.forEach;\n\n\n    var defaultTagName = \"span\";\n    var createElementNSSupported = util.isHostMethod(document, \"createElementNS\");\n\n    function each(obj, func) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) {\n          if (func(i, obj[i]) === false) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    function trim(str) {\n      return str.replace(/^\\s\\s*/, \"\").replace(/\\s\\s*$/, \"\");\n    }\n\n    function classNameContainsClass(fullClassName, className) {\n      return !!fullClassName && new RegExp(\"(?:^|\\\\s)\" + className + \"(?:\\\\s|$)\").test(fullClassName);\n    }\n\n    // Inefficient, inelegant nonsense for IE's svg element, which has no classList and non-HTML className implementation\n    function hasClass(el, className) {\n      if (typeof el.classList === \"object\") {\n        return el.classList.contains(className);\n      } else {\n        var classNameSupported = (typeof el.className === \"string\");\n        var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n        return classNameContainsClass(elClass, className);\n      }\n    }\n\n    function addClass(el, className) {\n      if (typeof el.classList == \"object\") {\n        el.classList.add(className);\n      } else {\n        var classNameSupported = (typeof el.className === \"string\");\n        var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n        if (elClass) {\n          if (!classNameContainsClass(elClass, className)) {\n            elClass += \" \" + className;\n          }\n        } else {\n          elClass = className;\n        }\n        if (classNameSupported) {\n          el.className = elClass;\n        } else {\n          el.setAttribute(\"class\", elClass);\n        }\n      }\n    }\n\n    var removeClass = (function () {\n      function replacer(matched, whiteSpaceBefore, whiteSpaceAfter) {\n        return (whiteSpaceBefore && whiteSpaceAfter) ? \" \" : \"\";\n      }\n\n      return function (el, className) {\n        if (typeof el.classList === \"object\") {\n          el.classList.remove(className);\n        } else {\n          var classNameSupported = (typeof el.className === \"string\");\n          var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n          elClass = elClass.replace(new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\"), replacer);\n          if (classNameSupported) {\n            el.className = elClass;\n          } else {\n            el.setAttribute(\"class\", elClass);\n          }\n        }\n      };\n    })();\n\n    function getClass(el) {\n      var classNameSupported = (typeof el.className === \"string\");\n      return classNameSupported ? el.className : el.getAttribute(\"class\");\n    }\n\n    function sortClassName(className) {\n      return className && className.split(/\\s+/).sort().join(\" \");\n    }\n\n    function getSortedClassName(el) {\n      return sortClassName(getClass(el));\n    }\n\n    function haveSameClasses(el1, el2) {\n      return getSortedClassName(el1) === getSortedClassName(el2);\n    }\n\n    function hasAllClasses(el, className) {\n      var classes = className.split(/\\s+/);\n      for (var i = 0, len = classes.length; i < len; ++i) {\n        if (!hasClass(el, trim(classes[i]))) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    function canTextBeStyled(textNode) {\n      var parent = textNode.parentNode;\n      return (parent && parent.nodeType === 1 && !/^(textarea|style|script|select|iframe)$/i.test(parent.nodeName));\n    }\n\n    function movePosition(position, oldParent, oldIndex, newParent, newIndex) {\n      var posNode = position.node, posOffset = position.offset;\n      var newNode = posNode, newOffset = posOffset;\n\n      if (posNode === newParent && posOffset > newIndex) {\n        ++newOffset;\n      }\n\n      if (posNode === oldParent && (posOffset === oldIndex || posOffset === oldIndex + 1)) {\n        newNode = newParent;\n        newOffset += newIndex - oldIndex;\n      }\n\n      if (posNode === oldParent && posOffset > oldIndex + 1) {\n        --newOffset;\n      }\n\n      position.node = newNode;\n      position.offset = newOffset;\n    }\n\n    function movePositionWhenRemovingNode(position, parentNode, index) {\n      if (position.node === parentNode && position.offset > index) {\n        --position.offset;\n      }\n    }\n\n    function movePreservingPositions(node, newParent, newIndex, positionsToPreserve) {\n      // For convenience, allow newIndex to be -1 to mean \"insert at the end\".\n      if (newIndex === -1) {\n        newIndex = newParent.childNodes.length;\n      }\n\n      var oldParent = node.parentNode;\n      var oldIndex = dom.getNodeIndex(node);\n\n      forEach(positionsToPreserve, function (position) {\n        movePosition(position, oldParent, oldIndex, newParent, newIndex);\n      });\n\n      // Now actually move the node.\n      if (newParent.childNodes.length == newIndex) {\n        newParent.appendChild(node);\n      } else {\n        newParent.insertBefore(node, newParent.childNodes[newIndex]);\n      }\n    }\n\n    function removePreservingPositions(node, positionsToPreserve) {\n\n      var oldParent = node.parentNode;\n      var oldIndex = dom.getNodeIndex(node);\n\n      forEach(positionsToPreserve, function (position) {\n        movePositionWhenRemovingNode(position, oldParent, oldIndex);\n      });\n\n      dom.removeNode(node);\n    }\n\n    function moveChildrenPreservingPositions(node, newParent, newIndex, removeNode, positionsToPreserve) {\n      var child, children = [];\n      while ((child = node.firstChild)) {\n        movePreservingPositions(child, newParent, newIndex++, positionsToPreserve);\n        children.push(child);\n      }\n      if (removeNode) {\n        removePreservingPositions(node, positionsToPreserve);\n      }\n      return children;\n    }\n\n    function replaceWithOwnChildrenPreservingPositions(element, positionsToPreserve) {\n      return moveChildrenPreservingPositions(element, element.parentNode, dom.getNodeIndex(element), true, positionsToPreserve);\n    }\n\n    function rangeSelectsAnyText(range, textNode) {\n      var textNodeRange = range.cloneRange();\n      textNodeRange.selectNodeContents(textNode);\n\n      var intersectionRange = textNodeRange.intersection(range);\n      var text = intersectionRange ? intersectionRange.toString() : \"\";\n\n      return text != \"\";\n    }\n\n    function getEffectiveTextNodes(range) {\n      var nodes = range.getNodes([3]);\n\n      // Optimization as per issue 145\n\n      // Remove non-intersecting text nodes from the start of the range\n      var start = 0, node;\n      while ((node = nodes[start]) && !rangeSelectsAnyText(range, node)) {\n        ++start;\n      }\n\n      // Remove non-intersecting text nodes from the start of the range\n      var end = nodes.length - 1;\n      while ((node = nodes[end]) && !rangeSelectsAnyText(range, node)) {\n        --end;\n      }\n\n      return nodes.slice(start, end + 1);\n    }\n\n    function elementsHaveSameNonClassAttributes(el1, el2) {\n      if (el1.attributes.length != el2.attributes.length)\n        return false;\n      for (var i = 0, len = el1.attributes.length, attr1, attr2, name; i < len; ++i) {\n        attr1 = el1.attributes[i];\n        name = attr1.name;\n        if (name != \"class\") {\n          attr2 = el2.attributes.getNamedItem(name);\n          if ((attr1 === null) != (attr2 === null))\n            return false;\n          if (attr1.specified != attr2.specified)\n            return false;\n          if (attr1.specified && attr1.nodeValue !== attr2.nodeValue)\n            return false;\n        }\n      }\n      return true;\n    }\n\n    function elementHasNonClassAttributes(el, exceptions) {\n      for (var i = 0, len = el.attributes.length, attrName; i < len; ++i) {\n        attrName = el.attributes[i].name;\n        if (!(exceptions && contains(exceptions, attrName)) && el.attributes[i].specified && attrName != \"class\") {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    var getComputedStyleProperty = dom.getComputedStyleProperty;\n    var isEditableElement = (function () {\n      var testEl = document.createElement(\"div\");\n      return typeof testEl.isContentEditable == \"boolean\" ?\n              function (node) {\n                return node && node.nodeType == 1 && node.isContentEditable;\n              } :\n              function (node) {\n                if (!node || node.nodeType != 1 || node.contentEditable == \"false\") {\n                  return false;\n                }\n                return node.contentEditable == \"true\" || isEditableElement(node.parentNode);\n              };\n    })();\n\n    function isEditingHost(node) {\n      var parent;\n      return node && node.nodeType == 1 &&\n              (((parent = node.parentNode) && parent.nodeType == 9 && parent.designMode == \"on\") ||\n                      (isEditableElement(node) && !isEditableElement(node.parentNode)));\n    }\n\n    function isEditable(node) {\n      return (isEditableElement(node) || (node.nodeType != 1 && isEditableElement(node.parentNode))) && !isEditingHost(node);\n    }\n\n    var inlineDisplayRegex = /^inline(-block|-table)?$/i;\n\n    function isNonInlineElement(node) {\n      return node && node.nodeType == 1 && !inlineDisplayRegex.test(getComputedStyleProperty(node, \"display\"));\n    }\n\n    // White space characters as defined by HTML 4 (http://www.w3.org/TR/html401/struct/text.html)\n    var htmlNonWhiteSpaceRegex = /[^\\r\\n\\t\\f \\u200B]/;\n\n    function isUnrenderedWhiteSpaceNode(node) {\n      if (node.data.length == 0) {\n        return true;\n      }\n      if (htmlNonWhiteSpaceRegex.test(node.data)) {\n        return false;\n      }\n      var cssWhiteSpace = getComputedStyleProperty(node.parentNode, \"whiteSpace\");\n      switch (cssWhiteSpace) {\n        case \"pre\":\n        case \"pre-wrap\":\n        case \"-moz-pre-wrap\":\n          return false;\n        case \"pre-line\":\n          if (/[\\r\\n]/.test(node.data)) {\n            return false;\n          }\n      }\n\n      // We now have a whitespace-only text node that may be rendered depending on its context. If it is adjacent to a\n      // non-inline element, it will not be rendered. This seems to be a good enough definition.\n      return isNonInlineElement(node.previousSibling) || isNonInlineElement(node.nextSibling);\n    }\n\n    function getRangeBoundaries(ranges) {\n      var positions = [], i, range;\n      for (i = 0; range = ranges[i++]; ) {\n        positions.push(\n                new DomPosition(range.startContainer, range.startOffset),\n                new DomPosition(range.endContainer, range.endOffset)\n                );\n      }\n      return positions;\n    }\n\n    function updateRangesFromBoundaries(ranges, positions) {\n      for (var i = 0, range, start, end, len = ranges.length; i < len; ++i) {\n        range = ranges[i];\n        start = positions[i * 2];\n        end = positions[i * 2 + 1];\n        range.setStartAndEnd(start.node, start.offset, end.node, end.offset);\n      }\n    }\n\n    function isSplitPoint(node, offset) {\n      if (dom.isCharacterDataNode(node)) {\n        if (offset == 0) {\n          return !!node.previousSibling;\n        } else if (offset == node.length) {\n          return !!node.nextSibling;\n        } else {\n          return true;\n        }\n      }\n\n      return offset > 0 && offset < node.childNodes.length;\n    }\n\n    function splitNodeAt(node, descendantNode, descendantOffset, positionsToPreserve) {\n      var newNode, parentNode;\n      var splitAtStart = (descendantOffset == 0);\n\n      if (dom.isAncestorOf(descendantNode, node)) {\n        return node;\n      }\n\n      if (dom.isCharacterDataNode(descendantNode)) {\n        var descendantIndex = dom.getNodeIndex(descendantNode);\n        if (descendantOffset === 0) {\n          descendantOffset = descendantIndex;\n        } else if (descendantOffset === descendantNode.length) {\n          descendantOffset = descendantIndex + 1;\n        } else {\n          throw module.createError(\"splitNodeAt() should not be called with offset in the middle of a data node (\" +\n                  descendantOffset + \" in \" + descendantNode.data);\n        }\n        descendantNode = descendantNode.parentNode;\n      }\n\n      if (isSplitPoint(descendantNode, descendantOffset)) {\n        // descendantNode is now guaranteed not to be a text or other character node\n        newNode = descendantNode.cloneNode(false);\n        parentNode = descendantNode.parentNode;\n        if (newNode.id) {\n          newNode.removeAttribute(\"id\");\n        }\n        var child, newChildIndex = 0;\n        while ((child = descendantNode.childNodes[descendantOffset])) {\n          movePreservingPositions(child, newNode, newChildIndex++, positionsToPreserve);\n        }\n        movePreservingPositions(newNode, parentNode, dom.getNodeIndex(descendantNode) + 1, positionsToPreserve);\n        return (descendantNode == node) ? newNode : splitNodeAt(node, parentNode, dom.getNodeIndex(newNode), positionsToPreserve);\n      } else if (node != descendantNode) {\n        newNode = descendantNode.parentNode;\n        //console.log(newNode)\n        // Work out a new split point in the parent node\n        var newNodeIndex = dom.getNodeIndex(descendantNode);\n\n        if (!splitAtStart) {\n          newNodeIndex++;\n        }\n        return splitNodeAt(node, newNode, newNodeIndex, positionsToPreserve);\n      }\n      return node;\n    }\n\n    function areElementsMergeable(el1, el2) {\n      return el1.namespaceURI == el2.namespaceURI &&\n              el1.tagName.toLowerCase() == el2.tagName.toLowerCase() &&\n              haveSameClasses(el1, el2) &&\n              elementsHaveSameNonClassAttributes(el1, el2) &&\n              getComputedStyleProperty(el1, \"display\") == \"inline\" &&\n              getComputedStyleProperty(el2, \"display\") == \"inline\";\n    }\n\n    function createAdjacentMergeableTextNodeGetter(forward) {\n      var siblingPropName = forward ? \"nextSibling\" : \"previousSibling\";\n\n      return function (textNode, checkParentElement) {\n        var el = textNode.parentNode;\n        var adjacentNode = textNode[siblingPropName];\n        if (adjacentNode) {\n          // Can merge if the node's previous/next sibling is a text node\n          if (adjacentNode && adjacentNode.nodeType == 3) {\n            return adjacentNode;\n          }\n        } else if (checkParentElement) {\n          // Compare text node parent element with its sibling\n          adjacentNode = el[siblingPropName];\n          if (adjacentNode && adjacentNode.nodeType == 1 && areElementsMergeable(el, adjacentNode)) {\n            var adjacentNodeChild = adjacentNode[forward ? \"firstChild\" : \"lastChild\"];\n            if (adjacentNodeChild && adjacentNodeChild.nodeType == 3) {\n              return adjacentNodeChild;\n            }\n          }\n        }\n        return null;\n      };\n    }\n\n    var getPreviousMergeableTextNode = createAdjacentMergeableTextNodeGetter(false),\n            getNextMergeableTextNode = createAdjacentMergeableTextNodeGetter(true);\n\n\n    function Merge(firstNode) {\n      this.isElementMerge = (firstNode.nodeType == 1);\n      this.textNodes = [];\n      var firstTextNode = this.isElementMerge ? firstNode.lastChild : firstNode;\n      if (firstTextNode) {\n        this.textNodes[0] = firstTextNode;\n      }\n    }\n\n    Merge.prototype = {\n      doMerge: function (positionsToPreserve) {\n        var textNodes = this.textNodes;\n        var firstTextNode = textNodes[0];\n        if (textNodes.length > 1) {\n          var firstTextNodeIndex = dom.getNodeIndex(firstTextNode);\n          var textParts = [], combinedTextLength = 0, textNode, parent;\n          forEach(textNodes, function (textNode, i) {\n            parent = textNode.parentNode;\n            if (i > 0) {\n              parent.removeChild(textNode);\n              if (!parent.hasChildNodes()) {\n                dom.removeNode(parent);\n              }\n              if (positionsToPreserve) {\n                forEach(positionsToPreserve, function (position) {\n                  // Handle case where position is inside the text node being merged into a preceding node\n                  if (position.node == textNode) {\n                    position.node = firstTextNode;\n                    position.offset += combinedTextLength;\n                  }\n                  // Handle case where both text nodes precede the position within the same parent node\n                  if (position.node == parent && position.offset > firstTextNodeIndex) {\n                    --position.offset;\n                    if (position.offset == firstTextNodeIndex + 1 && i < len - 1) {\n                      position.node = firstTextNode;\n                      position.offset = combinedTextLength;\n                    }\n                  }\n                });\n              }\n            }\n            textParts[i] = textNode.data;\n            combinedTextLength += textNode.data.length;\n          });\n          firstTextNode.data = textParts.join(\"\");\n        }\n        return firstTextNode.data;\n      },\n\n      getLength: function () {\n        var i = this.textNodes.length, len = 0;\n        while (i--) {\n          len += this.textNodes[i].length;\n        }\n        return len;\n      },\n\n      toString: function () {\n        var textParts = [];\n        forEach(this.textNodes, function (textNode, i) {\n          textParts[i] = \"'\" + textNode.data + \"'\";\n        });\n        return \"[Merge(\" + textParts.join(\",\") + \")]\";\n      }\n    };\n\n    var optionProperties = [\"elementTagName\", \"ignoreWhiteSpace\", \"applyToEditableOnly\", \"useExistingElements\",\n      \"removeEmptyElements\", \"onElementCreate\"];\n\n    // TODO: Populate this with every attribute name that corresponds to a property with a different name. Really??\n    var attrNamesForProperties = {};\n\n    function ClassApplier(className, options, tagNames) {\n      var normalize, i, len, propName, applier = this;\n      applier.cssClass = applier.className = className; // cssClass property is for backward compatibility\n\n      var elementPropertiesFromOptions = null, elementAttributes = {};\n\n      // Initialize from options object\n      if (typeof options == \"object\" && options !== null) {\n        if (typeof options.elementTagName !== \"undefined\") {\n          options.elementTagName = options.elementTagName.toLowerCase();\n        }\n        tagNames = options.tagNames;\n        elementPropertiesFromOptions = options.elementProperties;\n        elementAttributes = options.elementAttributes;\n\n        for (i = 0; propName = optionProperties[i++]; ) {\n          if (options.hasOwnProperty(propName)) {\n            applier[propName] = options[propName];\n          }\n        }\n        normalize = options.normalize;\n      } else {\n        normalize = options;\n      }\n\n      // Backward compatibility: the second parameter can also be a Boolean indicating to normalize after unapplying\n      applier.normalize = (typeof normalize == \"undefined\") ? true : normalize;\n\n      // Initialize element properties and attribute exceptions\n      applier.attrExceptions = [];\n      var el = document.createElement(applier.elementTagName);\n      applier.elementProperties = applier.copyPropertiesToElement(elementPropertiesFromOptions, el, true);\n      each(elementAttributes, function (attrName, attrValue) {\n        applier.attrExceptions.push(attrName);\n        // Ensure each attribute value is a string\n        elementAttributes[attrName] = \"\" + attrValue;\n      });\n      applier.elementAttributes = elementAttributes;\n\n      applier.elementSortedClassName = applier.elementProperties.hasOwnProperty(\"className\") ?\n              sortClassName(applier.elementProperties.className + \" \" + className) : className;\n\n      // Initialize tag names\n      applier.applyToAnyTagName = false;\n      var type = typeof tagNames;\n      if (type === \"string\") {\n        if (tagNames === \"*\") {\n          applier.applyToAnyTagName = true;\n        } else {\n          applier.tagNames = trim(tagNames.toLowerCase()).split(/\\s*,\\s*/);\n        }\n      } else if (type === \"object\" && typeof tagNames.length === \"number\") {\n        applier.tagNames = [];\n        for (i = 0, len = tagNames.length; i < len; ++i) {\n          if (tagNames[i] === \"*\") {\n            applier.applyToAnyTagName = true;\n          } else {\n            applier.tagNames.push(tagNames[i].toLowerCase());\n          }\n        }\n      } else {\n        applier.tagNames = [applier.elementTagName];\n      }\n    }\n\n    ClassApplier.prototype = {\n      elementTagName: defaultTagName,\n      elementProperties: {},\n      elementAttributes: {},\n      ignoreWhiteSpace: true,\n      applyToEditableOnly: false,\n      useExistingElements: true,\n      removeEmptyElements: true,\n      onElementCreate: null,\n\n      copyPropertiesToElement: function (props, el, createCopy) {\n        var s, elStyle, elProps = {}, elPropsStyle, propValue, elPropValue, attrName;\n\n        for (var p in props) {\n          if (props.hasOwnProperty(p)) {\n            propValue = props[p];\n            elPropValue = el[p];\n\n            // Special case for class. The copied properties object has the applier's class as well as its own\n            // to simplify checks when removing styling elements\n            if (p === \"className\") {\n              addClass(el, propValue);\n              addClass(el, this.className);\n              el[p] = sortClassName(el[p]);\n              if (createCopy) {\n                elProps[p] = propValue;\n              }\n            }\n\n            // Special case for style\n            else if (p == \"style\") {\n              elStyle = elPropValue;\n              if (createCopy) {\n                elProps[p] = elPropsStyle = {};\n              }\n              for (s in props[p]) {\n                if (props[p].hasOwnProperty(s)) {\n                  elStyle[s] = propValue[s];\n                  if (createCopy) {\n                    elPropsStyle[s] = elStyle[s];\n                  }\n                }\n              }\n              this.attrExceptions.push(p);\n            } else {\n              el[p] = propValue;\n              // Copy the property back from the dummy element so that later comparisons to check whether\n              // elements may be removed are checking against the right value. For example, the href property\n              // of an element returns a fully qualified URL even if it was previously assigned a relative\n              // URL.\n              if (createCopy) {\n                elProps[p] = el[p];\n\n                // Not all properties map to identically-named attributes\n                attrName = attrNamesForProperties.hasOwnProperty(p) ? attrNamesForProperties[p] : p;\n                this.attrExceptions.push(attrName);\n              }\n            }\n          }\n        }\n\n        return createCopy ? elProps : \"\";\n      },\n\n      copyAttributesToElement: function (attrs, el) {\n        for (var attrName in attrs) {\n          if (attrs.hasOwnProperty(attrName) && !/^class(?:Name)?$/i.test(attrName)) {\n            el.setAttribute(attrName, attrs[attrName]);\n          }\n        }\n      },\n\n      appliesToElement: function (el) {\n        return contains(this.tagNames, el.tagName.toLowerCase());\n      },\n\n      getEmptyElements: function (range) {\n        var applier = this;\n        return range.getNodes([1], function (el) {\n          return applier.appliesToElement(el) && !el.hasChildNodes();\n        });\n      },\n\n      hasClass: function (node) {\n        return node.nodeType === 1 &&\n                (this.applyToAnyTagName || this.appliesToElement(node)) &&\n                hasClass(node, this.className);\n      },\n\n      getSelfOrAncestorWithClass: function (node) {\n        while (node) {\n          if (this.hasClass(node)) {\n            return node;\n          }\n          node = node.parentNode;\n        }\n        return null;\n      },\n\n      isModifiable: function (node) {\n        return !this.applyToEditableOnly || isEditable(node);\n      },\n\n      // White space adjacent to an unwrappable node can be ignored for wrapping\n      isIgnorableWhiteSpaceNode: function (node) {\n        return this.ignoreWhiteSpace && node && node.nodeType === 3 && isUnrenderedWhiteSpaceNode(node);\n      },\n\n      // Normalizes nodes after applying a class to a Range.\n      postApply: function (textNodes, range, positionsToPreserve, isUndo) {\n\n\n        var firstNode = textNodes[0], lastNode = textNodes[textNodes.length - 1];\n\n        var merges = [], currentMerge;\n\n        var rangeStartNode = firstNode, rangeEndNode = lastNode;\n        var rangeStartOffset = 0, rangeEndOffset = lastNode.length;\n\n        var textNode, precedingTextNode;\n\n        // Check for every required merge and create a Merge object for each\n        forEach(textNodes, function (textNode) {\n          precedingTextNode = getPreviousMergeableTextNode(textNode, !isUndo);\n          if (precedingTextNode) {\n            if (!currentMerge) {\n              currentMerge = new Merge(precedingTextNode);\n              merges.push(currentMerge);\n            }\n            currentMerge.textNodes.push(textNode);\n            if (textNode === firstNode) {\n              rangeStartNode = currentMerge.textNodes[0];\n              rangeStartOffset = rangeStartNode.length;\n            }\n            if (textNode === lastNode) {\n              rangeEndNode = currentMerge.textNodes[0];\n              rangeEndOffset = currentMerge.getLength();\n            }\n          } else {\n            currentMerge = null;\n          }\n        });\n\n        // Test whether the first node after the range needs merging\n        var nextTextNode = getNextMergeableTextNode(lastNode, !isUndo);\n\n        if (nextTextNode) {\n          if (!currentMerge) {\n            currentMerge = new Merge(lastNode);\n            merges.push(currentMerge);\n          }\n          currentMerge.textNodes.push(nextTextNode);\n        }\n\n        // Apply the merges\n        if (merges.length) {\n          for (let i = 0, len = merges.length; i < len; ++i) {\n            merges[i].doMerge(positionsToPreserve);\n          }\n\n          // Set the range boundaries\n          range.setStartAndEnd(rangeStartNode, rangeStartOffset, rangeEndNode, rangeEndOffset);\n        }\n      },\n\n      createContainer: function (parentNode) {\n        var doc = dom.getDocument(parentNode);\n        var namespace;\n        var el = createElementNSSupported && !dom.isHtmlNamespace(parentNode) && (namespace = parentNode.namespaceURI) ?\n                doc.createElementNS(parentNode.namespaceURI, this.elementTagName) :\n                doc.createElement(this.elementTagName);\n\n        this.copyPropertiesToElement(this.elementProperties, el, false);\n        this.copyAttributesToElement(this.elementAttributes, el);\n        addClass(el, this.className);\n        if (this.onElementCreate) {\n          this.onElementCreate(el, this);\n        }\n        return el;\n      },\n\n      elementHasProperties: function (el, props) {\n        var applier = this;\n        return each(props, function (p, propValue) {\n          if (p === \"className\") {\n            // For checking whether we should reuse an existing element, we just want to check that the element\n            // has all the classes specified in the className property. When deciding whether the element is\n            // removable when unapplying a class, there is separate special handling to check whether the\n            // element has extra classes so the same simple check will do.\n            return hasAllClasses(el, propValue);\n          } else if (typeof propValue === \"object\") {\n            if (!applier.elementHasProperties(el[p], propValue)) {\n              return false;\n            }\n          } else if (el[p] !== propValue) {\n            return false;\n          }\n        });\n      },\n\n      elementHasAttributes: function (el, attrs) {\n        return each(attrs, function (name, value) {\n          if (el.getAttribute(name) !== value) {\n            return false;\n          }\n        });\n      },\n\n      applyToTextNode: function (textNode, positionsToPreserve) {\n\n        // Check whether the text node can be styled. Text within a <style> or <script> element, for example,\n        // should not be styled. See issue 283.\n        if (canTextBeStyled(textNode)) {\n          var parent = textNode.parentNode;\n          if (parent.childNodes.length === 1 &&\n                  this.useExistingElements &&\n                  this.appliesToElement(parent) &&\n                  this.elementHasProperties(parent, this.elementProperties) &&\n                  this.elementHasAttributes(parent, this.elementAttributes)) {\n\n            addClass(parent, this.className);\n          } else {\n            var textNodeParent = textNode.parentNode;\n            var el = this.createContainer(textNodeParent);\n            textNodeParent.insertBefore(el, textNode);\n            el.appendChild(textNode);\n          }\n        }\n\n      },\n\n      isRemovable: function (el) {\n        return el.tagName.toLowerCase() === this.elementTagName &&\n                getSortedClassName(el) === this.elementSortedClassName &&\n                this.elementHasProperties(el, this.elementProperties) &&\n                !elementHasNonClassAttributes(el, this.attrExceptions) &&\n                this.elementHasAttributes(el, this.elementAttributes) &&\n                this.isModifiable(el);\n      },\n\n      isEmptyContainer: function (el) {\n        var childNodeCount = el.childNodes.length;\n        return el.nodeType === 1 &&\n                this.isRemovable(el) &&\n                (childNodeCount === 0 || (childNodeCount === 1 && this.isEmptyContainer(el.firstChild)));\n      },\n\n      removeEmptyContainers: function (range) {\n        var applier = this;\n        var nodesToRemove = range.getNodes([1], function (el) {\n          return applier.isEmptyContainer(el);\n        });\n\n        var rangesToPreserve = [range];\n        var positionsToPreserve = getRangeBoundaries(rangesToPreserve);\n\n        forEach(nodesToRemove, function (node) {\n          removePreservingPositions(node, positionsToPreserve);\n        });\n\n        // Update the range from the preserved boundary positions\n        updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n      },\n\n      undoToTextNode: function (textNode, range, ancestorWithClass, positionsToPreserve) {\n        if (!range.containsNode(ancestorWithClass)) {\n          // Split out the portion of the ancestor from which we can remove the class\n          //var parent = ancestorWithClass.parentNode, index = dom.getNodeIndex(ancestorWithClass);\n          var ancestorRange = range.cloneRange();\n          ancestorRange.selectNode(ancestorWithClass);\n          if (ancestorRange.isPointInRange(range.endContainer, range.endOffset)) {\n            splitNodeAt(ancestorWithClass, range.endContainer, range.endOffset, positionsToPreserve);\n            range.setEndAfter(ancestorWithClass);\n          }\n          if (ancestorRange.isPointInRange(range.startContainer, range.startOffset)) {\n            ancestorWithClass = splitNodeAt(ancestorWithClass, range.startContainer, range.startOffset, positionsToPreserve);\n          }\n        }\n\n        if (this.isRemovable(ancestorWithClass)) {\n          replaceWithOwnChildrenPreservingPositions(ancestorWithClass, positionsToPreserve);\n        } else {\n          removeClass(ancestorWithClass, this.className);\n        }\n      },\n\n      splitAncestorWithClass: function (container, offset, positionsToPreserve) {\n        var ancestorWithClass = this.getSelfOrAncestorWithClass(container);\n        //console.log(ancestorWithClass)\n        if (ancestorWithClass) {\n          splitNodeAt(ancestorWithClass, container, offset, positionsToPreserve);\n        }\n      },\n\n      undoToAncestor: function (ancestorWithClass, positionsToPreserve) {\n        if (this.isRemovable(ancestorWithClass)) {\n          replaceWithOwnChildrenPreservingPositions(ancestorWithClass, positionsToPreserve);\n        } else {\n          removeClass(ancestorWithClass, this.className);\n        }\n      },\n\n      applyToRange: function (range, rangesToPreserve) {\n        var applier = this;\n        rangesToPreserve = rangesToPreserve || [];\n\n        // Create an array of range boundaries to preserve\n        var positionsToPreserve = getRangeBoundaries(rangesToPreserve || []);\n\n        range.splitBoundariesPreservingPositions(positionsToPreserve);\n\n        // Tidy up the DOM by removing empty containers\n        if (applier.removeEmptyElements) {\n          applier.removeEmptyContainers(range);\n        }\n\n        var textNodes = getEffectiveTextNodes(range);\n\n        if (textNodes.length) {\n          forEach(textNodes, function (textNode) {\n            if (!applier.isIgnorableWhiteSpaceNode(textNode) && !applier.getSelfOrAncestorWithClass(textNode) &&\n                    applier.isModifiable(textNode)) {\n              applier.applyToTextNode(textNode, positionsToPreserve);\n            }\n          });\n          var lastTextNode = textNodes[textNodes.length - 1];\n          range.setStartAndEnd(textNodes[0], 0, lastTextNode, lastTextNode.length);\n          if (applier.normalize) {\n            applier.postApply(textNodes, range, positionsToPreserve, false);\n          }\n\n          // Update the ranges from the preserved boundary positions\n          updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n        }\n\n        // Apply classes to any appropriate empty elements\n        var emptyElements = applier.getEmptyElements(range);\n\n        forEach(emptyElements, function (el) {\n          addClass(el, applier.className);\n        });\n      },\n\n      applyToRanges: function (ranges) {\n\n        var i = ranges.length;\n        while (i--) {\n          this.applyToRange(ranges[i], ranges);\n        }\n\n\n        return ranges;\n      },\n\n      applyToSelection: function (win, containerElementId) {\n        let sel = api.getSelection(win)\n        \n        let ranges = sel.getAllRanges()\n        /*\n        if (typeof(containerElementId) === 'string') {\n          // 這邊，要做點什麼\n          console.log(containerElementId)\n          \n          if (!this.doc) {\n            this.doc = win.document\n          }\n          \n          let containerElementCharRange\n          if (containerElementId) {\n            let containerElement = this.doc.getElementById(containerElementId);\n            if (containerElement) {\n              \n              let rangeToCharacterRange = function(range, containerNode) {\n                  return CharacterRange.fromCharacterRange( range.toCharacterRange(containerNode) );\n              }\n              \n              let containerElementRange = api.createRange(containerElement)\n              containerElementRange.selectNodeContents(containerElement);\n              console.log(containerElementRange)\n              \n              var selCharRanges = []\n              ranges.forEach(range => {\n                let scopedRange = containerElementRange.intersection(range)\n                console.log(scopedRange)\n                //scopedRange = rangeToCharacterRange(scopedRange, containerElement)\n                selCharRanges.push( scopedRange );\n              })\n                  \n\n              \n              containerElementRange.selectNodeContents(containerElement);\n              containerElementCharRange = new CharacterRange(0, containerElementRange.toString().length);\n              \n              if (containerElementCharRange) {\n                selCharRanges = selCharRanges.intersection(containerElementCharRange);\n              }\n              \n              console.log(selCharRanges)\n            }\n          }\n\n          \n        }\n        */\n        sel.setRanges(this.applyToRanges(ranges))\n      },\n\n      undoToRange: function (range, rangesToPreserve) {\n        var applier = this;\n        // Create an array of range boundaries to preserve\n        rangesToPreserve = rangesToPreserve || [];\n        var positionsToPreserve = getRangeBoundaries(rangesToPreserve);\n\n\n        range.splitBoundariesPreservingPositions(positionsToPreserve);\n\n        // Tidy up the DOM by removing empty containers\n        if (applier.removeEmptyElements) {\n          applier.removeEmptyContainers(range, positionsToPreserve);\n        }\n\n        var textNodes = getEffectiveTextNodes(range);\n        var textNode, ancestorWithClass;\n        var lastTextNode = textNodes[textNodes.length - 1];\n\n        if (textNodes.length) {\n          applier.splitAncestorWithClass(range.endContainer, range.endOffset, positionsToPreserve);\n          applier.splitAncestorWithClass(range.startContainer, range.startOffset, positionsToPreserve);\n          for (var i = 0, len = textNodes.length; i < len; ++i) {\n            textNode = textNodes[i];\n            ancestorWithClass = applier.getSelfOrAncestorWithClass(textNode);\n            if (ancestorWithClass && applier.isModifiable(textNode)) {\n              applier.undoToAncestor(ancestorWithClass, positionsToPreserve);\n            }\n          }\n          // Ensure the range is still valid\n          range.setStartAndEnd(textNodes[0], 0, lastTextNode, lastTextNode.length);\n\n\n          if (applier.normalize) {\n            applier.postApply(textNodes, range, positionsToPreserve, true);\n          }\n\n          // Update the ranges from the preserved boundary positions\n          updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n        }\n\n        // Remove class from any appropriate empty elements\n        var emptyElements = applier.getEmptyElements(range);\n\n        forEach(emptyElements, function (el) {\n          removeClass(el, applier.className);\n        });\n      },\n\n      undoToRanges: function (ranges) {\n        // Get ranges returned in document order\n        var i = ranges.length;\n\n        while (i--) {\n          this.undoToRange(ranges[i], ranges);\n        }\n\n        return ranges;\n      },\n\n      undoToSelection: function (win) {\n        var sel = api.getSelection(win);\n        var ranges = api.getSelection(win).getAllRanges();\n        this.undoToRanges(ranges);\n        sel.setRanges(ranges);\n      },\n\n      isAppliedToRange: function (range) {\n        if (range.collapsed || range.toString() == \"\") {\n          return !!this.getSelfOrAncestorWithClass(range.commonAncestorContainer);\n        } else {\n          var textNodes = range.getNodes([3]);\n          if (textNodes.length)\n            for (var i = 0, textNode; textNode = textNodes[i++]; ) {\n              if (!this.isIgnorableWhiteSpaceNode(textNode) && rangeSelectsAnyText(range, textNode) &&\n                      this.isModifiable(textNode) && !this.getSelfOrAncestorWithClass(textNode)) {\n                return false;\n              }\n            }\n          return true;\n        }\n      },\n\n      isAppliedToRanges: function (ranges) {\n        var i = ranges.length;\n        if (i === 0) {\n          return false;\n        }\n        while (i--) {\n          if (!this.isAppliedToRange(ranges[i])) {\n            return false;\n          }\n        }\n        return true;\n      },\n\n      isAppliedToSelection: function (win) {\n        var sel = api.getSelection(win);\n        return this.isAppliedToRanges(sel.getAllRanges());\n      },\n\n      toggleRange: function (range) {\n        if (this.isAppliedToRange(range)) {\n          this.undoToRange(range);\n        } else {\n          this.applyToRange(range);\n        }\n      },\n\n      toggleSelection: function (win, containerElementId) {\n        if (this.isAppliedToSelection(win)) {\n          this.undoToSelection(win);\n        } else {\n          this.applyToSelection(win, containerElementId);\n        }\n      },\n\n      getElementsWithClassIntersectingRange: function (range) {\n        var elements = [];\n        var applier = this;\n        range.getNodes([3], function (textNode) {\n          var el = applier.getSelfOrAncestorWithClass(textNode);\n          if (el && !contains(elements, el)) {\n            elements.push(el);\n          }\n        });\n        return elements;\n      },\n\n      detach: function () {}\n    };\n\n    function createClassApplier(className, options, tagNames) {\n      return new ClassApplier(className, options, tagNames);\n    }\n\n    ClassApplier.util = {\n      hasClass: hasClass,\n      addClass: addClass,\n      removeClass: removeClass,\n      getClass: getClass,\n      hasSameClasses: haveSameClasses,\n      hasAllClasses: hasAllClasses,\n      replaceWithOwnChildren: replaceWithOwnChildrenPreservingPositions,\n      elementsHaveSameNonClassAttributes: elementsHaveSameNonClassAttributes,\n      elementHasNonClassAttributes: elementHasNonClassAttributes,\n      splitNodeAt: splitNodeAt,\n      isEditableElement: isEditableElement,\n      isEditingHost: isEditingHost,\n      isEditable: isEditable\n    };\n\n    api.CssClassApplier = api.ClassApplier = ClassApplier;\n    api.createClassApplier = createClassApplier;\n    util.createAliasForDeprecatedMethod(api, \"createCssClassApplier\", \"createClassApplier\", module);\n  });\n  //console.log('rangy-classapplier ok')\n  \n  // --------------------------------------\n  \n  /*\n  function CharacterRange(start, end) {\n    this.start = start;\n    this.end = end;\n  }\n\n  CharacterRange.prototype = {\n    intersects: function (charRange) {\n      return this.start < charRange.end && this.end > charRange.start;\n    },\n\n    isContiguousWith: function (charRange) {\n      return this.start == charRange.end || this.end == charRange.start;\n    },\n\n    union: function (charRange) {\n      return new CharacterRange(Math.min(this.start, charRange.start), Math.max(this.end, charRange.end));\n    },\n\n    intersection: function (charRange) {\n      return new CharacterRange(Math.max(this.start, charRange.start), Math.min(this.end, charRange.end));\n    },\n\n    getComplements: function (charRange) {\n      var ranges = [];\n      if (this.start >= charRange.start) {\n        if (this.end <= charRange.end) {\n          return [];\n        }\n        ranges.push(new CharacterRange(charRange.end, this.end));\n      } else {\n        ranges.push(new CharacterRange(this.start, Math.min(this.end, charRange.start)));\n        if (this.end > charRange.end) {\n          ranges.push(new CharacterRange(charRange.end, this.end));\n        }\n      }\n      return ranges;\n    },\n\n    toString: function () {\n      return \"[CharacterRange(\" + this.start + \", \" + this.end + \")]\";\n    }\n  };\n\n  CharacterRange.fromCharacterRange = function (charRange) {\n    return new CharacterRange(charRange.start, charRange.end);\n  };\n  */\n}","/**\n * Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Copyright 2015, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.1-dev\n * Build date: 20 May 2015\n */\n\n    let OBJECT = \"object\"\n    let FUNCTION = \"function\"\n    let UNDEFINED = \"undefined\";\n\n    // Minimal set of properties required for DOM Level 2 Range compliance. Comparison constants such as START_TO_START\n    // are omitted because ranges in KHTML do not have them but otherwise work perfectly well. See issue 113.\n    var domRangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n        \"commonAncestorContainer\"];\n\n    // Minimal set of methods required for DOM Level 2 Range compliance\n    var domRangeMethods = [\"setStart\", \"setStartBefore\", \"setStartAfter\", \"setEnd\", \"setEndBefore\",\n        \"setEndAfter\", \"collapse\", \"selectNode\", \"selectNodeContents\", \"compareBoundaryPoints\", \"deleteContents\",\n        \"extractContents\", \"cloneContents\", \"insertNode\", \"surroundContents\", \"cloneRange\", \"toString\", \"detach\"];\n\n    var textRangeProperties = [\"boundingHeight\", \"boundingLeft\", \"boundingTop\", \"boundingWidth\", \"htmlText\", \"text\"];\n\n    // Subset of TextRange's full set of methods that we're interested in\n    var textRangeMethods = [\"collapse\", \"compareEndPoints\", \"duplicate\", \"moveToElementText\", \"parentElement\", \"select\",\n        \"setEndPoint\", \"getBoundingClientRect\"];\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Trio of functions taken from Peter Michaux's article:\n    // http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting\n    function isHostMethod(o, p) {\n        var t = typeof o[p];\n        return t == FUNCTION || (!!(t == OBJECT && o[p])) || t == \"unknown\";\n    }\n\n    function isHostObject(o, p) {\n        return !!(typeof o[p] == OBJECT && o[p]);\n    }\n\n    function isHostProperty(o, p) {\n        return typeof o[p] != UNDEFINED;\n    }\n\n    // Creates a convenience function to save verbose repeated calls to tests functions\n    function createMultiplePropertyTest(testFunc) {\n        return function(o, props) {\n            var i = props.length;\n            while (i--) {\n                if (!testFunc(o, props[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    }\n\n    // Next trio of functions are a convenience to save verbose repeated calls to previous two functions\n    var areHostMethods = createMultiplePropertyTest(isHostMethod);\n    var areHostObjects = createMultiplePropertyTest(isHostObject);\n    var areHostProperties = createMultiplePropertyTest(isHostProperty);\n\n    function isTextRange(range) {\n        return range && areHostMethods(range, textRangeMethods) && areHostProperties(range, textRangeProperties);\n    }\n\n    function getBody(doc) {\n        return isHostObject(doc, \"body\") ? doc.body : doc.getElementsByTagName(\"body\")[0];\n    }\n\n    var forEach = [].forEach ?\n        function(arr, func) {\n            arr.forEach(func);\n        } :\n        function(arr, func) {\n            for (var i = 0, len = arr.length; i < len; ++i) {\n                func(arr[i], i);\n            }\n        };\n\n    var modules = {};\n\n    var isBrowser = (typeof window != UNDEFINED && typeof document != UNDEFINED);\n\n    var util = {\n        isHostMethod: isHostMethod,\n        isHostObject: isHostObject,\n        isHostProperty: isHostProperty,\n        areHostMethods: areHostMethods,\n        areHostObjects: areHostObjects,\n        areHostProperties: areHostProperties,\n        isTextRange: isTextRange,\n        getBody: getBody,\n        forEach: forEach\n    };\n\n    var api = {\n        version: \"1.3.1-dev\",\n        initialized: false,\n        isBrowser: isBrowser,\n        supported: true,\n        util: util,\n        features: {},\n        modules: modules,\n        config: {\n            alertOnFail: false,\n            alertOnWarn: false,\n            preferTextRange: false,\n            autoInitialize: (typeof rangyAutoInitialize == UNDEFINED) ? true : rangyAutoInitialize\n        }\n    };\n\n    function consoleLog(msg) {\n        if (typeof console != UNDEFINED && isHostMethod(console, \"log\")) {\n            console.log(msg);\n        }\n    }\n\n    function alertOrLog(msg, shouldAlert) {\n        if (isBrowser && shouldAlert) {\n            alert(msg);\n        } else  {\n            consoleLog(msg);\n        }\n    }\n\n    function fail(reason) {\n        api.initialized = true;\n        api.supported = false;\n        alertOrLog(\"Rangy is not supported in this environment. Reason: \" + reason, api.config.alertOnFail);\n    }\n\n    api.fail = fail;\n\n    function warn(msg) {\n        alertOrLog(\"Rangy warning: \" + msg, api.config.alertOnWarn);\n    }\n\n    api.warn = warn;\n\n    // Add utility extend() method\n    var extend;\n    if ({}.hasOwnProperty) {\n        util.extend = extend = function(obj, props, deep) {\n            var o, p;\n            for (var i in props) {\n                if (props.hasOwnProperty(i)) {\n                    o = obj[i];\n                    p = props[i];\n                    if (deep && o !== null && typeof o == \"object\" && p !== null && typeof p == \"object\") {\n                        extend(o, p, true);\n                    }\n                    obj[i] = p;\n                }\n            }\n            // Special case for toString, which does not show up in for...in loops in IE <= 8\n            if (props.hasOwnProperty(\"toString\")) {\n                obj.toString = props.toString;\n            }\n            return obj;\n        };\n\n        util.createOptions = function(optionsParam, defaults) {\n            var options = {};\n            extend(options, defaults);\n            if (optionsParam) {\n                extend(options, optionsParam);\n            }\n            return options;\n        };\n    } else {\n        fail(\"hasOwnProperty not supported\");\n    }\n\n    // Test whether we're in a browser and bail out if not\n    if (!isBrowser) {\n        fail(\"Rangy can only run in a browser\");\n    }\n\n    // Test whether Array.prototype.slice can be relied on for NodeLists and use an alternative toArray() if not\n    (function() {\n        var toArray;\n\n        if (isBrowser) {\n            var el = document.createElement(\"div\");\n            el.appendChild(document.createElement(\"span\"));\n            var slice = [].slice;\n            try {\n                if (slice.call(el.childNodes, 0)[0].nodeType == 1) {\n                    toArray = function(arrayLike) {\n                        return slice.call(arrayLike, 0);\n                    };\n                }\n            } catch (e) {}\n        }\n\n        if (!toArray) {\n            toArray = function(arrayLike) {\n                var arr = [];\n                for (var i = 0, len = arrayLike.length; i < len; ++i) {\n                    arr[i] = arrayLike[i];\n                }\n                return arr;\n            };\n        }\n\n        util.toArray = toArray;\n    })();\n\n    // Very simple event handler wrapper function that doesn't attempt to solve issues such as \"this\" handling or\n    // normalization of event properties\n    var addListener;\n    if (isBrowser) {\n        if (isHostMethod(document, \"addEventListener\")) {\n            addListener = function(obj, eventType, listener) {\n                obj.addEventListener(eventType, listener, false);\n            };\n        } else if (isHostMethod(document, \"attachEvent\")) {\n            addListener = function(obj, eventType, listener) {\n                obj.attachEvent(\"on\" + eventType, listener);\n            };\n        } else {\n            fail(\"Document does not have required addEventListener or attachEvent method\");\n        }\n\n        util.addListener = addListener;\n    }\n\n    var initListeners = [];\n\n    function getErrorDesc(ex) {\n        return ex.message || ex.description || String(ex);\n    }\n\n    // Initialization\n    function init() {\n        if (!isBrowser || api.initialized) {\n            return;\n        }\n        var testRange;\n        var implementsDomRange = false, implementsTextRange = false;\n\n        // First, perform basic feature tests\n\n        if (isHostMethod(document, \"createRange\")) {\n            testRange = document.createRange();\n            if (areHostMethods(testRange, domRangeMethods) && areHostProperties(testRange, domRangeProperties)) {\n                implementsDomRange = true;\n            }\n        }\n\n        var body = getBody(document);\n        if (!body || body.nodeName.toLowerCase() != \"body\") {\n            fail(\"No body element found\");\n            return;\n        }\n\n        if (body && isHostMethod(body, \"createTextRange\")) {\n            testRange = body.createTextRange();\n            if (isTextRange(testRange)) {\n                implementsTextRange = true;\n            }\n        }\n\n        if (!implementsDomRange && !implementsTextRange) {\n            fail(\"Neither Range nor TextRange are available\");\n            return;\n        }\n\n        api.initialized = true;\n        api.features = {\n            implementsDomRange: implementsDomRange,\n            implementsTextRange: implementsTextRange\n        };\n\n        // Initialize modules\n        var module, errorMessage;\n        for (var moduleName in modules) {\n            if ( (module = modules[moduleName]) instanceof Module ) {\n                module.init(module, api);\n            }\n        }\n\n        // Call init listeners\n        for (var i = 0, len = initListeners.length; i < len; ++i) {\n            try {\n                initListeners[i](api);\n            } catch (ex) {\n                errorMessage = \"Rangy init listener threw an exception. Continuing. Detail: \" + getErrorDesc(ex);\n                consoleLog(errorMessage);\n            }\n        }\n    }\n\n    function deprecationNotice(deprecated, replacement, module) {\n        if (module) {\n            deprecated += \" in module \" + module.name;\n        }\n        api.warn(\"DEPRECATED: \" + deprecated + \" is deprecated. Please use \" +\n        replacement + \" instead.\");\n    }\n\n    function createAliasForDeprecatedMethod(owner, deprecated, replacement, module) {\n        owner[deprecated] = function() {\n            deprecationNotice(deprecated, replacement, module);\n            return owner[replacement].apply(owner, util.toArray(arguments));\n        };\n    }\n\n    util.deprecationNotice = deprecationNotice;\n    util.createAliasForDeprecatedMethod = createAliasForDeprecatedMethod;\n\n    // Allow external scripts to initialize this library in case it's loaded after the document has loaded\n    api.init = init;\n\n    // Execute listener immediately if already initialized\n    api.addInitListener = function(listener) {\n        if (api.initialized) {\n            listener(api);\n        } else {\n            initListeners.push(listener);\n        }\n    };\n\n    var shimListeners = [];\n\n    api.addShimListener = function(listener) {\n        shimListeners.push(listener);\n    };\n\n    function shim(win) {\n        win = win || window;\n        init();\n\n        // Notify listeners\n        for (var i = 0, len = shimListeners.length; i < len; ++i) {\n            shimListeners[i](win);\n        }\n    }\n\n    if (isBrowser) {\n        api.shim = api.createMissingNativeApi = shim;\n        createAliasForDeprecatedMethod(api, \"createMissingNativeApi\", \"shim\");\n    }\n\n    function Module(name, dependencies, initializer) {\n        this.name = name;\n        this.dependencies = dependencies;\n        this.initialized = false;\n        this.supported = false;\n        this.initializer = initializer;\n    }\n\n    Module.prototype = {\n        init: function() {\n            var requiredModuleNames = this.dependencies || [];\n            for (var i = 0, len = requiredModuleNames.length, requiredModule, moduleName; i < len; ++i) {\n                moduleName = requiredModuleNames[i];\n\n                requiredModule = modules[moduleName];\n                if (!requiredModule || !(requiredModule instanceof Module)) {\n                    throw new Error(\"required module '\" + moduleName + \"' not found\");\n                }\n\n                requiredModule.init();\n\n                if (!requiredModule.supported) {\n                    throw new Error(\"required module '\" + moduleName + \"' not supported\");\n                }\n            }\n\n            // Now run initializer\n            this.initializer(this);\n        },\n\n        fail: function(reason) {\n            this.initialized = true;\n            this.supported = false;\n            throw new Error(reason);\n        },\n\n        warn: function(msg) {\n            api.warn(\"Module \" + this.name + \": \" + msg);\n        },\n\n        deprecationNotice: function(deprecated, replacement) {\n            api.warn(\"DEPRECATED: \" + deprecated + \" in module \" + this.name + \" is deprecated. Please use \" +\n                replacement + \" instead\");\n        },\n\n        createError: function(msg) {\n            return new Error(\"Error in Rangy \" + this.name + \" module: \" + msg);\n        }\n    };\n\n    function createModule(name, dependencies, initFunc) {\n        var newModule = new Module(name, dependencies, function(module) {\n            if (!module.initialized) {\n                module.initialized = true;\n                try {\n                    initFunc(api, module);\n                    module.supported = true;\n                } catch (ex) {\n                    var errorMessage = \"Module '\" + name + \"' failed to load: \" + getErrorDesc(ex);\n                    consoleLog(errorMessage);\n                    if (ex.stack) {\n                        consoleLog(ex.stack);\n                    }\n                }\n            }\n        });\n        modules[name] = newModule;\n        return newModule;\n    }\n\n    api.createModule = function(name) {\n        // Allow 2 or 3 arguments (second argument is an optional array of dependencies)\n        var initFunc, dependencies;\n        if (arguments.length == 2) {\n            initFunc = arguments[1];\n            dependencies = [];\n        } else {\n            initFunc = arguments[2];\n            dependencies = arguments[1];\n        }\n\n        var module = createModule(name, dependencies, initFunc);\n\n        // Initialize the module immediately if the core is already initialized\n        if (api.initialized && api.supported) {\n            module.init();\n        }\n    };\n\n    api.createCoreModule = function(name, dependencies, initFunc) {\n        createModule(name, dependencies, initFunc);\n    };\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Ensure rangy.rangePrototype and rangy.selectionPrototype are available immediately\n\n    function RangePrototype() {}\n    api.RangePrototype = RangePrototype;\n    api.rangePrototype = new RangePrototype();\n\n    function SelectionPrototype() {}\n    api.selectionPrototype = new SelectionPrototype();\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // DOM utility methods used by Rangy\n    api.createCoreModule(\"DomUtil\", [], function(api, module) {\n        var UNDEF = \"undefined\";\n        var util = api.util;\n        var getBody = util.getBody;\n\n        // Perform feature tests\n        if (!util.areHostMethods(document, [\"createDocumentFragment\", \"createElement\", \"createTextNode\"])) {\n            module.fail(\"document missing a Node creation method\");\n        }\n\n        if (!util.isHostMethod(document, \"getElementsByTagName\")) {\n            module.fail(\"document missing getElementsByTagName method\");\n        }\n\n        var el = document.createElement(\"div\");\n        if (!util.areHostMethods(el, [\"insertBefore\", \"appendChild\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]))) {\n            module.fail(\"Incomplete Element implementation\");\n        }\n\n        // innerHTML is required for Range's createContextualFragment method\n        if (!util.isHostProperty(el, \"innerHTML\")) {\n            module.fail(\"Element is missing innerHTML property\");\n        }\n\n        var textNode = document.createTextNode(\"test\");\n        if (!util.areHostMethods(textNode, [\"splitText\", \"deleteData\", \"insertData\", \"appendData\", \"cloneNode\"] ||\n                !util.areHostObjects(el, [\"previousSibling\", \"nextSibling\", \"childNodes\", \"parentNode\"]) ||\n                !util.areHostProperties(textNode, [\"data\"]))) {\n            module.fail(\"Incomplete Text Node implementation\");\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Removed use of indexOf because of a bizarre bug in Opera that is thrown in one of the Acid3 tests. I haven't been\n        // able to replicate it outside of the test. The bug is that indexOf returns -1 when called on an Array that\n        // contains just the document as a single element and the value searched for is the document.\n        var arrayContains = /*Array.prototype.indexOf ?\n            function(arr, val) {\n                return arr.indexOf(val) > -1;\n            }:*/\n\n            function(arr, val) {\n                var i = arr.length;\n                while (i--) {\n                    if (arr[i] === val) {\n                        return true;\n                    }\n                }\n                return false;\n            };\n\n        // Opera 11 puts HTML elements in the null namespace, it seems, and IE 7 has undefined namespaceURI\n        function isHtmlNamespace(node) {\n            var ns;\n            return typeof node.namespaceURI == UNDEF || ((ns = node.namespaceURI) === null || ns == \"http://www.w3.org/1999/xhtml\");\n        }\n\n        function parentElement(node) {\n            var parent = node.parentNode;\n            return (parent.nodeType == 1) ? parent : null;\n        }\n\n        function getNodeIndex(node) {\n            var i = 0;\n            while( (node = node.previousSibling) ) {\n                ++i;\n            }\n            return i;\n        }\n\n        function getNodeLength(node) {\n            switch (node.nodeType) {\n                case 7:\n                case 10:\n                    return 0;\n                case 3:\n                case 8:\n                    return node.length;\n                default:\n                    return node.childNodes.length;\n            }\n        }\n\n        function getCommonAncestor(node1, node2) {\n            var ancestors = [], n;\n            for (n = node1; n; n = n.parentNode) {\n                ancestors.push(n);\n            }\n\n            for (n = node2; n; n = n.parentNode) {\n                if (arrayContains(ancestors, n)) {\n                    return n;\n                }\n            }\n\n            return null;\n        }\n\n        function isAncestorOf(ancestor, descendant, selfIsAncestor) {\n            var n = selfIsAncestor ? descendant : descendant.parentNode;\n            while (n) {\n                if (n === ancestor) {\n                    return true;\n                } else {\n                    n = n.parentNode;\n                }\n            }\n            return false;\n        }\n\n        function isOrIsAncestorOf(ancestor, descendant) {\n            return isAncestorOf(ancestor, descendant, true);\n        }\n\n        function getClosestAncestorIn(node, ancestor, selfIsAncestor) {\n            var p, n = selfIsAncestor ? node : node.parentNode;\n            while (n) {\n                p = n.parentNode;\n                if (p === ancestor) {\n                    return n;\n                }\n                n = p;\n            }\n            return null;\n        }\n\n        function isCharacterDataNode(node) {\n            var t = node.nodeType;\n            return t == 3 || t == 4 || t == 8 ; // Text, CDataSection or Comment\n        }\n\n        function isTextOrCommentNode(node) {\n            if (!node) {\n                return false;\n            }\n            var t = node.nodeType;\n            return t == 3 || t == 8 ; // Text or Comment\n        }\n\n        function insertAfter(node, precedingNode) {\n            var nextNode = precedingNode.nextSibling, parent = precedingNode.parentNode;\n            if (nextNode) {\n                parent.insertBefore(node, nextNode);\n            } else {\n                parent.appendChild(node);\n            }\n            return node;\n        }\n\n        // Note that we cannot use splitText() because it is bugridden in IE 9.\n        function splitDataNode(node, index, positionsToPreserve) {\n            var newNode = node.cloneNode(false);\n            newNode.deleteData(0, index);\n            node.deleteData(index, node.length - index);\n            insertAfter(newNode, node);\n\n            // Preserve positions\n            if (positionsToPreserve) {\n                for (var i = 0, position; position = positionsToPreserve[i++]; ) {\n                    // Handle case where position was inside the portion of node after the split point\n                    if (position.node == node && position.offset > index) {\n                        position.node = newNode;\n                        position.offset -= index;\n                    }\n                    // Handle the case where the position is a node offset within node's parent\n                    else if (position.node == node.parentNode && position.offset > getNodeIndex(node)) {\n                        ++position.offset;\n                    }\n                }\n            }\n            return newNode;\n        }\n\n        function getDocument(node) {\n            if (node.nodeType == 9) {\n                return node;\n            } else if (typeof node.ownerDocument != UNDEF) {\n                return node.ownerDocument;\n            } else if (typeof node.document != UNDEF) {\n                return node.document;\n            } else if (node.parentNode) {\n                return getDocument(node.parentNode);\n            } else {\n                throw module.createError(\"getDocument: no document found for node\");\n            }\n        }\n\n        function getWindow(node) {\n            var doc = getDocument(node);\n            if (typeof doc.defaultView != UNDEF) {\n                return doc.defaultView;\n            } else if (typeof doc.parentWindow != UNDEF) {\n                return doc.parentWindow;\n            } else {\n                throw module.createError(\"Cannot get a window object for node\");\n            }\n        }\n\n        function getIframeDocument(iframeEl) {\n            if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument;\n            } else if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow.document;\n            } else {\n                throw module.createError(\"getIframeDocument: No Document object found for iframe element\");\n            }\n        }\n\n        function getIframeWindow(iframeEl) {\n            if (typeof iframeEl.contentWindow != UNDEF) {\n                return iframeEl.contentWindow;\n            } else if (typeof iframeEl.contentDocument != UNDEF) {\n                return iframeEl.contentDocument.defaultView;\n            } else {\n                throw module.createError(\"getIframeWindow: No Window object found for iframe element\");\n            }\n        }\n\n        // This looks bad. Is it worth it?\n        function isWindow(obj) {\n            return obj && util.isHostMethod(obj, \"setTimeout\") && util.isHostObject(obj, \"document\");\n        }\n\n        function getContentDocument(obj, module, methodName) {\n            var doc;\n\n            if (!obj) {\n                doc = document;\n            }\n\n            // Test if a DOM node has been passed and obtain a document object for it if so\n            else if (util.isHostProperty(obj, \"nodeType\")) {\n                doc = (obj.nodeType == 1 && obj.tagName.toLowerCase() == \"iframe\") ?\n                    getIframeDocument(obj) : getDocument(obj);\n            }\n\n            // Test if the doc parameter appears to be a Window object\n            else if (isWindow(obj)) {\n                doc = obj.document;\n            }\n\n            if (!doc) {\n                throw module.createError(methodName + \"(): Parameter must be a Window object or DOM node\");\n            }\n\n            return doc;\n        }\n\n        function getRootContainer(node) {\n            var parent;\n            while ( (parent = node.parentNode) ) {\n                node = parent;\n            }\n            return node;\n        }\n\n        function comparePoints(nodeA, offsetA, nodeB, offsetB) {\n            // See http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Comparing\n            var nodeC, root, childA, childB, n;\n            if (nodeA == nodeB) {\n                // Case 1: nodes are the same\n                return offsetA === offsetB ? 0 : (offsetA < offsetB) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeB, nodeA, true)) ) {\n                // Case 2: node C (container B or an ancestor) is a child node of A\n                return offsetA <= getNodeIndex(nodeC) ? -1 : 1;\n            } else if ( (nodeC = getClosestAncestorIn(nodeA, nodeB, true)) ) {\n                // Case 3: node C (container A or an ancestor) is a child node of B\n                return getNodeIndex(nodeC) < offsetB  ? -1 : 1;\n            } else {\n                root = getCommonAncestor(nodeA, nodeB);\n                if (!root) {\n                    throw new Error(\"comparePoints error: nodes have no common ancestor\");\n                }\n\n                // Case 4: containers are siblings or descendants of siblings\n                childA = (nodeA === root) ? root : getClosestAncestorIn(nodeA, root, true);\n                childB = (nodeB === root) ? root : getClosestAncestorIn(nodeB, root, true);\n\n                if (childA === childB) {\n                    // This shouldn't be possible\n                    throw module.createError(\"comparePoints got to case 4 and childA and childB are the same!\");\n                } else {\n                    n = root.firstChild;\n                    while (n) {\n                        if (n === childA) {\n                            return -1;\n                        } else if (n === childB) {\n                            return 1;\n                        }\n                        n = n.nextSibling;\n                    }\n                }\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test for IE's crash (IE 6/7) or exception (IE >= 8) when a reference to garbage-collected text node is queried\n        var crashyTextNodes = false;\n\n        function isBrokenNode(node) {\n            var n;\n            try {\n                n = node.parentNode;\n                return false;\n            } catch (e) {\n                return true;\n            }\n        }\n\n        (function() {\n            var el = document.createElement(\"b\");\n            el.innerHTML = \"1\";\n            var textNode = el.firstChild;\n            el.innerHTML = \"<br />\";\n            crashyTextNodes = isBrokenNode(textNode);\n\n            api.features.crashyTextNodes = crashyTextNodes;\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function inspectNode(node) {\n            if (!node) {\n                return \"[No node]\";\n            }\n            if (crashyTextNodes && isBrokenNode(node)) {\n                return \"[Broken node]\";\n            }\n            if (isCharacterDataNode(node)) {\n                return '\"' + node.data + '\"';\n            }\n            if (node.nodeType == 1) {\n                var idAttr = node.id ? ' id=\"' + node.id + '\"' : \"\";\n                return \"<\" + node.nodeName + idAttr + \">[index:\" + getNodeIndex(node) + \",length:\" + node.childNodes.length + \"][\" + (node.innerHTML || \"[innerHTML not supported]\").slice(0, 25) + \"]\";\n            }\n            return node.nodeName;\n        }\n\n        function fragmentFromNodeChildren(node) {\n            var fragment = getDocument(node).createDocumentFragment(), child;\n            while ( (child = node.firstChild) ) {\n                fragment.appendChild(child);\n            }\n            return fragment;\n        }\n\n        var getComputedStyleProperty;\n        if (typeof window.getComputedStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return getWindow(el).getComputedStyle(el, null)[propName];\n            };\n        } else if (typeof document.documentElement.currentStyle != UNDEF) {\n            getComputedStyleProperty = function(el, propName) {\n                return el.currentStyle ? el.currentStyle[propName] : \"\";\n            };\n        } else {\n            module.fail(\"No means of obtaining computed style properties found\");\n        }\n\n        function createTestElement(doc, html, contentEditable) {\n            var body = getBody(doc);\n            var el = doc.createElement(\"div\");\n            el.contentEditable = \"\" + !!contentEditable;\n            if (html) {\n                el.innerHTML = html;\n            }\n\n            // Insert the test element at the start of the body to prevent scrolling to the bottom in iOS (issue #292)\n            var bodyFirstChild = body.firstChild;\n            if (bodyFirstChild) {\n                body.insertBefore(el, bodyFirstChild);\n            } else {\n                body.appendChild(el);\n            }\n\n            return el;\n        }\n\n        function removeNode(node) {\n            return node.parentNode.removeChild(node);\n        }\n\n        function NodeIterator(root) {\n            this.root = root;\n            this._next = root;\n        }\n\n        NodeIterator.prototype = {\n            _current: null,\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                var n = this._current = this._next;\n                var child, next;\n                if (this._current) {\n                    child = n.firstChild;\n                    if (child) {\n                        this._next = child;\n                    } else {\n                        next = null;\n                        while ((n !== this.root) && !(next = n.nextSibling)) {\n                            n = n.parentNode;\n                        }\n                        this._next = next;\n                    }\n                }\n                return this._current;\n            },\n\n            detach: function() {\n                this._current = this._next = this.root = null;\n            }\n        };\n\n        function createIterator(root) {\n            return new NodeIterator(root);\n        }\n\n        function DomPosition(node, offset) {\n            this.node = node;\n            this.offset = offset;\n        }\n\n        DomPosition.prototype = {\n            equals: function(pos) {\n                return !!pos && this.node === pos.node && this.offset == pos.offset;\n            },\n\n            inspect: function() {\n                return \"[DomPosition(\" + inspectNode(this.node) + \":\" + this.offset + \")]\";\n            },\n\n            toString: function() {\n                return this.inspect();\n            }\n        };\n\n        function DOMException(codeName) {\n            this.code = this[codeName];\n            this.codeName = codeName;\n            this.message = \"DOMException: \" + this.codeName;\n        }\n\n        DOMException.prototype = {\n            INDEX_SIZE_ERR: 1,\n            HIERARCHY_REQUEST_ERR: 3,\n            WRONG_DOCUMENT_ERR: 4,\n            NO_MODIFICATION_ALLOWED_ERR: 7,\n            NOT_FOUND_ERR: 8,\n            NOT_SUPPORTED_ERR: 9,\n            INVALID_STATE_ERR: 11,\n            INVALID_NODE_TYPE_ERR: 24\n        };\n\n        DOMException.prototype.toString = function() {\n            return this.message;\n        };\n\n        api.dom = {\n            arrayContains: arrayContains,\n            isHtmlNamespace: isHtmlNamespace,\n            parentElement: parentElement,\n            getNodeIndex: getNodeIndex,\n            getNodeLength: getNodeLength,\n            getCommonAncestor: getCommonAncestor,\n            isAncestorOf: isAncestorOf,\n            isOrIsAncestorOf: isOrIsAncestorOf,\n            getClosestAncestorIn: getClosestAncestorIn,\n            isCharacterDataNode: isCharacterDataNode,\n            isTextOrCommentNode: isTextOrCommentNode,\n            insertAfter: insertAfter,\n            splitDataNode: splitDataNode,\n            getDocument: getDocument,\n            getWindow: getWindow,\n            getIframeWindow: getIframeWindow,\n            getIframeDocument: getIframeDocument,\n            getBody: getBody,\n            isWindow: isWindow,\n            getContentDocument: getContentDocument,\n            getRootContainer: getRootContainer,\n            comparePoints: comparePoints,\n            isBrokenNode: isBrokenNode,\n            inspectNode: inspectNode,\n            getComputedStyleProperty: getComputedStyleProperty,\n            createTestElement: createTestElement,\n            removeNode: removeNode,\n            fragmentFromNodeChildren: fragmentFromNodeChildren,\n            createIterator: createIterator,\n            DomPosition: DomPosition\n        };\n\n        api.DOMException = DOMException;\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Pure JavaScript implementation of DOM Range\n    api.createCoreModule(\"DomRange\", [\"DomUtil\"], function(api, module) {\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DOMException = api.DOMException;\n\n        var isCharacterDataNode = dom.isCharacterDataNode;\n        var getNodeIndex = dom.getNodeIndex;\n        var isOrIsAncestorOf = dom.isOrIsAncestorOf;\n        var getDocument = dom.getDocument;\n        var comparePoints = dom.comparePoints;\n        var splitDataNode = dom.splitDataNode;\n        var getClosestAncestorIn = dom.getClosestAncestorIn;\n        var getNodeLength = dom.getNodeLength;\n        var arrayContains = dom.arrayContains;\n        var getRootContainer = dom.getRootContainer;\n        var crashyTextNodes = api.features.crashyTextNodes;\n\n        var removeNode = dom.removeNode;\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Utility functions\n\n        function isNonTextPartiallySelected(node, range) {\n            return (node.nodeType != 3) &&\n                   (isOrIsAncestorOf(node, range.startContainer) || isOrIsAncestorOf(node, range.endContainer));\n        }\n\n        function getRangeDocument(range) {\n            return range.document || getDocument(range.startContainer);\n        }\n\n        function getRangeRoot(range) {\n            return getRootContainer(range.startContainer);\n        }\n\n        function getBoundaryBeforeNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node));\n        }\n\n        function getBoundaryAfterNode(node) {\n            return new DomPosition(node.parentNode, getNodeIndex(node) + 1);\n        }\n\n        function insertNodeAtPosition(node, n, o) {\n            var firstNodeInserted = node.nodeType == 11 ? node.firstChild : node;\n            if (isCharacterDataNode(n)) {\n                if (o == n.length) {\n                    dom.insertAfter(node, n);\n                } else {\n                    n.parentNode.insertBefore(node, o == 0 ? n : splitDataNode(n, o));\n                }\n            } else if (o >= n.childNodes.length) {\n                n.appendChild(node);\n            } else {\n                n.insertBefore(node, n.childNodes[o]);\n            }\n            return firstNodeInserted;\n        }\n\n        function rangesIntersect(rangeA, rangeB, touchingIsIntersecting) {\n            assertRangeValid(rangeA);\n            assertRangeValid(rangeB);\n\n            if (getRangeDocument(rangeB) != getRangeDocument(rangeA)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n\n            var startComparison = comparePoints(rangeA.startContainer, rangeA.startOffset, rangeB.endContainer, rangeB.endOffset),\n                endComparison = comparePoints(rangeA.endContainer, rangeA.endOffset, rangeB.startContainer, rangeB.startOffset);\n\n            return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n        }\n\n        function cloneSubtree(iterator) {\n            var partiallySelected;\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n                partiallySelected = iterator.isPartiallySelectedSubtree();\n                node = node.cloneNode(!partiallySelected);\n                if (partiallySelected) {\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(cloneSubtree(subIterator));\n                    subIterator.detach();\n                }\n\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function iterateSubtree(rangeIterator, func, iteratorState) {\n            var it, n;\n            iteratorState = iteratorState || { stop: false };\n            for (var node, subRangeIterator; node = rangeIterator.next(); ) {\n                if (rangeIterator.isPartiallySelectedSubtree()) {\n                    if (func(node) === false) {\n                        iteratorState.stop = true;\n                        return;\n                    } else {\n                        // The node is partially selected by the Range, so we can use a new RangeIterator on the portion of\n                        // the node selected by the Range.\n                        subRangeIterator = rangeIterator.getSubtreeIterator();\n                        iterateSubtree(subRangeIterator, func, iteratorState);\n                        subRangeIterator.detach();\n                        if (iteratorState.stop) {\n                            return;\n                        }\n                    }\n                } else {\n                    // The whole node is selected, so we can use efficient DOM iteration to iterate over the node and its\n                    // descendants\n                    it = dom.createIterator(node);\n                    while ( (n = it.next()) ) {\n                        if (func(n) === false) {\n                            iteratorState.stop = true;\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n\n        function deleteSubtree(iterator) {\n            var subIterator;\n            while (iterator.next()) {\n                if (iterator.isPartiallySelectedSubtree()) {\n                    subIterator = iterator.getSubtreeIterator();\n                    deleteSubtree(subIterator);\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n            }\n        }\n\n        function extractSubtree(iterator) {\n            for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next(); ) {\n\n                if (iterator.isPartiallySelectedSubtree()) {\n                    node = node.cloneNode(false);\n                    subIterator = iterator.getSubtreeIterator();\n                    node.appendChild(extractSubtree(subIterator));\n                    subIterator.detach();\n                } else {\n                    iterator.remove();\n                }\n                if (node.nodeType == 10) { // DocumentType\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n                frag.appendChild(node);\n            }\n            return frag;\n        }\n\n        function getNodesInRange(range, nodeTypes, filter) {\n            var filterNodeTypes = !!(nodeTypes && nodeTypes.length), regex;\n            var filterExists = !!filter;\n            if (filterNodeTypes) {\n                regex = new RegExp(\"^(\" + nodeTypes.join(\"|\") + \")$\");\n            }\n\n            var nodes = [];\n            iterateSubtree(new RangeIterator(range, false), function(node) {\n                if (filterNodeTypes && !regex.test(node.nodeType)) {\n                    return;\n                }\n                if (filterExists && !filter(node)) {\n                    return;\n                }\n                // Don't include a boundary container if it is a character data node and the range does not contain any\n                // of its character data. See issue 190.\n                var sc = range.startContainer;\n                if (node == sc && isCharacterDataNode(sc) && range.startOffset == sc.length) {\n                    return;\n                }\n\n                var ec = range.endContainer;\n                if (node == ec && isCharacterDataNode(ec) && range.endOffset == 0) {\n                    return;\n                }\n\n                nodes.push(node);\n            });\n            return nodes;\n        }\n\n        function inspect(range) {\n            var name = (typeof range.getName == \"undefined\") ? \"Range\" : range.getName();\n            return \"[\" + name + \"(\" + dom.inspectNode(range.startContainer) + \":\" + range.startOffset + \", \" +\n                    dom.inspectNode(range.endContainer) + \":\" + range.endOffset + \")]\";\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // RangeIterator code partially borrows from IERange by Tim Ryan (http://github.com/timcameronryan/IERange)\n\n        function RangeIterator(range, clonePartiallySelectedTextNodes) {\n            this.range = range;\n            this.clonePartiallySelectedTextNodes = clonePartiallySelectedTextNodes;\n\n\n            if (!range.collapsed) {\n                this.sc = range.startContainer;\n                this.so = range.startOffset;\n                this.ec = range.endContainer;\n                this.eo = range.endOffset;\n                var root = range.commonAncestorContainer;\n\n                if (this.sc === this.ec && isCharacterDataNode(this.sc)) {\n                    this.isSingleCharacterDataNode = true;\n                    this._first = this._last = this._next = this.sc;\n                } else {\n                    this._first = this._next = (this.sc === root && !isCharacterDataNode(this.sc)) ?\n                        this.sc.childNodes[this.so] : getClosestAncestorIn(this.sc, root, true);\n                    this._last = (this.ec === root && !isCharacterDataNode(this.ec)) ?\n                        this.ec.childNodes[this.eo - 1] : getClosestAncestorIn(this.ec, root, true);\n                }\n            }\n        }\n\n        RangeIterator.prototype = {\n            _current: null,\n            _next: null,\n            _first: null,\n            _last: null,\n            isSingleCharacterDataNode: false,\n\n            reset: function() {\n                this._current = null;\n                this._next = this._first;\n            },\n\n            hasNext: function() {\n                return !!this._next;\n            },\n\n            next: function() {\n                // Move to next node\n                var current = this._current = this._next;\n                if (current) {\n                    this._next = (current !== this._last) ? current.nextSibling : null;\n\n                    // Check for partially selected text nodes\n                    if (isCharacterDataNode(current) && this.clonePartiallySelectedTextNodes) {\n                        if (current === this.ec) {\n                            (current = current.cloneNode(true)).deleteData(this.eo, current.length - this.eo);\n                        }\n                        if (this._current === this.sc) {\n                            (current = current.cloneNode(true)).deleteData(0, this.so);\n                        }\n                    }\n                }\n\n                return current;\n            },\n\n            remove: function() {\n                var current = this._current, start, end;\n\n                if (isCharacterDataNode(current) && (current === this.sc || current === this.ec)) {\n                    start = (current === this.sc) ? this.so : 0;\n                    end = (current === this.ec) ? this.eo : current.length;\n                    if (start != end) {\n                        current.deleteData(start, end - start);\n                    }\n                } else {\n                    if (current.parentNode) {\n                        removeNode(current);\n                    } else {\n                    }\n                }\n            },\n\n            // Checks if the current node is partially selected\n            isPartiallySelectedSubtree: function() {\n                var current = this._current;\n                return isNonTextPartiallySelected(current, this.range);\n            },\n\n            getSubtreeIterator: function() {\n                var subRange;\n                if (this.isSingleCharacterDataNode) {\n                    subRange = this.range.cloneRange();\n                    subRange.collapse(false);\n                } else {\n                    subRange = new Range(getRangeDocument(this.range));\n                    var current = this._current;\n                    var startContainer = current, startOffset = 0, endContainer = current, endOffset = getNodeLength(current);\n\n                    if (isOrIsAncestorOf(current, this.sc)) {\n                        startContainer = this.sc;\n                        startOffset = this.so;\n                    }\n                    if (isOrIsAncestorOf(current, this.ec)) {\n                        endContainer = this.ec;\n                        endOffset = this.eo;\n                    }\n\n                    updateBoundaries(subRange, startContainer, startOffset, endContainer, endOffset);\n                }\n                return new RangeIterator(subRange, this.clonePartiallySelectedTextNodes);\n            },\n\n            detach: function() {\n                this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;\n            }\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var beforeAfterNodeTypes = [1, 3, 4, 5, 7, 8, 10];\n        var rootContainerNodeTypes = [2, 9, 11];\n        var readonlyNodeTypes = [5, 6, 10, 12];\n        var insertableNodeTypes = [1, 3, 4, 5, 7, 8, 10, 11];\n        var surroundNodeTypes = [1, 3, 4, 5, 7, 8];\n\n        function createAncestorFinder(nodeTypes) {\n            return function(node, selfIsAncestor) {\n                var t, n = selfIsAncestor ? node : node.parentNode;\n                while (n) {\n                    t = n.nodeType;\n                    if (arrayContains(nodeTypes, t)) {\n                        return n;\n                    }\n                    n = n.parentNode;\n                }\n                return null;\n            };\n        }\n\n        var getDocumentOrFragmentContainer = createAncestorFinder( [9, 11] );\n        var getReadonlyAncestor = createAncestorFinder(readonlyNodeTypes);\n        var getDocTypeNotationEntityAncestor = createAncestorFinder( [6, 10, 12] );\n\n        function assertNoDocTypeNotationEntityAncestor(node, allowSelf) {\n            if (getDocTypeNotationEntityAncestor(node, allowSelf)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidNodeType(node, invalidTypes) {\n            if (!arrayContains(invalidTypes, node.nodeType)) {\n                throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n            }\n        }\n\n        function assertValidOffset(node, offset) {\n            if (offset < 0 || offset > (isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            }\n        }\n\n        function assertSameDocumentOrFragment(node1, node2) {\n            if (getDocumentOrFragmentContainer(node1, true) !== getDocumentOrFragmentContainer(node2, true)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        function assertNodeNotReadOnly(node) {\n            if (getReadonlyAncestor(node, true)) {\n                throw new DOMException(\"NO_MODIFICATION_ALLOWED_ERR\");\n            }\n        }\n\n        function assertNode(node, codeName) {\n            if (!node) {\n                throw new DOMException(codeName);\n            }\n        }\n\n        function isValidOffset(node, offset) {\n            return offset <= (isCharacterDataNode(node) ? node.length : node.childNodes.length);\n        }\n\n        function isRangeValid(range) {\n            return (!!range.startContainer && !!range.endContainer &&\n                    !(crashyTextNodes && (dom.isBrokenNode(range.startContainer) || dom.isBrokenNode(range.endContainer))) &&\n                    getRootContainer(range.startContainer) == getRootContainer(range.endContainer) &&\n                    isValidOffset(range.startContainer, range.startOffset) &&\n                    isValidOffset(range.endContainer, range.endOffset));\n        }\n\n        function assertRangeValid(range) {\n            if (!isRangeValid(range)) {\n                throw new Error(\"Range error: Range is not valid. This usually happens after DOM mutation. Range: (\" + range.inspect() + \")\");\n            }\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Test the browser's innerHTML support to decide how to implement createContextualFragment\n        var styleEl = document.createElement(\"style\");\n        var htmlParsingConforms = false;\n        try {\n            styleEl.innerHTML = \"<b>x</b>\";\n            htmlParsingConforms = (styleEl.firstChild.nodeType == 3); // Opera incorrectly creates an element node\n        } catch (e) {\n            // IE 6 and 7 throw\n        }\n\n        api.features.htmlParsingConforms = htmlParsingConforms;\n\n        var createContextualFragment = htmlParsingConforms ?\n\n            // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See\n            // discussion and base code for this implementation at issue 67.\n            // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface\n            // Thanks to Aleks Williams.\n            function(fragmentStr) {\n                // \"Let node the context object's start's node.\"\n                var node = this.startContainer;\n                var doc = getDocument(node);\n\n                // \"If the context object's start's node is null, raise an INVALID_STATE_ERR\n                // exception and abort these steps.\"\n                if (!node) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // \"Let element be as follows, depending on node's interface:\"\n                // Document, Document Fragment: null\n                var el = null;\n\n                // \"Element: node\"\n                if (node.nodeType == 1) {\n                    el = node;\n\n                // \"Text, Comment: node's parentElement\"\n                } else if (isCharacterDataNode(node)) {\n                    el = dom.parentElement(node);\n                }\n\n                // \"If either element is null or element's ownerDocument is an HTML document\n                // and element's local name is \"html\" and element's namespace is the HTML\n                // namespace\"\n                if (el === null || (\n                    el.nodeName == \"HTML\" &&\n                    dom.isHtmlNamespace(getDocument(el).documentElement) &&\n                    dom.isHtmlNamespace(el)\n                )) {\n\n                // \"let element be a new Element with \"body\" as its local name and the HTML\n                // namespace as its namespace.\"\"\n                    el = doc.createElement(\"body\");\n                } else {\n                    el = el.cloneNode(false);\n                }\n\n                // \"If the node's document is an HTML document: Invoke the HTML fragment parsing algorithm.\"\n                // \"If the node's document is an XML document: Invoke the XML fragment parsing algorithm.\"\n                // \"In either case, the algorithm must be invoked with fragment as the input\n                // and element as the context element.\"\n                el.innerHTML = fragmentStr;\n\n                // \"If this raises an exception, then abort these steps. Otherwise, let new\n                // children be the nodes returned.\"\n\n                // \"Let fragment be a new DocumentFragment.\"\n                // \"Append all new children to fragment.\"\n                // \"Return fragment.\"\n                return dom.fragmentFromNodeChildren(el);\n            } :\n\n            // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that\n            // previous versions of Rangy used (with the exception of using a body element rather than a div)\n            function(fragmentStr) {\n                var doc = getRangeDocument(this);\n                var el = doc.createElement(\"body\");\n                el.innerHTML = fragmentStr;\n\n                return dom.fragmentFromNodeChildren(el);\n            };\n\n        function splitRangeBoundaries(range, positionsToPreserve) {\n            assertRangeValid(range);\n\n            var sc = range.startContainer, so = range.startOffset, ec = range.endContainer, eo = range.endOffset;\n            var startEndSame = (sc === ec);\n\n            if (isCharacterDataNode(ec) && eo > 0 && eo < ec.length) {\n                splitDataNode(ec, eo, positionsToPreserve);\n            }\n\n            if (isCharacterDataNode(sc) && so > 0 && so < sc.length) {\n                sc = splitDataNode(sc, so, positionsToPreserve);\n                if (startEndSame) {\n                    eo -= so;\n                    ec = sc;\n                } else if (ec == sc.parentNode && eo >= getNodeIndex(sc)) {\n                    eo++;\n                }\n                so = 0;\n            }\n            range.setStartAndEnd(sc, so, ec, eo);\n        }\n\n        function rangeToHtml(range) {\n            assertRangeValid(range);\n            var container = range.commonAncestorContainer.parentNode.cloneNode(false);\n            container.appendChild( range.cloneContents() );\n            return container.innerHTML;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var rangeProperties = [\"startContainer\", \"startOffset\", \"endContainer\", \"endOffset\", \"collapsed\",\n            \"commonAncestorContainer\"];\n\n        var s2s = 0, s2e = 1, e2e = 2, e2s = 3;\n        var n_b = 0, n_a = 1, n_b_a = 2, n_i = 3;\n\n        util.extend(api.rangePrototype, {\n            compareBoundaryPoints: function(how, range) {\n                assertRangeValid(this);\n                assertSameDocumentOrFragment(this.startContainer, range.startContainer);\n\n                var nodeA, offsetA, nodeB, offsetB;\n                var prefixA = (how == e2s || how == s2s) ? \"start\" : \"end\";\n                var prefixB = (how == s2e || how == s2s) ? \"start\" : \"end\";\n                nodeA = this[prefixA + \"Container\"];\n                offsetA = this[prefixA + \"Offset\"];\n                nodeB = range[prefixB + \"Container\"];\n                offsetB = range[prefixB + \"Offset\"];\n                return comparePoints(nodeA, offsetA, nodeB, offsetB);\n            },\n\n            insertNode: function(node) {\n                assertRangeValid(this);\n                assertValidNodeType(node, insertableNodeTypes);\n                assertNodeNotReadOnly(this.startContainer);\n\n                if (isOrIsAncestorOf(node, this.startContainer)) {\n                    throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n                }\n\n                // No check for whether the container of the start of the Range is of a type that does not allow\n                // children of the type of node: the browser's DOM implementation should do this for us when we attempt\n                // to add the node\n\n                var firstNodeInserted = insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                this.setStartBefore(firstNodeInserted);\n            },\n\n            cloneContents: function() {\n                assertRangeValid(this);\n\n                var clone, frag;\n                if (this.collapsed) {\n                    return getRangeDocument(this).createDocumentFragment();\n                } else {\n                    if (this.startContainer === this.endContainer && isCharacterDataNode(this.startContainer)) {\n                        clone = this.startContainer.cloneNode(true);\n                        clone.data = clone.data.slice(this.startOffset, this.endOffset);\n                        frag = getRangeDocument(this).createDocumentFragment();\n                        frag.appendChild(clone);\n                        return frag;\n                    } else {\n                        var iterator = new RangeIterator(this, true);\n                        clone = cloneSubtree(iterator);\n                        iterator.detach();\n                    }\n                    return clone;\n                }\n            },\n\n            canSurroundContents: function() {\n                assertRangeValid(this);\n                assertNodeNotReadOnly(this.startContainer);\n                assertNodeNotReadOnly(this.endContainer);\n\n                // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                // no non-text nodes.\n                var iterator = new RangeIterator(this, true);\n                var boundariesInvalid = (iterator._first && (isNonTextPartiallySelected(iterator._first, this)) ||\n                        (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                iterator.detach();\n                return !boundariesInvalid;\n            },\n\n            surroundContents: function(node) {\n                assertValidNodeType(node, surroundNodeTypes);\n\n                if (!this.canSurroundContents()) {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n\n                // Extract the contents\n                var content = this.extractContents();\n\n                // Clear the children of the node\n                if (node.hasChildNodes()) {\n                    while (node.lastChild) {\n                        node.removeChild(node.lastChild);\n                    }\n                }\n\n                // Insert the new node and add the extracted contents\n                insertNodeAtPosition(node, this.startContainer, this.startOffset);\n                node.appendChild(content);\n\n                this.selectNode(node);\n            },\n\n            cloneRange: function() {\n                assertRangeValid(this);\n                var range = new Range(getRangeDocument(this));\n                var i = rangeProperties.length, prop;\n                while (i--) {\n                    prop = rangeProperties[i];\n                    range[prop] = this[prop];\n                }\n                return range;\n            },\n\n            toString: function() {\n                assertRangeValid(this);\n                var sc = this.startContainer;\n                if (sc === this.endContainer && isCharacterDataNode(sc)) {\n                    return (sc.nodeType == 3 || sc.nodeType == 4) ? sc.data.slice(this.startOffset, this.endOffset) : \"\";\n                } else {\n                    var textParts = [], iterator = new RangeIterator(this, true);\n                    iterateSubtree(iterator, function(node) {\n                        // Accept only text or CDATA nodes, not comments\n                        if (node.nodeType == 3 || node.nodeType == 4) {\n                            textParts.push(node.data);\n                        }\n                    });\n                    iterator.detach();\n                    return textParts.join(\"\");\n                }\n            },\n\n            // The methods below are all non-standard. The following batch were introduced by Mozilla but have since\n            // been removed from Mozilla.\n\n            compareNode: function(node) {\n                assertRangeValid(this);\n\n                var parent = node.parentNode;\n                var nodeIndex = getNodeIndex(node);\n\n                if (!parent) {\n                    throw new DOMException(\"NOT_FOUND_ERR\");\n                }\n\n                var startComparison = this.comparePoint(parent, nodeIndex),\n                    endComparison = this.comparePoint(parent, nodeIndex + 1);\n\n                if (startComparison < 0) { // Node starts before\n                    return (endComparison > 0) ? n_b_a : n_b;\n                } else {\n                    return (endComparison > 0) ? n_a : n_i;\n                }\n            },\n\n            comparePoint: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                if (comparePoints(node, offset, this.startContainer, this.startOffset) < 0) {\n                    return -1;\n                } else if (comparePoints(node, offset, this.endContainer, this.endOffset) > 0) {\n                    return 1;\n                }\n                return 0;\n            },\n\n            createContextualFragment: createContextualFragment,\n\n            toHtml: function() {\n                return rangeToHtml(this);\n            },\n\n            // touchingIsIntersecting determines whether this method considers a node that borders a range intersects\n            // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)\n            intersectsNode: function(node, touchingIsIntersecting) {\n                assertRangeValid(this);\n                if (getRootContainer(node) != getRangeRoot(this)) {\n                    return false;\n                }\n\n                var parent = node.parentNode, offset = getNodeIndex(node);\n                if (!parent) {\n                    return true;\n                }\n\n                var startComparison = comparePoints(parent, offset, this.endContainer, this.endOffset),\n                    endComparison = comparePoints(parent, offset + 1, this.startContainer, this.startOffset);\n\n                return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n            },\n\n            isPointInRange: function(node, offset) {\n                assertRangeValid(this);\n                assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n                assertSameDocumentOrFragment(node, this.startContainer);\n\n                return (comparePoints(node, offset, this.startContainer, this.startOffset) >= 0) &&\n                       (comparePoints(node, offset, this.endContainer, this.endOffset) <= 0);\n            },\n\n            // The methods below are non-standard and invented by me.\n\n            // Sharing a boundary start-to-end or end-to-start does not count as intersection.\n            intersectsRange: function(range) {\n                return rangesIntersect(this, range, false);\n            },\n\n            // Sharing a boundary start-to-end or end-to-start does count as intersection.\n            intersectsOrTouchesRange: function(range) {\n                return rangesIntersect(this, range, true);\n            },\n\n            intersection: function(range) {\n                if (this.intersectsRange(range)) {\n                    var startComparison = comparePoints(this.startContainer, this.startOffset, range.startContainer, range.startOffset),\n                        endComparison = comparePoints(this.endContainer, this.endOffset, range.endContainer, range.endOffset);\n\n                    var intersectionRange = this.cloneRange();\n                    if (startComparison == -1) {\n                        intersectionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (endComparison == 1) {\n                        intersectionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return intersectionRange;\n                }\n                return null;\n            },\n\n            union: function(range) {\n                if (this.intersectsOrTouchesRange(range)) {\n                    var unionRange = this.cloneRange();\n                    if (comparePoints(range.startContainer, range.startOffset, this.startContainer, this.startOffset) == -1) {\n                        unionRange.setStart(range.startContainer, range.startOffset);\n                    }\n                    if (comparePoints(range.endContainer, range.endOffset, this.endContainer, this.endOffset) == 1) {\n                        unionRange.setEnd(range.endContainer, range.endOffset);\n                    }\n                    return unionRange;\n                } else {\n                    throw new DOMException(\"Ranges do not intersect\");\n                }\n            },\n\n            containsNode: function(node, allowPartial) {\n                if (allowPartial) {\n                    return this.intersectsNode(node, false);\n                } else {\n                    return this.compareNode(node) == n_i;\n                }\n            },\n\n            containsNodeContents: function(node) {\n                return this.comparePoint(node, 0) >= 0 && this.comparePoint(node, getNodeLength(node)) <= 0;\n            },\n\n            containsRange: function(range) {\n                var intersection = this.intersection(range);\n                return intersection !== null && range.equals(intersection);\n            },\n\n            containsNodeText: function(node) {\n                var nodeRange = this.cloneRange();\n                nodeRange.selectNode(node);\n                var textNodes = nodeRange.getNodes([3]);\n                if (textNodes.length > 0) {\n                    nodeRange.setStart(textNodes[0], 0);\n                    var lastTextNode = textNodes.pop();\n                    nodeRange.setEnd(lastTextNode, lastTextNode.length);\n                    return this.containsRange(nodeRange);\n                } else {\n                    return this.containsNodeContents(node);\n                }\n            },\n\n            getNodes: function(nodeTypes, filter) {\n                assertRangeValid(this);\n                return getNodesInRange(this, nodeTypes, filter);\n            },\n\n            getDocument: function() {\n                return getRangeDocument(this);\n            },\n\n            collapseBefore: function(node) {\n                this.setEndBefore(node);\n                this.collapse(false);\n            },\n\n            collapseAfter: function(node) {\n                this.setStartAfter(node);\n                this.collapse(true);\n            },\n\n            getBookmark: function(containerNode) {\n                var doc = getRangeDocument(this);\n                var preSelectionRange = api.createRange(doc);\n                containerNode = containerNode || dom.getBody(doc);\n                preSelectionRange.selectNodeContents(containerNode);\n                var range = this.intersection(preSelectionRange);\n                var start = 0, end = 0;\n                if (range) {\n                    preSelectionRange.setEnd(range.startContainer, range.startOffset);\n                    start = preSelectionRange.toString().length;\n                    end = start + range.toString().length;\n                }\n\n                return {\n                    start: start,\n                    end: end,\n                    containerNode: containerNode\n                };\n            },\n\n            moveToBookmark: function(bookmark) {\n                var containerNode = bookmark.containerNode;\n                var charIndex = 0;\n                this.setStart(containerNode, 0);\n                this.collapse(true);\n                var nodeStack = [containerNode], node, foundStart = false, stop = false;\n                var nextCharIndex, i, childNodes;\n\n                while (!stop && (node = nodeStack.pop())) {\n                    if (node.nodeType === 3) {\n                        nextCharIndex = charIndex + node.length;\n                        if (!foundStart && bookmark.start >= charIndex && bookmark.start <= nextCharIndex) {\n                            this.setStart(node, bookmark.start - charIndex);\n                            foundStart = true;\n                        }\n                        if (foundStart && bookmark.end >= charIndex && bookmark.end <= nextCharIndex) {\n                            this.setEnd(node, bookmark.end - charIndex);\n                            stop = true;\n                        }\n                        charIndex = nextCharIndex;\n                    } else {\n                        childNodes = node.childNodes;\n                        i = childNodes.length;\n                        while (i--) {\n                            nodeStack.push(childNodes[i]);\n                        }\n                    }\n                }\n            },\n\n            getName: function() {\n                return \"DomRange\";\n            },\n\n            equals: function(range) {\n                return Range.rangesEqual(this, range);\n            },\n\n            isValid: function() {\n                return isRangeValid(this);\n            },\n\n            inspect: function() {\n                return inspect(this);\n            },\n\n            detach: function() {\n                // In DOM4, detach() is now a no-op.\n            }\n        });\n\n        function copyComparisonConstantsToObject(obj) {\n            obj.START_TO_START = s2s;\n            obj.START_TO_END = s2e;\n            obj.END_TO_END = e2e;\n            obj.END_TO_START = e2s;\n\n            obj.NODE_BEFORE = n_b;\n            obj.NODE_AFTER = n_a;\n            obj.NODE_BEFORE_AND_AFTER = n_b_a;\n            obj.NODE_INSIDE = n_i;\n        }\n\n        function copyComparisonConstants(constructor) {\n            copyComparisonConstantsToObject(constructor);\n            copyComparisonConstantsToObject(constructor.prototype);\n        }\n\n        function createRangeContentRemover(remover, boundaryUpdater) {\n            return function() {\n                assertRangeValid(this);\n\n                var sc = this.startContainer, so = this.startOffset, root = this.commonAncestorContainer;\n\n                var iterator = new RangeIterator(this, true);\n\n                // Work out where to position the range after content removal\n                var node, boundary;\n                if (sc !== root) {\n                    node = getClosestAncestorIn(sc, root, true);\n                    boundary = getBoundaryAfterNode(node);\n                    sc = boundary.node;\n                    so = boundary.offset;\n                }\n\n                // Check none of the range is read-only\n                iterateSubtree(iterator, assertNodeNotReadOnly);\n\n                iterator.reset();\n\n                // Remove the content\n                var returnValue = remover(iterator);\n                iterator.detach();\n\n                // Move to the new position\n                boundaryUpdater(this, sc, so, sc, so);\n\n                return returnValue;\n            };\n        }\n\n        function createPrototypeRange(constructor, boundaryUpdater) {\n            function createBeforeAfterNodeSetter(isBefore, isStart) {\n                return function(node) {\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n                    assertValidNodeType(getRootContainer(node), rootContainerNodeTypes);\n\n                    var boundary = (isBefore ? getBoundaryBeforeNode : getBoundaryAfterNode)(node);\n                    (isStart ? setRangeStart : setRangeEnd)(this, boundary.node, boundary.offset);\n                };\n            }\n\n            function setRangeStart(range, node, offset) {\n                var ec = range.endContainer, eo = range.endOffset;\n                if (node !== range.startContainer || offset !== range.startOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(ec) || comparePoints(node, offset, ec, eo) == 1) {\n                        ec = node;\n                        eo = offset;\n                    }\n                    boundaryUpdater(range, node, offset, ec, eo);\n                }\n            }\n\n            function setRangeEnd(range, node, offset) {\n                var sc = range.startContainer, so = range.startOffset;\n                if (node !== range.endContainer || offset !== range.endOffset) {\n                    // Check the root containers of the range and the new boundary, and also check whether the new boundary\n                    // is after the current end. In either case, collapse the range to the new position\n                    if (getRootContainer(node) != getRootContainer(sc) || comparePoints(node, offset, sc, so) == -1) {\n                        sc = node;\n                        so = offset;\n                    }\n                    boundaryUpdater(range, sc, so, node, offset);\n                }\n            }\n\n            // Set up inheritance\n            var F = function() {};\n            F.prototype = api.rangePrototype;\n            constructor.prototype = new F();\n\n            util.extend(constructor.prototype, {\n                setStart: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeStart(this, node, offset);\n                },\n\n                setEnd: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n\n                    setRangeEnd(this, node, offset);\n                },\n\n                /**\n                 * Convenience method to set a range's start and end boundaries. Overloaded as follows:\n                 * - Two parameters (node, offset) creates a collapsed range at that position\n                 * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at\n                 *   startOffset and ending at endOffset\n                 * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in\n                 *   startNode and ending at endOffset in endNode\n                 */\n                setStartAndEnd: function() {\n                    var args = arguments;\n                    var sc = args[0], so = args[1], ec = sc, eo = so;\n\n                    switch (args.length) {\n                        case 3:\n                            eo = args[2];\n                            break;\n                        case 4:\n                            ec = args[2];\n                            eo = args[3];\n                            break;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                setBoundary: function(node, offset, isStart) {\n                    this[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                },\n\n                setStartBefore: createBeforeAfterNodeSetter(true, true),\n                setStartAfter: createBeforeAfterNodeSetter(false, true),\n                setEndBefore: createBeforeAfterNodeSetter(true, false),\n                setEndAfter: createBeforeAfterNodeSetter(false, false),\n\n                collapse: function(isStart) {\n                    assertRangeValid(this);\n                    if (isStart) {\n                        boundaryUpdater(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset);\n                    } else {\n                        boundaryUpdater(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);\n                    }\n                },\n\n                selectNodeContents: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n\n                    boundaryUpdater(this, node, 0, node, getNodeLength(node));\n                },\n\n                selectNode: function(node) {\n                    assertNoDocTypeNotationEntityAncestor(node, false);\n                    assertValidNodeType(node, beforeAfterNodeTypes);\n\n                    var start = getBoundaryBeforeNode(node), end = getBoundaryAfterNode(node);\n                    boundaryUpdater(this, start.node, start.offset, end.node, end.offset);\n                },\n\n                extractContents: createRangeContentRemover(extractSubtree, boundaryUpdater),\n\n                deleteContents: createRangeContentRemover(deleteSubtree, boundaryUpdater),\n\n                canSurroundContents: function() {\n                    assertRangeValid(this);\n                    assertNodeNotReadOnly(this.startContainer);\n                    assertNodeNotReadOnly(this.endContainer);\n\n                    // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n                    // no non-text nodes.\n                    var iterator = new RangeIterator(this, true);\n                    var boundariesInvalid = (iterator._first && isNonTextPartiallySelected(iterator._first, this) ||\n                            (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n                    iterator.detach();\n                    return !boundariesInvalid;\n                },\n\n                splitBoundaries: function() {\n                    splitRangeBoundaries(this);\n                },\n\n                splitBoundariesPreservingPositions: function(positionsToPreserve) {\n                    splitRangeBoundaries(this, positionsToPreserve);\n                },\n\n                normalizeBoundaries: function() {\n                    assertRangeValid(this);\n\n                    var sc = this.startContainer, so = this.startOffset, ec = this.endContainer, eo = this.endOffset;\n\n                    var mergeForward = function(node) {\n                        var sibling = node.nextSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            ec = node;\n                            eo = node.length;\n                            node.appendData(sibling.data);\n                            removeNode(sibling);\n                        }\n                    };\n\n                    var mergeBackward = function(node) {\n                        var sibling = node.previousSibling;\n                        if (sibling && sibling.nodeType == node.nodeType) {\n                            sc = node;\n                            var nodeLength = node.length;\n                            so = sibling.length;\n                            node.insertData(0, sibling.data);\n                            removeNode(sibling);\n                            if (sc == ec) {\n                                eo += so;\n                                ec = sc;\n                            } else if (ec == node.parentNode) {\n                                var nodeIndex = getNodeIndex(node);\n                                if (eo == nodeIndex) {\n                                    ec = node;\n                                    eo = nodeLength;\n                                } else if (eo > nodeIndex) {\n                                    eo--;\n                                }\n                            }\n                        }\n                    };\n\n                    var normalizeStart = true;\n                    var sibling;\n\n                    if (isCharacterDataNode(ec)) {\n                        if (eo == ec.length) {\n                            mergeForward(ec);\n                        } else if (eo == 0) {\n                            sibling = ec.previousSibling;\n                            if (sibling && sibling.nodeType == ec.nodeType) {\n                                eo = sibling.length;\n                                if (sc == ec) {\n                                    normalizeStart = false;\n                                }\n                                sibling.appendData(ec.data);\n                                removeNode(ec);\n                                ec = sibling;\n                            }\n                        }\n                    } else {\n                        if (eo > 0) {\n                            var endNode = ec.childNodes[eo - 1];\n                            if (endNode && isCharacterDataNode(endNode)) {\n                                mergeForward(endNode);\n                            }\n                        }\n                        normalizeStart = !this.collapsed;\n                    }\n\n                    if (normalizeStart) {\n                        if (isCharacterDataNode(sc)) {\n                            if (so == 0) {\n                                mergeBackward(sc);\n                            } else if (so == sc.length) {\n                                sibling = sc.nextSibling;\n                                if (sibling && sibling.nodeType == sc.nodeType) {\n                                    if (ec == sibling) {\n                                        ec = sc;\n                                        eo += sc.length;\n                                    }\n                                    sc.appendData(sibling.data);\n                                    removeNode(sibling);\n                                }\n                            }\n                        } else {\n                            if (so < sc.childNodes.length) {\n                                var startNode = sc.childNodes[so];\n                                if (startNode && isCharacterDataNode(startNode)) {\n                                    mergeBackward(startNode);\n                                }\n                            }\n                        }\n                    } else {\n                        sc = ec;\n                        so = eo;\n                    }\n\n                    boundaryUpdater(this, sc, so, ec, eo);\n                },\n\n                collapseToPoint: function(node, offset) {\n                    assertNoDocTypeNotationEntityAncestor(node, true);\n                    assertValidOffset(node, offset);\n                    this.setStartAndEnd(node, offset);\n                }\n            });\n\n            copyComparisonConstants(constructor);\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Updates commonAncestorContainer and collapsed after boundary change\n        function updateCollapsedAndCommonAncestor(range) {\n            range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n            range.commonAncestorContainer = range.collapsed ?\n                range.startContainer : dom.getCommonAncestor(range.startContainer, range.endContainer);\n        }\n\n        function updateBoundaries(range, startContainer, startOffset, endContainer, endOffset) {\n            range.startContainer = startContainer;\n            range.startOffset = startOffset;\n            range.endContainer = endContainer;\n            range.endOffset = endOffset;\n            range.document = dom.getDocument(startContainer);\n\n            updateCollapsedAndCommonAncestor(range);\n        }\n\n        function Range(doc) {\n            this.startContainer = doc;\n            this.startOffset = 0;\n            this.endContainer = doc;\n            this.endOffset = 0;\n            this.document = doc;\n            updateCollapsedAndCommonAncestor(this);\n        }\n\n        createPrototypeRange(Range, updateBoundaries);\n\n        util.extend(Range, {\n            rangeProperties: rangeProperties,\n            RangeIterator: RangeIterator,\n            copyComparisonConstants: copyComparisonConstants,\n            createPrototypeRange: createPrototypeRange,\n            inspect: inspect,\n            toHtml: rangeToHtml,\n            getRangeDocument: getRangeDocument,\n            rangesEqual: function(r1, r2) {\n                return r1.startContainer === r2.startContainer &&\n                    r1.startOffset === r2.startOffset &&\n                    r1.endContainer === r2.endContainer &&\n                    r1.endOffset === r2.endOffset;\n            }\n        });\n\n        api.DomRange = Range;\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Wrappers for the browser's native DOM Range and/or TextRange implementation\n    api.createCoreModule(\"WrappedRange\", [\"DomRange\"], function(api, module) {\n        var WrappedRange, WrappedTextRange;\n        var dom = api.dom;\n        var util = api.util;\n        var DomPosition = dom.DomPosition;\n        var DomRange = api.DomRange;\n        var getBody = dom.getBody;\n        var getContentDocument = dom.getContentDocument;\n        var isCharacterDataNode = dom.isCharacterDataNode;\n\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        if (api.features.implementsDomRange) {\n            // This is a wrapper around the browser's native DOM Range. It has two aims:\n            // - Provide workarounds for specific browser bugs\n            // - provide convenient extensions, which are inherited from Rangy's DomRange\n\n            (function() {\n                var rangeProto;\n                var rangeProperties = DomRange.rangeProperties;\n\n                function updateRangeProperties(range) {\n                    var i = rangeProperties.length, prop;\n                    while (i--) {\n                        prop = rangeProperties[i];\n                        range[prop] = range.nativeRange[prop];\n                    }\n                    // Fix for broken collapsed property in IE 9.\n                    range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n                }\n\n                function updateNativeRange(range, startContainer, startOffset, endContainer, endOffset) {\n                    var startMoved = (range.startContainer !== startContainer || range.startOffset != startOffset);\n                    var endMoved = (range.endContainer !== endContainer || range.endOffset != endOffset);\n                    var nativeRangeDifferent = !range.equals(range.nativeRange);\n\n                    // Always set both boundaries for the benefit of IE9 (see issue 35)\n                    if (startMoved || endMoved || nativeRangeDifferent) {\n                        range.setEnd(endContainer, endOffset);\n                        range.setStart(startContainer, startOffset);\n                    }\n                }\n\n                var createBeforeAfterNodeSetter;\n\n                WrappedRange = function(range) {\n                    if (!range) {\n                        throw module.createError(\"WrappedRange: Range must be specified\");\n                    }\n                    this.nativeRange = range;\n                    updateRangeProperties(this);\n                };\n\n                DomRange.createPrototypeRange(WrappedRange, updateNativeRange);\n\n                rangeProto = WrappedRange.prototype;\n\n                rangeProto.selectNode = function(node) {\n                    this.nativeRange.selectNode(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneContents = function() {\n                    return this.nativeRange.cloneContents();\n                };\n\n                // Due to a long-standing Firefox bug that I have not been able to find a reliable way to detect,\n                // insertNode() is never delegated to the native range.\n\n                rangeProto.surroundContents = function(node) {\n                    this.nativeRange.surroundContents(node);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.collapse = function(isStart) {\n                    this.nativeRange.collapse(isStart);\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.cloneRange = function() {\n                    return new WrappedRange(this.nativeRange.cloneRange());\n                };\n\n                rangeProto.refresh = function() {\n                    updateRangeProperties(this);\n                };\n\n                rangeProto.toString = function() {\n                    return this.nativeRange.toString();\n                };\n\n                // Create test range and node for feature detection\n\n                var testTextNode = document.createTextNode(\"test\");\n                getBody(document).appendChild(testTextNode);\n                var range = document.createRange();\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for Firefox 2 bug that prevents moving the start of a Range to a point after its current end and\n                // correct for it\n\n                range.setStart(testTextNode, 0);\n                range.setEnd(testTextNode, 0);\n\n                try {\n                    range.setStart(testTextNode, 1);\n\n                    rangeProto.setStart = function(node, offset) {\n                        this.nativeRange.setStart(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        this.nativeRange.setEnd(node, offset);\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name) {\n                        return function(node) {\n                            this.nativeRange[name](node);\n                            updateRangeProperties(this);\n                        };\n                    };\n\n                } catch(ex) {\n\n                    rangeProto.setStart = function(node, offset) {\n                        try {\n                            this.nativeRange.setStart(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setEnd(node, offset);\n                            this.nativeRange.setStart(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.setEnd = function(node, offset) {\n                        try {\n                            this.nativeRange.setEnd(node, offset);\n                        } catch (ex) {\n                            this.nativeRange.setStart(node, offset);\n                            this.nativeRange.setEnd(node, offset);\n                        }\n                        updateRangeProperties(this);\n                    };\n\n                    createBeforeAfterNodeSetter = function(name, oppositeName) {\n                        return function(node) {\n                            try {\n                                this.nativeRange[name](node);\n                            } catch (ex) {\n                                this.nativeRange[oppositeName](node);\n                                this.nativeRange[name](node);\n                            }\n                            updateRangeProperties(this);\n                        };\n                    };\n                }\n\n                rangeProto.setStartBefore = createBeforeAfterNodeSetter(\"setStartBefore\", \"setEndBefore\");\n                rangeProto.setStartAfter = createBeforeAfterNodeSetter(\"setStartAfter\", \"setEndAfter\");\n                rangeProto.setEndBefore = createBeforeAfterNodeSetter(\"setEndBefore\", \"setStartBefore\");\n                rangeProto.setEndAfter = createBeforeAfterNodeSetter(\"setEndAfter\", \"setStartAfter\");\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Always use DOM4-compliant selectNodeContents implementation: it's simpler and less code than testing\n                // whether the native implementation can be trusted\n                rangeProto.selectNodeContents = function(node) {\n                    this.setStartAndEnd(node, 0, dom.getNodeLength(node));\n                };\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for and correct WebKit bug that has the behaviour of compareBoundaryPoints round the wrong way for\n                // constants START_TO_END and END_TO_START: https://bugs.webkit.org/show_bug.cgi?id=20738\n\n                range.selectNodeContents(testTextNode);\n                range.setEnd(testTextNode, 3);\n\n                var range2 = document.createRange();\n                range2.selectNodeContents(testTextNode);\n                range2.setEnd(testTextNode, 4);\n                range2.setStart(testTextNode, 2);\n\n                if (range.compareBoundaryPoints(range.START_TO_END, range2) == -1 &&\n                        range.compareBoundaryPoints(range.END_TO_START, range2) == 1) {\n                    // This is the wrong way round, so correct for it\n\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        range = range.nativeRange || range;\n                        if (type == range.START_TO_END) {\n                            type = range.END_TO_START;\n                        } else if (type == range.END_TO_START) {\n                            type = range.START_TO_END;\n                        }\n                        return this.nativeRange.compareBoundaryPoints(type, range);\n                    };\n                } else {\n                    rangeProto.compareBoundaryPoints = function(type, range) {\n                        return this.nativeRange.compareBoundaryPoints(type, range.nativeRange || range);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for IE deleteContents() and extractContents() bug and correct it. See issue 107.\n\n                var el = document.createElement(\"div\");\n                el.innerHTML = \"123\";\n                var textNode = el.firstChild;\n                var body = getBody(document);\n                body.appendChild(el);\n\n                range.setStart(textNode, 1);\n                range.setEnd(textNode, 2);\n                range.deleteContents();\n\n                if (textNode.data == \"13\") {\n                    // Behaviour is correct per DOM4 Range so wrap the browser's implementation of deleteContents() and\n                    // extractContents()\n                    rangeProto.deleteContents = function() {\n                        this.nativeRange.deleteContents();\n                        updateRangeProperties(this);\n                    };\n\n                    rangeProto.extractContents = function() {\n                        var frag = this.nativeRange.extractContents();\n                        updateRangeProperties(this);\n                        return frag;\n                    };\n                } else {\n                }\n\n                body.removeChild(el);\n                body = null;\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Test for existence of createContextualFragment and delegate to it if it exists\n                if (util.isHostMethod(range, \"createContextualFragment\")) {\n                    rangeProto.createContextualFragment = function(fragmentStr) {\n                        return this.nativeRange.createContextualFragment(fragmentStr);\n                    };\n                }\n\n                /*--------------------------------------------------------------------------------------------------------*/\n\n                // Clean up\n                getBody(document).removeChild(testTextNode);\n\n                rangeProto.getName = function() {\n                    return \"WrappedRange\";\n                };\n\n                api.WrappedRange = WrappedRange;\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return doc.createRange();\n                };\n            })();\n        }\n\n        if (api.features.implementsTextRange) {\n            /*\n            This is a workaround for a bug where IE returns the wrong container element from the TextRange's parentElement()\n            method. For example, in the following (where pipes denote the selection boundaries):\n\n            <ul id=\"ul\"><li id=\"a\">| a </li><li id=\"b\"> b |</li></ul>\n\n            var range = document.selection.createRange();\n            alert(range.parentElement().id); // Should alert \"ul\" but alerts \"b\"\n\n            This method returns the common ancestor node of the following:\n            - the parentElement() of the textRange\n            - the parentElement() of the textRange after calling collapse(true)\n            - the parentElement() of the textRange after calling collapse(false)\n            */\n            var getTextRangeContainerElement = function(textRange) {\n                var parentEl = textRange.parentElement();\n                var range = textRange.duplicate();\n                range.collapse(true);\n                var startEl = range.parentElement();\n                range = textRange.duplicate();\n                range.collapse(false);\n                var endEl = range.parentElement();\n                var startEndContainer = (startEl == endEl) ? startEl : dom.getCommonAncestor(startEl, endEl);\n\n                return startEndContainer == parentEl ? startEndContainer : dom.getCommonAncestor(parentEl, startEndContainer);\n            };\n\n            var textRangeIsCollapsed = function(textRange) {\n                return textRange.compareEndPoints(\"StartToEnd\", textRange) == 0;\n            };\n\n            // Gets the boundary of a TextRange expressed as a node and an offset within that node. This function started\n            // out as an improved version of code found in Tim Cameron Ryan's IERange (http://code.google.com/p/ierange/)\n            // but has grown, fixing problems with line breaks in preformatted text, adding workaround for IE TextRange\n            // bugs, handling for inputs and images, plus optimizations.\n            var getTextRangeBoundaryPosition = function(textRange, wholeRangeContainerElement, isStart, isCollapsed, startInfo) {\n                var workingRange = textRange.duplicate();\n                workingRange.collapse(isStart);\n                var containerElement = workingRange.parentElement();\n\n                // Sometimes collapsing a TextRange that's at the start of a text node can move it into the previous node, so\n                // check for that\n                if (!dom.isOrIsAncestorOf(wholeRangeContainerElement, containerElement)) {\n                    containerElement = wholeRangeContainerElement;\n                }\n\n\n                // Deal with nodes that cannot \"contain rich HTML markup\". In practice, this means form inputs, images and\n                // similar. See http://msdn.microsoft.com/en-us/library/aa703950%28VS.85%29.aspx\n                if (!containerElement.canHaveHTML) {\n                    var pos = new DomPosition(containerElement.parentNode, dom.getNodeIndex(containerElement));\n                    return {\n                        boundaryPosition: pos,\n                        nodeInfo: {\n                            nodeIndex: pos.offset,\n                            containerElement: pos.node\n                        }\n                    };\n                }\n\n                var workingNode = dom.getDocument(containerElement).createElement(\"span\");\n\n                // Workaround for HTML5 Shiv's insane violation of document.createElement(). See Rangy issue 104 and HTML5\n                // Shiv issue 64: https://github.com/aFarkas/html5shiv/issues/64\n                if (workingNode.parentNode) {\n                    dom.removeNode(workingNode);\n                }\n\n                var comparison, workingComparisonType = isStart ? \"StartToStart\" : \"StartToEnd\";\n                var previousNode, nextNode, boundaryPosition, boundaryNode;\n                var start = (startInfo && startInfo.containerElement == containerElement) ? startInfo.nodeIndex : 0;\n                var childNodeCount = containerElement.childNodes.length;\n                var end = childNodeCount;\n\n                // Check end first. Code within the loop assumes that the endth child node of the container is definitely\n                // after the range boundary.\n                var nodeIndex = end;\n\n                while (true) {\n                    if (nodeIndex == childNodeCount) {\n                        containerElement.appendChild(workingNode);\n                    } else {\n                        containerElement.insertBefore(workingNode, containerElement.childNodes[nodeIndex]);\n                    }\n                    workingRange.moveToElementText(workingNode);\n                    comparison = workingRange.compareEndPoints(workingComparisonType, textRange);\n                    if (comparison == 0 || start == end) {\n                        break;\n                    } else if (comparison == -1) {\n                        if (end == start + 1) {\n                            // We know the endth child node is after the range boundary, so we must be done.\n                            break;\n                        } else {\n                            start = nodeIndex;\n                        }\n                    } else {\n                        end = (end == start + 1) ? start : nodeIndex;\n                    }\n                    nodeIndex = Math.floor((start + end) / 2);\n                    containerElement.removeChild(workingNode);\n                }\n\n\n                // We've now reached or gone past the boundary of the text range we're interested in\n                // so have identified the node we want\n                boundaryNode = workingNode.nextSibling;\n\n                if (comparison == -1 && boundaryNode && isCharacterDataNode(boundaryNode)) {\n                    // This is a character data node (text, comment, cdata). The working range is collapsed at the start of\n                    // the node containing the text range's boundary, so we move the end of the working range to the\n                    // boundary point and measure the length of its text to get the boundary's offset within the node.\n                    workingRange.setEndPoint(isStart ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n                    var offset;\n\n                    if (/[\\r\\n]/.test(boundaryNode.data)) {\n                        /*\n                        For the particular case of a boundary within a text node containing rendered line breaks (within a\n                        <pre> element, for example), we need a slightly complicated approach to get the boundary's offset in\n                        IE. The facts:\n\n                        - Each line break is represented as \\r in the text node's data/nodeValue properties\n                        - Each line break is represented as \\r\\n in the TextRange's 'text' property\n                        - The 'text' property of the TextRange does not contain trailing line breaks\n\n                        To get round the problem presented by the final fact above, we can use the fact that TextRange's\n                        moveStart() and moveEnd() methods return the actual number of characters moved, which is not\n                        necessarily the same as the number of characters it was instructed to move. The simplest approach is\n                        to use this to store the characters moved when moving both the start and end of the range to the\n                        start of the document body and subtracting the start offset from the end offset (the\n                        \"move-negative-gazillion\" method). However, this is extremely slow when the document is large and\n                        the range is near the end of it. Clearly doing the mirror image (i.e. moving the range boundaries to\n                        the end of the document) has the same problem.\n\n                        Another approach that works is to use moveStart() to move the start boundary of the range up to the\n                        end boundary one character at a time and incrementing a counter with the value returned by the\n                        moveStart() call. However, the check for whether the start boundary has reached the end boundary is\n                        expensive, so this method is slow (although unlike \"move-negative-gazillion\" is largely unaffected\n                        by the location of the range within the document).\n\n                        The approach used below is a hybrid of the two methods above. It uses the fact that a string\n                        containing the TextRange's 'text' property with each \\r\\n converted to a single \\r character cannot\n                        be longer than the text of the TextRange, so the start of the range is moved that length initially\n                        and then a character at a time to make up for any trailing line breaks not contained in the 'text'\n                        property. This has good performance in most situations compared to the previous two methods.\n                        */\n                        var tempRange = workingRange.duplicate();\n                        var rangeLength = tempRange.text.replace(/\\r\\n/g, \"\\r\").length;\n\n                        offset = tempRange.moveStart(\"character\", rangeLength);\n                        while ( (comparison = tempRange.compareEndPoints(\"StartToEnd\", tempRange)) == -1) {\n                            offset++;\n                            tempRange.moveStart(\"character\", 1);\n                        }\n                    } else {\n                        offset = workingRange.text.length;\n                    }\n                    boundaryPosition = new DomPosition(boundaryNode, offset);\n                } else {\n\n                    // If the boundary immediately follows a character data node and this is the end boundary, we should favour\n                    // a position within that, and likewise for a start boundary preceding a character data node\n                    previousNode = (isCollapsed || !isStart) && workingNode.previousSibling;\n                    nextNode = (isCollapsed || isStart) && workingNode.nextSibling;\n                    if (nextNode && isCharacterDataNode(nextNode)) {\n                        boundaryPosition = new DomPosition(nextNode, 0);\n                    } else if (previousNode && isCharacterDataNode(previousNode)) {\n                        boundaryPosition = new DomPosition(previousNode, previousNode.data.length);\n                    } else {\n                        boundaryPosition = new DomPosition(containerElement, dom.getNodeIndex(workingNode));\n                    }\n                }\n\n                // Clean up\n                dom.removeNode(workingNode);\n\n                return {\n                    boundaryPosition: boundaryPosition,\n                    nodeInfo: {\n                        nodeIndex: nodeIndex,\n                        containerElement: containerElement\n                    }\n                };\n            };\n\n            // Returns a TextRange representing the boundary of a TextRange expressed as a node and an offset within that\n            // node. This function started out as an optimized version of code found in Tim Cameron Ryan's IERange\n            // (http://code.google.com/p/ierange/)\n            var createBoundaryTextRange = function(boundaryPosition, isStart) {\n                var boundaryNode, boundaryParent, boundaryOffset = boundaryPosition.offset;\n                var doc = dom.getDocument(boundaryPosition.node);\n                var workingNode, childNodes, workingRange = getBody(doc).createTextRange();\n                var nodeIsDataNode = isCharacterDataNode(boundaryPosition.node);\n\n                if (nodeIsDataNode) {\n                    boundaryNode = boundaryPosition.node;\n                    boundaryParent = boundaryNode.parentNode;\n                } else {\n                    childNodes = boundaryPosition.node.childNodes;\n                    boundaryNode = (boundaryOffset < childNodes.length) ? childNodes[boundaryOffset] : null;\n                    boundaryParent = boundaryPosition.node;\n                }\n\n                // Position the range immediately before the node containing the boundary\n                workingNode = doc.createElement(\"span\");\n\n                // Making the working element non-empty element persuades IE to consider the TextRange boundary to be within\n                // the element rather than immediately before or after it\n                workingNode.innerHTML = \"&#feff;\";\n\n                // insertBefore is supposed to work like appendChild if the second parameter is null. However, a bug report\n                // for IERange suggests that it can crash the browser: http://code.google.com/p/ierange/issues/detail?id=12\n                if (boundaryNode) {\n                    boundaryParent.insertBefore(workingNode, boundaryNode);\n                } else {\n                    boundaryParent.appendChild(workingNode);\n                }\n\n                workingRange.moveToElementText(workingNode);\n                workingRange.collapse(!isStart);\n\n                // Clean up\n                boundaryParent.removeChild(workingNode);\n\n                // Move the working range to the text offset, if required\n                if (nodeIsDataNode) {\n                    workingRange[isStart ? \"moveStart\" : \"moveEnd\"](\"character\", boundaryOffset);\n                }\n\n                return workingRange;\n            };\n\n            /*------------------------------------------------------------------------------------------------------------*/\n\n            // This is a wrapper around a TextRange, providing full DOM Range functionality using rangy's DomRange as a\n            // prototype\n\n            WrappedTextRange = function(textRange) {\n                this.textRange = textRange;\n                this.refresh();\n            };\n\n            WrappedTextRange.prototype = new DomRange(document);\n\n            WrappedTextRange.prototype.refresh = function() {\n                var start, end, startBoundary;\n\n                // TextRange's parentElement() method cannot be trusted. getTextRangeContainerElement() works around that.\n                var rangeContainerElement = getTextRangeContainerElement(this.textRange);\n\n                if (textRangeIsCollapsed(this.textRange)) {\n                    end = start = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true,\n                        true).boundaryPosition;\n                } else {\n                    startBoundary = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, true, false);\n                    start = startBoundary.boundaryPosition;\n\n                    // An optimization used here is that if the start and end boundaries have the same parent element, the\n                    // search scope for the end boundary can be limited to exclude the portion of the element that precedes\n                    // the start boundary\n                    end = getTextRangeBoundaryPosition(this.textRange, rangeContainerElement, false, false,\n                        startBoundary.nodeInfo).boundaryPosition;\n                }\n\n                this.setStart(start.node, start.offset);\n                this.setEnd(end.node, end.offset);\n            };\n\n            WrappedTextRange.prototype.getName = function() {\n                return \"WrappedTextRange\";\n            };\n\n            DomRange.copyComparisonConstants(WrappedTextRange);\n\n            var rangeToTextRange = function(range) {\n                if (range.collapsed) {\n                    return createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                } else {\n                    var startRange = createBoundaryTextRange(new DomPosition(range.startContainer, range.startOffset), true);\n                    var endRange = createBoundaryTextRange(new DomPosition(range.endContainer, range.endOffset), false);\n                    var textRange = getBody( DomRange.getRangeDocument(range) ).createTextRange();\n                    textRange.setEndPoint(\"StartToStart\", startRange);\n                    textRange.setEndPoint(\"EndToEnd\", endRange);\n                    return textRange;\n                }\n            };\n\n            WrappedTextRange.rangeToTextRange = rangeToTextRange;\n\n            WrappedTextRange.prototype.toTextRange = function() {\n                return rangeToTextRange(this);\n            };\n\n            api.WrappedTextRange = WrappedTextRange;\n\n            // IE 9 and above have both implementations and Rangy makes both available. The next few lines sets which\n            // implementation to use by default.\n            if (!api.features.implementsDomRange || api.config.preferTextRange) {\n                // Add WrappedTextRange as the Range property of the global object to allow expression like Range.END_TO_END to work\n                var globalObj = (function(f) { return f(\"return this;\")(); })(Function);\n                if (typeof globalObj.Range == \"undefined\") {\n                    globalObj.Range = WrappedTextRange;\n                }\n\n                api.createNativeRange = function(doc) {\n                    doc = getContentDocument(doc, module, \"createNativeRange\");\n                    return getBody(doc).createTextRange();\n                };\n\n                api.WrappedRange = WrappedTextRange;\n            }\n        }\n\n        api.createRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRange\");\n            return new api.WrappedRange(api.createNativeRange(doc));\n        };\n\n        api.createRangyRange = function(doc) {\n            doc = getContentDocument(doc, module, \"createRangyRange\");\n            return new DomRange(doc);\n        };\n\n        util.createAliasForDeprecatedMethod(api, \"createIframeRange\", \"createRange\");\n        util.createAliasForDeprecatedMethod(api, \"createIframeRangyRange\", \"createRangyRange\");\n\n        api.addShimListener(function(win) {\n            var doc = win.document;\n            if (typeof doc.createRange == \"undefined\") {\n                doc.createRange = function() {\n                    return api.createRange(doc);\n                };\n            }\n            doc = win = null;\n        });\n    });\n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // This module creates a selection object wrapper that conforms as closely as possible to the Selection specification\n    // in the HTML Editing spec (http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections)\n    api.createCoreModule(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"], function(api, module) {\n        api.config.checkSelectionRanges = true;\n\n        var BOOLEAN = \"boolean\";\n        var NUMBER = \"number\";\n        var dom = api.dom;\n        var util = api.util;\n        var isHostMethod = util.isHostMethod;\n        var DomRange = api.DomRange;\n        var WrappedRange = api.WrappedRange;\n        var DOMException = api.DOMException;\n        var DomPosition = dom.DomPosition;\n        var getNativeSelection;\n        var selectionIsCollapsed;\n        var features = api.features;\n        var CONTROL = \"Control\";\n        var getDocument = dom.getDocument;\n        var getBody = dom.getBody;\n        var rangesEqual = DomRange.rangesEqual;\n\n\n        // Utility function to support direction parameters in the API that may be a string (\"backward\", \"backwards\",\n        // \"forward\" or \"forwards\") or a Boolean (true for backwards).\n        function isDirectionBackward(dir) {\n            return (typeof dir == \"string\") ? /^backward(s)?$/i.test(dir) : !!dir;\n        }\n\n        function getWindow(win, methodName) {\n            if (!win) {\n                return window;\n            } else if (dom.isWindow(win)) {\n                return win;\n            } else if (win instanceof WrappedSelection) {\n                return win.win;\n            } else {\n                var doc = dom.getContentDocument(win, module, methodName);\n                return dom.getWindow(doc);\n            }\n        }\n\n        function getWinSelection(winParam) {\n            return getWindow(winParam, \"getWinSelection\").getSelection();\n        }\n\n        function getDocSelection(winParam) {\n            return getWindow(winParam, \"getDocSelection\").document.selection;\n        }\n\n        function winSelectionIsBackward(sel) {\n            var backward = false;\n            if (sel.anchorNode) {\n                backward = (dom.comparePoints(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset) == 1);\n            }\n            return backward;\n        }\n\n        // Test for the Range/TextRange and Selection features required\n        // Test for ability to retrieve selection\n        var implementsWinGetSelection = isHostMethod(window, \"getSelection\"),\n            implementsDocSelection = util.isHostObject(document, \"selection\");\n\n        features.implementsWinGetSelection = implementsWinGetSelection;\n        features.implementsDocSelection = implementsDocSelection;\n\n        var useDocumentSelection = implementsDocSelection && (!implementsWinGetSelection || api.config.preferTextRange);\n\n        if (useDocumentSelection) {\n            getNativeSelection = getDocSelection;\n            api.isSelectionValid = function(winParam) {\n                var doc = getWindow(winParam, \"isSelectionValid\").document, nativeSel = doc.selection;\n\n                // Check whether the selection TextRange is actually contained within the correct document\n                return (nativeSel.type != \"None\" || getDocument(nativeSel.createRange().parentElement()) == doc);\n            };\n        } else if (implementsWinGetSelection) {\n            getNativeSelection = getWinSelection;\n            api.isSelectionValid = function() {\n                return true;\n            };\n        } else {\n            module.fail(\"Neither document.selection or window.getSelection() detected.\");\n            return false;\n        }\n\n        api.getNativeSelection = getNativeSelection;\n\n        var testSelection = getNativeSelection();\n\n        // In Firefox, the selection is null in an iframe with display: none. See issue #138.\n        if (!testSelection) {\n            module.fail(\"Native selection was null (possibly issue 138?)\");\n            return false;\n        }\n\n        var testRange = api.createNativeRange(document);\n        var body = getBody(document);\n\n        // Obtaining a range from a selection\n        var selectionHasAnchorAndFocus = util.areHostProperties(testSelection,\n            [\"anchorNode\", \"focusNode\", \"anchorOffset\", \"focusOffset\"]);\n\n        features.selectionHasAnchorAndFocus = selectionHasAnchorAndFocus;\n\n        // Test for existence of native selection extend() method\n        var selectionHasExtend = isHostMethod(testSelection, \"extend\");\n        features.selectionHasExtend = selectionHasExtend;\n\n        // Test if rangeCount exists\n        var selectionHasRangeCount = (typeof testSelection.rangeCount == NUMBER);\n        features.selectionHasRangeCount = selectionHasRangeCount;\n\n        var selectionSupportsMultipleRanges = false;\n        var collapsedNonEditableSelectionsSupported = true;\n\n        var addRangeBackwardToNative = selectionHasExtend ?\n            function(nativeSelection, range) {\n                var doc = DomRange.getRangeDocument(range);\n                var endRange = api.createRange(doc);\n                endRange.collapseToPoint(range.endContainer, range.endOffset);\n                nativeSelection.addRange(getNativeRange(endRange));\n                nativeSelection.extend(range.startContainer, range.startOffset);\n            } : null;\n\n        if (util.areHostMethods(testSelection, [\"addRange\", \"getRangeAt\", \"removeAllRanges\"]) &&\n                typeof testSelection.rangeCount == NUMBER && features.implementsDomRange) {\n\n            (function() {\n                // Previously an iframe was used but this caused problems in some circumstances in IE, so tests are\n                // performed on the current document's selection. See issue 109.\n\n                // Note also that if a selection previously existed, it is wiped and later restored by these tests. This\n                // will result in the selection direction begin reversed if the original selection was backwards and the\n                // browser does not support setting backwards selections (Internet Explorer, I'm looking at you).\n                var sel = window.getSelection();\n                if (sel) {\n                    // Store the current selection\n                    var originalSelectionRangeCount = sel.rangeCount;\n                    var selectionHasMultipleRanges = (originalSelectionRangeCount > 1);\n                    var originalSelectionRanges = [];\n                    var originalSelectionBackward = winSelectionIsBackward(sel);\n                    for (var i = 0; i < originalSelectionRangeCount; ++i) {\n                        originalSelectionRanges[i] = sel.getRangeAt(i);\n                    }\n\n                    // Create some test elements\n                    var testEl = dom.createTestElement(document, \"\", false);\n                    var textNode = testEl.appendChild( document.createTextNode(\"\\u00a0\\u00a0\\u00a0\") );\n\n                    // Test whether the native selection will allow a collapsed selection within a non-editable element\n                    var r1 = document.createRange();\n\n                    r1.setStart(textNode, 1);\n                    r1.collapse(true);\n                    sel.removeAllRanges();\n                    sel.addRange(r1);\n                    collapsedNonEditableSelectionsSupported = (sel.rangeCount == 1);\n                    sel.removeAllRanges();\n\n                    // Test whether the native selection is capable of supporting multiple ranges.\n                    if (!selectionHasMultipleRanges) {\n                        // Doing the original feature test here in Chrome 36 (and presumably later versions) prints a\n                        // console error of \"Discontiguous selection is not supported.\" that cannot be suppressed. There's\n                        // nothing we can do about this while retaining the feature test so we have to resort to a browser\n                        // sniff. I'm not happy about it. See\n                        // https://code.google.com/p/chromium/issues/detail?id=399791\n                        var chromeMatch = window.navigator.appVersion.match(/Chrome\\/(.*?) /);\n                        if (chromeMatch && parseInt(chromeMatch[1]) >= 36) {\n                            selectionSupportsMultipleRanges = false;\n                        } else {\n                            var r2 = r1.cloneRange();\n                            r1.setStart(textNode, 0);\n                            r2.setEnd(textNode, 3);\n                            r2.setStart(textNode, 2);\n                            sel.addRange(r1);\n                            sel.addRange(r2);\n                            selectionSupportsMultipleRanges = (sel.rangeCount == 2);\n                        }\n                    }\n\n                    // Clean up\n                    dom.removeNode(testEl);\n                    sel.removeAllRanges();\n\n                    for (i = 0; i < originalSelectionRangeCount; ++i) {\n                        if (i == 0 && originalSelectionBackward) {\n                            if (addRangeBackwardToNative) {\n                                addRangeBackwardToNative(sel, originalSelectionRanges[i]);\n                            } else {\n                                api.warn(\"Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend\");\n                                sel.addRange(originalSelectionRanges[i]);\n                            }\n                        } else {\n                            sel.addRange(originalSelectionRanges[i]);\n                        }\n                    }\n                }\n            })();\n        }\n\n        features.selectionSupportsMultipleRanges = selectionSupportsMultipleRanges;\n        features.collapsedNonEditableSelectionsSupported = collapsedNonEditableSelectionsSupported;\n\n        // ControlRanges\n        var implementsControlRange = false, testControlRange;\n\n        if (body && isHostMethod(body, \"createControlRange\")) {\n            testControlRange = body.createControlRange();\n            if (util.areHostProperties(testControlRange, [\"item\", \"add\"])) {\n                implementsControlRange = true;\n            }\n        }\n        features.implementsControlRange = implementsControlRange;\n\n        // Selection collapsedness\n        if (selectionHasAnchorAndFocus) {\n            selectionIsCollapsed = function(sel) {\n                return sel.anchorNode === sel.focusNode && sel.anchorOffset === sel.focusOffset;\n            };\n        } else {\n            selectionIsCollapsed = function(sel) {\n                return sel.rangeCount ? sel.getRangeAt(sel.rangeCount - 1).collapsed : false;\n            };\n        }\n\n        function updateAnchorAndFocusFromRange(sel, range, backward) {\n            var anchorPrefix = backward ? \"end\" : \"start\", focusPrefix = backward ? \"start\" : \"end\";\n            sel.anchorNode = range[anchorPrefix + \"Container\"];\n            sel.anchorOffset = range[anchorPrefix + \"Offset\"];\n            sel.focusNode = range[focusPrefix + \"Container\"];\n            sel.focusOffset = range[focusPrefix + \"Offset\"];\n        }\n\n        function updateAnchorAndFocusFromNativeSelection(sel) {\n            var nativeSel = sel.nativeSelection;\n            sel.anchorNode = nativeSel.anchorNode;\n            sel.anchorOffset = nativeSel.anchorOffset;\n            sel.focusNode = nativeSel.focusNode;\n            sel.focusOffset = nativeSel.focusOffset;\n        }\n\n        function updateEmptySelection(sel) {\n            sel.anchorNode = sel.focusNode = null;\n            sel.anchorOffset = sel.focusOffset = 0;\n            sel.rangeCount = 0;\n            sel.isCollapsed = true;\n            sel._ranges.length = 0;\n        }\n\n        function getNativeRange(range) {\n            var nativeRange;\n            if (range instanceof DomRange) {\n                nativeRange = api.createNativeRange(range.getDocument());\n                nativeRange.setEnd(range.endContainer, range.endOffset);\n                nativeRange.setStart(range.startContainer, range.startOffset);\n            } else if (range instanceof WrappedRange) {\n                nativeRange = range.nativeRange;\n            } else if (features.implementsDomRange && (range instanceof dom.getWindow(range.startContainer).Range)) {\n                nativeRange = range;\n            }\n            return nativeRange;\n        }\n\n        function rangeContainsSingleElement(rangeNodes) {\n            if (!rangeNodes.length || rangeNodes[0].nodeType != 1) {\n                return false;\n            }\n            for (var i = 1, len = rangeNodes.length; i < len; ++i) {\n                if (!dom.isAncestorOf(rangeNodes[0], rangeNodes[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        function getSingleElementFromRange(range) {\n            var nodes = range.getNodes();\n            if (!rangeContainsSingleElement(nodes)) {\n                throw module.createError(\"getSingleElementFromRange: range \" + range.inspect() + \" did not consist of a single element\");\n            }\n            return nodes[0];\n        }\n\n        // Simple, quick test which only needs to distinguish between a TextRange and a ControlRange\n        function isTextRange(range) {\n            return !!range && typeof range.text != \"undefined\";\n        }\n\n        function updateFromTextRange(sel, range) {\n            // Create a Range from the selected TextRange\n            var wrappedRange = new WrappedRange(range);\n            sel._ranges = [wrappedRange];\n\n            updateAnchorAndFocusFromRange(sel, wrappedRange, false);\n            sel.rangeCount = 1;\n            sel.isCollapsed = wrappedRange.collapsed;\n        }\n\n        function updateControlSelection(sel) {\n            // Update the wrapped selection based on what's now in the native selection\n            sel._ranges.length = 0;\n            if (sel.docSelection.type == \"None\") {\n                updateEmptySelection(sel);\n            } else {\n                var controlRange = sel.docSelection.createRange();\n                if (isTextRange(controlRange)) {\n                    // This case (where the selection type is \"Control\" and calling createRange() on the selection returns\n                    // a TextRange) can happen in IE 9. It happens, for example, when all elements in the selected\n                    // ControlRange have been removed from the ControlRange and removed from the document.\n                    updateFromTextRange(sel, controlRange);\n                } else {\n                    sel.rangeCount = controlRange.length;\n                    var range, doc = getDocument(controlRange.item(0));\n                    for (var i = 0; i < sel.rangeCount; ++i) {\n                        range = api.createRange(doc);\n                        range.selectNode(controlRange.item(i));\n                        sel._ranges.push(range);\n                    }\n                    sel.isCollapsed = sel.rangeCount == 1 && sel._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], false);\n                }\n            }\n        }\n\n        function addRangeToControlSelection(sel, range) {\n            var controlRange = sel.docSelection.createRange();\n            var rangeElement = getSingleElementFromRange(range);\n\n            // Create a new ControlRange containing all the elements in the selected ControlRange plus the element\n            // contained by the supplied range\n            var doc = getDocument(controlRange.item(0));\n            var newControlRange = getBody(doc).createControlRange();\n            for (var i = 0, len = controlRange.length; i < len; ++i) {\n                newControlRange.add(controlRange.item(i));\n            }\n            try {\n                newControlRange.add(rangeElement);\n            } catch (ex) {\n                throw module.createError(\"addRange(): Element within the specified Range could not be added to control selection (does it have layout?)\");\n            }\n            newControlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        var getSelectionRangeAt;\n\n        if (isHostMethod(testSelection, \"getRangeAt\")) {\n            // try/catch is present because getRangeAt() must have thrown an error in some browser and some situation.\n            // Unfortunately, I didn't write a comment about the specifics and am now scared to take it out. Let that be a\n            // lesson to us all, especially me.\n            getSelectionRangeAt = function(sel, index) {\n                try {\n                    return sel.getRangeAt(index);\n                } catch (ex) {\n                    return null;\n                }\n            };\n        } else if (selectionHasAnchorAndFocus) {\n            getSelectionRangeAt = function(sel) {\n                var doc = getDocument(sel.anchorNode);\n                var range = api.createRange(doc);\n                range.setStartAndEnd(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset);\n\n                // Handle the case when the selection was selected backwards (from the end to the start in the\n                // document)\n                if (range.collapsed !== this.isCollapsed) {\n                    range.setStartAndEnd(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset);\n                }\n\n                return range;\n            };\n        }\n\n        function WrappedSelection(selection, docSelection, win) {\n            this.nativeSelection = selection;\n            this.docSelection = docSelection;\n            this._ranges = [];\n            this.win = win;\n            this.refresh();\n        }\n\n        WrappedSelection.prototype = api.selectionPrototype;\n\n        function deleteProperties(sel) {\n            sel.win = sel.anchorNode = sel.focusNode = sel._ranges = null;\n            sel.rangeCount = sel.anchorOffset = sel.focusOffset = 0;\n            sel.detached = true;\n        }\n\n        var cachedRangySelections = [];\n\n        function actOnCachedSelection(win, action) {\n            var i = cachedRangySelections.length, cached, sel;\n            while (i--) {\n                cached = cachedRangySelections[i];\n                sel = cached.selection;\n                if (action == \"deleteAll\") {\n                    deleteProperties(sel);\n                } else if (cached.win == win) {\n                    if (action == \"delete\") {\n                        cachedRangySelections.splice(i, 1);\n                        return true;\n                    } else {\n                        return sel;\n                    }\n                }\n            }\n            if (action == \"deleteAll\") {\n                cachedRangySelections.length = 0;\n            }\n            return null;\n        }\n\n        var getSelection = function(win) {\n            // Check if the parameter is a Rangy Selection object\n            if (win && win instanceof WrappedSelection) {\n                win.refresh();\n                return win;\n            }\n\n            win = getWindow(win, \"getNativeSelection\");\n\n            var sel = actOnCachedSelection(win);\n            var nativeSel = getNativeSelection(win), docSel = implementsDocSelection ? getDocSelection(win) : null;\n            if (sel) {\n                sel.nativeSelection = nativeSel;\n                sel.docSelection = docSel;\n                sel.refresh();\n            } else {\n                sel = new WrappedSelection(nativeSel, docSel, win);\n                cachedRangySelections.push( { win: win, selection: sel } );\n            }\n            return sel;\n        };\n\n        api.getSelection = getSelection;\n\n        util.createAliasForDeprecatedMethod(api, \"getIframeSelection\", \"getSelection\");\n\n        var selProto = WrappedSelection.prototype;\n\n        function createControlSelection(sel, ranges) {\n            // Ensure that the selection becomes of type \"Control\"\n            var doc = getDocument(ranges[0].startContainer);\n            var controlRange = getBody(doc).createControlRange();\n            for (var i = 0, el, len = ranges.length; i < len; ++i) {\n                el = getSingleElementFromRange(ranges[i]);\n                try {\n                    controlRange.add(el);\n                } catch (ex) {\n                    throw module.createError(\"setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)\");\n                }\n            }\n            controlRange.select();\n\n            // Update the wrapped selection based on what's now in the native selection\n            updateControlSelection(sel);\n        }\n\n        // Selecting a range\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && util.areHostMethods(testSelection, [\"removeAllRanges\", \"addRange\"])) {\n            selProto.removeAllRanges = function() {\n                this.nativeSelection.removeAllRanges();\n                updateEmptySelection(this);\n            };\n\n            var addRangeBackward = function(sel, range) {\n                addRangeBackwardToNative(sel.nativeSelection, range);\n                sel.refresh();\n            };\n\n            if (selectionHasRangeCount) {\n                selProto.addRange = function(range, direction) {\n                    if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                        addRangeToControlSelection(this, range);\n                    } else {\n                        if (isDirectionBackward(direction) && selectionHasExtend) {\n                            addRangeBackward(this, range);\n                        } else {\n                            var previousRangeCount;\n                            if (selectionSupportsMultipleRanges) {\n                                previousRangeCount = this.rangeCount;\n                            } else {\n                                this.removeAllRanges();\n                                previousRangeCount = 0;\n                            }\n                            // Clone the native range so that changing the selected range does not affect the selection.\n                            // This is contrary to the spec but is the only way to achieve consistency between browsers. See\n                            // issue 80.\n                            var clonedNativeRange = getNativeRange(range).cloneRange();\n                            try {\n                                this.nativeSelection.addRange(clonedNativeRange);\n                            } catch (ex) {\n                            }\n\n                            // Check whether adding the range was successful\n                            this.rangeCount = this.nativeSelection.rangeCount;\n\n                            if (this.rangeCount == previousRangeCount + 1) {\n                                // The range was added successfully\n\n                                // Check whether the range that we added to the selection is reflected in the last range extracted from\n                                // the selection\n                                if (api.config.checkSelectionRanges) {\n                                    var nativeRange = getSelectionRangeAt(this.nativeSelection, this.rangeCount - 1);\n                                    if (nativeRange && !rangesEqual(nativeRange, range)) {\n                                        // Happens in WebKit with, for example, a selection placed at the start of a text node\n                                        range = new WrappedRange(nativeRange);\n                                    }\n                                }\n                                this._ranges[this.rangeCount - 1] = range;\n                                updateAnchorAndFocusFromRange(this, range, selectionIsBackward(this.nativeSelection));\n                                this.isCollapsed = selectionIsCollapsed(this);\n                            } else {\n                                // The range was not added successfully. The simplest thing is to refresh\n                                this.refresh();\n                            }\n                        }\n                    }\n                };\n            } else {\n                selProto.addRange = function(range, direction) {\n                    if (isDirectionBackward(direction) && selectionHasExtend) {\n                        addRangeBackward(this, range);\n                    } else {\n                        this.nativeSelection.addRange(getNativeRange(range));\n                        this.refresh();\n                    }\n                };\n            }\n\n            selProto.setRanges = function(ranges) {\n                if (implementsControlRange && implementsDocSelection && ranges.length > 1) {\n                    createControlSelection(this, ranges);\n                } else {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        this.addRange(ranges[i]);\n                    }\n                }\n            };\n        } else if (isHostMethod(testSelection, \"empty\") && isHostMethod(testRange, \"select\") &&\n                   implementsControlRange && useDocumentSelection) {\n\n            selProto.removeAllRanges = function() {\n                // Added try/catch as fix for issue #21\n                try {\n                    this.docSelection.empty();\n\n                    // Check for empty() not working (issue #24)\n                    if (this.docSelection.type != \"None\") {\n                        // Work around failure to empty a control selection by instead selecting a TextRange and then\n                        // calling empty()\n                        var doc;\n                        if (this.anchorNode) {\n                            doc = getDocument(this.anchorNode);\n                        } else if (this.docSelection.type == CONTROL) {\n                            var controlRange = this.docSelection.createRange();\n                            if (controlRange.length) {\n                                doc = getDocument( controlRange.item(0) );\n                            }\n                        }\n                        if (doc) {\n                            var textRange = getBody(doc).createTextRange();\n                            textRange.select();\n                            this.docSelection.empty();\n                        }\n                    }\n                } catch(ex) {}\n                updateEmptySelection(this);\n            };\n\n            selProto.addRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    addRangeToControlSelection(this, range);\n                } else {\n                    api.WrappedTextRange.rangeToTextRange(range).select();\n                    this._ranges[0] = range;\n                    this.rangeCount = 1;\n                    this.isCollapsed = this._ranges[0].collapsed;\n                    updateAnchorAndFocusFromRange(this, range, false);\n                }\n            };\n\n            selProto.setRanges = function(ranges) {\n                this.removeAllRanges();\n                var rangeCount = ranges.length;\n                if (rangeCount > 1) {\n                    createControlSelection(this, ranges);\n                } else if (rangeCount) {\n                    this.addRange(ranges[0]);\n                }\n            };\n        } else {\n            module.fail(\"No means of selecting a Range or TextRange was found\");\n            return false;\n        }\n\n        selProto.getRangeAt = function(index) {\n            if (index < 0 || index >= this.rangeCount) {\n                throw new DOMException(\"INDEX_SIZE_ERR\");\n            } else {\n                // Clone the range to preserve selection-range independence. See issue 80.\n                return this._ranges[index].cloneRange();\n            }\n        };\n\n        var refreshSelection;\n\n        if (useDocumentSelection) {\n            refreshSelection = function(sel) {\n                var range;\n                if (api.isSelectionValid(sel.win)) {\n                    range = sel.docSelection.createRange();\n                } else {\n                    range = getBody(sel.win.document).createTextRange();\n                    range.collapse(true);\n                }\n\n                if (sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else if (isTextRange(range)) {\n                    updateFromTextRange(sel, range);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else if (isHostMethod(testSelection, \"getRangeAt\") && typeof testSelection.rangeCount == NUMBER) {\n            refreshSelection = function(sel) {\n                if (implementsControlRange && implementsDocSelection && sel.docSelection.type == CONTROL) {\n                    updateControlSelection(sel);\n                } else {\n                    sel._ranges.length = sel.rangeCount = sel.nativeSelection.rangeCount;\n                    if (sel.rangeCount) {\n                        for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                            sel._ranges[i] = new api.WrappedRange(sel.nativeSelection.getRangeAt(i));\n                        }\n                        updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], selectionIsBackward(sel.nativeSelection));\n                        sel.isCollapsed = selectionIsCollapsed(sel);\n                    } else {\n                        updateEmptySelection(sel);\n                    }\n                }\n            };\n        } else if (selectionHasAnchorAndFocus && typeof testSelection.isCollapsed == BOOLEAN && typeof testRange.collapsed == BOOLEAN && features.implementsDomRange) {\n            refreshSelection = function(sel) {\n                var range, nativeSel = sel.nativeSelection;\n                if (nativeSel.anchorNode) {\n                    range = getSelectionRangeAt(nativeSel, 0);\n                    sel._ranges = [range];\n                    sel.rangeCount = 1;\n                    updateAnchorAndFocusFromNativeSelection(sel);\n                    sel.isCollapsed = selectionIsCollapsed(sel);\n                } else {\n                    updateEmptySelection(sel);\n                }\n            };\n        } else {\n            module.fail(\"No means of obtaining a Range or TextRange from the user's selection was found\");\n            return false;\n        }\n\n        selProto.refresh = function(checkForChanges) {\n            var oldRanges = checkForChanges ? this._ranges.slice(0) : null;\n            var oldAnchorNode = this.anchorNode, oldAnchorOffset = this.anchorOffset;\n\n            refreshSelection(this);\n            if (checkForChanges) {\n                // Check the range count first\n                var i = oldRanges.length;\n                if (i != this._ranges.length) {\n                    return true;\n                }\n\n                // Now check the direction. Checking the anchor position is the same is enough since we're checking all the\n                // ranges after this\n                if (this.anchorNode != oldAnchorNode || this.anchorOffset != oldAnchorOffset) {\n                    return true;\n                }\n\n                // Finally, compare each range in turn\n                while (i--) {\n                    if (!rangesEqual(oldRanges[i], this._ranges[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        };\n\n        // Removal of a single range\n        var removeRangeManually = function(sel, range) {\n            var ranges = sel.getAllRanges();\n            sel.removeAllRanges();\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                if (!rangesEqual(range, ranges[i])) {\n                    sel.addRange(ranges[i]);\n                }\n            }\n            if (!sel.rangeCount) {\n                updateEmptySelection(sel);\n            }\n        };\n\n        if (implementsControlRange && implementsDocSelection) {\n            selProto.removeRange = function(range) {\n                if (this.docSelection.type == CONTROL) {\n                    var controlRange = this.docSelection.createRange();\n                    var rangeElement = getSingleElementFromRange(range);\n\n                    // Create a new ControlRange containing all the elements in the selected ControlRange minus the\n                    // element contained by the supplied range\n                    var doc = getDocument(controlRange.item(0));\n                    var newControlRange = getBody(doc).createControlRange();\n                    var el, removed = false;\n                    for (var i = 0, len = controlRange.length; i < len; ++i) {\n                        el = controlRange.item(i);\n                        if (el !== rangeElement || removed) {\n                            newControlRange.add(controlRange.item(i));\n                        } else {\n                            removed = true;\n                        }\n                    }\n                    newControlRange.select();\n\n                    // Update the wrapped selection based on what's now in the native selection\n                    updateControlSelection(this);\n                } else {\n                    removeRangeManually(this, range);\n                }\n            };\n        } else {\n            selProto.removeRange = function(range) {\n                removeRangeManually(this, range);\n            };\n        }\n\n        // Detecting if a selection is backward\n        var selectionIsBackward;\n        if (!useDocumentSelection && selectionHasAnchorAndFocus && features.implementsDomRange) {\n            selectionIsBackward = winSelectionIsBackward;\n\n            selProto.isBackward = function() {\n                return selectionIsBackward(this);\n            };\n        } else {\n            selectionIsBackward = selProto.isBackward = function() {\n                return false;\n            };\n        }\n\n        // Create an alias for backwards compatibility. From 1.3, everything is \"backward\" rather than \"backwards\"\n        selProto.isBackwards = selProto.isBackward;\n\n        // Selection stringifier\n        // This is conformant to the old HTML5 selections draft spec but differs from WebKit and Mozilla's implementation.\n        // The current spec does not yet define this method.\n        selProto.toString = function() {\n            var rangeTexts = [];\n            for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                rangeTexts[i] = \"\" + this._ranges[i];\n            }\n            return rangeTexts.join(\"\");\n        };\n\n        function assertNodeInSameDocument(sel, node) {\n            if (sel.win.document != getDocument(node)) {\n                throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n            }\n        }\n\n        // No current browser conforms fully to the spec for this method, so Rangy's own method is always used\n        selProto.collapse = function(node, offset) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.collapseToPoint(node, offset);\n            this.setSingleRange(range);\n            this.isCollapsed = true;\n        };\n\n        selProto.collapseToStart = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[0];\n                this.collapse(range.startContainer, range.startOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        selProto.collapseToEnd = function() {\n            if (this.rangeCount) {\n                var range = this._ranges[this.rangeCount - 1];\n                this.collapse(range.endContainer, range.endOffset);\n            } else {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n        };\n\n        // The spec is very specific on how selectAllChildren should be implemented and not all browsers implement it as\n        // specified so the native implementation is never used by Rangy.\n        selProto.selectAllChildren = function(node) {\n            assertNodeInSameDocument(this, node);\n            var range = api.createRange(node);\n            range.selectNodeContents(node);\n            this.setSingleRange(range);\n        };\n\n        selProto.deleteFromDocument = function() {\n            // Sepcial behaviour required for IE's control selections\n            if (implementsControlRange && implementsDocSelection && this.docSelection.type == CONTROL) {\n                var controlRange = this.docSelection.createRange();\n                var element;\n                while (controlRange.length) {\n                    element = controlRange.item(0);\n                    controlRange.remove(element);\n                    dom.removeNode(element);\n                }\n                this.refresh();\n            } else if (this.rangeCount) {\n                var ranges = this.getAllRanges();\n                if (ranges.length) {\n                    this.removeAllRanges();\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        ranges[i].deleteContents();\n                    }\n                    // The spec says nothing about what the selection should contain after calling deleteContents on each\n                    // range. Firefox moves the selection to where the final selected range was, so we emulate that\n                    this.addRange(ranges[len - 1]);\n                }\n            }\n        };\n\n        // The following are non-standard extensions\n        selProto.eachRange = function(func, returnValue) {\n            for (var i = 0, len = this._ranges.length; i < len; ++i) {\n                if ( func( this.getRangeAt(i) ) ) {\n                    return returnValue;\n                }\n            }\n        };\n\n        selProto.getAllRanges = function() {\n            var ranges = [];\n            this.eachRange(function(range) {\n                ranges.push(range);\n            });\n            return ranges;\n        };\n\n        selProto.setSingleRange = function(range, direction) {\n            this.removeAllRanges();\n            this.addRange(range, direction);\n        };\n\n        selProto.callMethodOnEachRange = function(methodName, params) {\n            var results = [];\n            this.eachRange( function(range) {\n                results.push( range[methodName].apply(range, params || []) );\n            } );\n            return results;\n        };\n\n        function createStartOrEndSetter(isStart) {\n            return function(node, offset) {\n                var range;\n                if (this.rangeCount) {\n                    range = this.getRangeAt(0);\n                    range[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n                } else {\n                    range = api.createRange(this.win.document);\n                    range.setStartAndEnd(node, offset);\n                }\n                this.setSingleRange(range, this.isBackward());\n            };\n        }\n\n        selProto.setStart = createStartOrEndSetter(true);\n        selProto.setEnd = createStartOrEndSetter(false);\n\n        // Add select() method to Range prototype. Any existing selection will be removed.\n        api.rangePrototype.select = function(direction) {\n            getSelection( this.getDocument() ).setSingleRange(this, direction);\n        };\n\n        selProto.changeEachRange = function(func) {\n            var ranges = [];\n            var backward = this.isBackward();\n\n            this.eachRange(function(range) {\n                func(range);\n                ranges.push(range);\n            });\n\n            this.removeAllRanges();\n            if (backward && ranges.length == 1) {\n                this.addRange(ranges[0], \"backward\");\n            } else {\n                this.setRanges(ranges);\n            }\n        };\n\n        selProto.containsNode = function(node, allowPartial) {\n            return this.eachRange( function(range) {\n                return range.containsNode(node, allowPartial);\n            }, true ) || false;\n        };\n\n        selProto.getBookmark = function(containerNode) {\n            return {\n                backward: this.isBackward(),\n                rangeBookmarks: this.callMethodOnEachRange(\"getBookmark\", [containerNode])\n            };\n        };\n\n        selProto.moveToBookmark = function(bookmark) {\n            var selRanges = [];\n            for (var i = 0, rangeBookmark, range; rangeBookmark = bookmark.rangeBookmarks[i++]; ) {\n                range = api.createRange(this.win);\n                range.moveToBookmark(rangeBookmark);\n                selRanges.push(range);\n            }\n            if (bookmark.backward) {\n                this.setSingleRange(selRanges[0], \"backward\");\n            } else {\n                this.setRanges(selRanges);\n            }\n        };\n\n        selProto.saveRanges = function() {\n            return {\n                backward: this.isBackward(),\n                ranges: this.callMethodOnEachRange(\"cloneRange\")\n            };\n        };\n\n        selProto.restoreRanges = function(selRanges) {\n            this.removeAllRanges();\n            for (var i = 0, range; range = selRanges.ranges[i]; ++i) {\n                this.addRange(range, (selRanges.backward && i == 0));\n            }\n        };\n\n        selProto.toHtml = function() {\n            var rangeHtmls = [];\n            this.eachRange(function(range) {\n                rangeHtmls.push( DomRange.toHtml(range) );\n            });\n            return rangeHtmls.join(\"\");\n        };\n\n        if (features.implementsTextRange) {\n            selProto.getNativeTextRange = function() {\n                var sel, textRange;\n                if ( (sel = this.docSelection) ) {\n                    var range = sel.createRange();\n                    if (isTextRange(range)) {\n                        return range;\n                    } else {\n                        throw module.createError(\"getNativeTextRange: selection is a control selection\");\n                    }\n                } else if (this.rangeCount > 0) {\n                    return api.WrappedTextRange.rangeToTextRange( this.getRangeAt(0) );\n                } else {\n                    throw module.createError(\"getNativeTextRange: selection contains no range\");\n                }\n            };\n        }\n\n        function inspect(sel) {\n            var rangeInspects = [];\n            var anchor = new DomPosition(sel.anchorNode, sel.anchorOffset);\n            var focus = new DomPosition(sel.focusNode, sel.focusOffset);\n            var name = (typeof sel.getName == \"function\") ? sel.getName() : \"Selection\";\n\n            if (typeof sel.rangeCount != \"undefined\") {\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                    rangeInspects[i] = DomRange.inspect(sel.getRangeAt(i));\n                }\n            }\n            return \"[\" + name + \"(Ranges: \" + rangeInspects.join(\", \") +\n                    \")(anchor: \" + anchor.inspect() + \", focus: \" + focus.inspect() + \"]\";\n        }\n\n        selProto.getName = function() {\n            return \"WrappedSelection\";\n        };\n\n        selProto.inspect = function() {\n            return inspect(this);\n        };\n\n        selProto.detach = function() {\n            actOnCachedSelection(this.win, \"delete\");\n            deleteProperties(this);\n        };\n\n        WrappedSelection.detachAll = function() {\n            actOnCachedSelection(null, \"deleteAll\");\n        };\n\n        WrappedSelection.inspect = inspect;\n        WrappedSelection.isDirectionBackward = isDirectionBackward;\n\n        api.Selection = WrappedSelection;\n\n        api.selectionPrototype = selProto;\n\n        api.addShimListener(function(win) {\n            if (typeof win.getSelection == \"undefined\") {\n                win.getSelection = function() {\n                    return getSelection(win);\n                };\n            }\n            win = null;\n        });\n    });\n    \n\n    /*----------------------------------------------------------------------------------------------------------------*/\n\n    // Wait for document to load before initializing\n    var docReady = false;\n\n    var loadHandler = function(e) {\n        if (!docReady) {\n            docReady = true;\n            if (!api.initialized && api.config.autoInitialize) {\n                init();\n            }\n        }\n    };\n\n    if (isBrowser) {\n        // Test whether the document has already been loaded and initialize immediately if so\n        if (document.readyState == \"complete\") {\n            loadHandler();\n        } else {\n            if (isHostMethod(document, \"addEventListener\")) {\n                document.addEventListener(\"DOMContentLoaded\", loadHandler, false);\n            }\n\n            // Add a fallback in case the DOMContentLoaded event isn't supported\n            addListener(window, \"load\", loadHandler);\n        }\n    }\n\n    //return api;\nexport default api","/**\n * Highlighter module for Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core, ClassApplier and optionally TextRange modules.\n *\n * Copyright 2015, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.1-dev\n * Build date: 20 May 2015\n */\nexport default (rangy) => {\n    rangy.createModule(\"Highlighter\", [\"ClassApplier\"], function(api, module) {\n        var dom = api.dom;\n        var contains = dom.arrayContains;\n        var getBody = dom.getBody;\n        var createOptions = api.util.createOptions;\n        var forEach = api.util.forEach;\n        var nextHighlightId = 1;\n\n        // Puts highlights in order, last in document first.\n        function compareHighlights(h1, h2) {\n            return h1.characterRange.start - h2.characterRange.start;\n        }\n\n        function getContainerElement(doc, id) {\n            return id ? doc.getElementById(id) : getBody(doc);\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var highlighterTypes = {};\n\n        function HighlighterType(type, converterCreator) {\n            this.type = type;\n            this.converterCreator = converterCreator;\n        }\n\n        HighlighterType.prototype.create = function() {\n            var converter = this.converterCreator();\n            converter.type = this.type;\n            return converter;\n        };\n\n        function registerHighlighterType(type, converterCreator) {\n            highlighterTypes[type] = new HighlighterType(type, converterCreator);\n        }\n\n        function getConverter(type) {\n            var highlighterType = highlighterTypes[type];\n            if (highlighterType instanceof HighlighterType) {\n                return highlighterType.create();\n            } else {\n                throw new Error(\"Highlighter type '\" + type + \"' is not valid\");\n            }\n        }\n\n        api.registerHighlighterType = registerHighlighterType;\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function CharacterRange(start, end) {\n            this.start = start;\n            this.end = end;\n        }\n\n        CharacterRange.prototype = {\n            intersects: function(charRange) {\n                return this.start < charRange.end && this.end > charRange.start;\n            },\n\n            isContiguousWith: function(charRange) {\n                return this.start == charRange.end || this.end == charRange.start;\n            },\n\n            union: function(charRange) {\n                return new CharacterRange(Math.min(this.start, charRange.start), Math.max(this.end, charRange.end));\n            },\n\n            intersection: function(charRange) {\n                return new CharacterRange(Math.max(this.start, charRange.start), Math.min(this.end, charRange.end));\n            },\n\n            getComplements: function(charRange) {\n                var ranges = [];\n                if (this.start >= charRange.start) {\n                    if (this.end <= charRange.end) {\n                        return [];\n                    }\n                    ranges.push(new CharacterRange(charRange.end, this.end));\n                } else {\n                    ranges.push(new CharacterRange(this.start, Math.min(this.end, charRange.start)));\n                    if (this.end > charRange.end) {\n                        ranges.push(new CharacterRange(charRange.end, this.end));\n                    }\n                }\n                return ranges;\n            },\n\n            toString: function() {\n                return \"[CharacterRange(\" + this.start + \", \" + this.end + \")]\";\n            }\n        };\n\n        CharacterRange.fromCharacterRange = function(charRange) {\n            return new CharacterRange(charRange.start, charRange.end);\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var textContentConverter = {\n            rangeToCharacterRange: function(range, containerNode) {\n                var bookmark = range.getBookmark(containerNode);\n                return new CharacterRange(bookmark.start, bookmark.end);\n            },\n\n            characterRangeToRange: function(doc, characterRange, containerNode) {\n                var range = api.createRange(doc);\n                range.moveToBookmark({\n                    start: characterRange.start,\n                    end: characterRange.end,\n                    containerNode: containerNode\n                });\n\n                return range;\n            },\n\n            serializeSelection: function(selection, containerNode) {\n                var ranges = selection.getAllRanges(), rangeCount = ranges.length;\n                var rangeInfos = [];\n\n                var backward = rangeCount === 1 && selection.isBackward();\n\n                for (var i = 0, len = ranges.length; i < len; ++i) {\n                    rangeInfos[i] = {\n                        characterRange: this.rangeToCharacterRange(ranges[i], containerNode),\n                        backward: backward\n                    };\n                }\n\n                return rangeInfos;\n            },\n\n            restoreSelection: function(selection, savedSelection, containerNode) {\n                selection.removeAllRanges();\n                var doc = selection.win.document;\n                for (var i = 0, len = savedSelection.length, range, rangeInfo, characterRange; i < len; ++i) {\n                    rangeInfo = savedSelection[i];\n                    characterRange = rangeInfo.characterRange;\n                    range = this.characterRangeToRange(doc, rangeInfo.characterRange, containerNode);\n                    selection.addRange(range, rangeInfo.backward);\n                }\n            }\n        };\n\n        registerHighlighterType(\"textContent\", function() {\n            return textContentConverter;\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Lazily load the TextRange-based converter so that the dependency is only checked when required.\n        registerHighlighterType(\"TextRange\", (function() {\n            var converter;\n\n            return function() {\n                if (!converter) {\n                    // Test that textRangeModule exists and is supported\n                    var textRangeModule = api.modules.TextRange;\n                    if (!textRangeModule) {\n                        throw new Error(\"TextRange module is missing.\");\n                    } else if (!textRangeModule.supported) {\n                        throw new Error(\"TextRange module is present but not supported.\");\n                    }\n\n                    converter = {\n                        rangeToCharacterRange: function(range, containerNode) {\n                            return CharacterRange.fromCharacterRange( range.toCharacterRange(containerNode) );\n                        },\n\n                        characterRangeToRange: function(doc, characterRange, containerNode) {\n                            var range = api.createRange(doc);\n                            range.selectCharacters(containerNode, characterRange.start, characterRange.end);\n                            return range;\n                        },\n\n                        serializeSelection: function(selection, containerNode) {\n                            return selection.saveCharacterRanges(containerNode);\n                        },\n\n                        restoreSelection: function(selection, savedSelection, containerNode) {\n                            selection.restoreCharacterRanges(containerNode, savedSelection);\n                        }\n                    };\n                }\n\n                return converter;\n            };\n        })());\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function Highlight(doc, characterRange, classApplier, converter, id, containerElementId) {\n            if (id) {\n                this.id = id;\n                nextHighlightId = Math.max(nextHighlightId, id + 1);\n            } else {\n                this.id = nextHighlightId++;\n            }\n            this.characterRange = characterRange;\n            this.doc = doc;\n            this.classApplier = classApplier;\n            this.converter = converter;\n            this.containerElementId = containerElementId || null;\n            this.applied = false;\n        }\n\n        Highlight.prototype = {\n            getContainerElement: function() {\n                return getContainerElement(this.doc, this.containerElementId);\n            },\n\n            getRange: function() {\n                return this.converter.characterRangeToRange(this.doc, this.characterRange, this.getContainerElement());\n            },\n\n            fromRange: function(range) {\n                this.characterRange = this.converter.rangeToCharacterRange(range, this.getContainerElement());\n            },\n\n            getText: function() {\n                return this.getRange().toString();\n            },\n\n            containsElement: function(el) {\n                return this.getRange().containsNodeContents(el.firstChild);\n            },\n\n            unapply: function() {\n                this.classApplier.undoToRange(this.getRange());\n                this.applied = false;\n            },\n\n            apply: function() {\n                this.classApplier.applyToRange(this.getRange());\n                this.applied = true;\n            },\n\n            getHighlightElements: function() {\n                return this.classApplier.getElementsWithClassIntersectingRange(this.getRange());\n            },\n\n            toString: function() {\n                return \"[Highlight(ID: \" + this.id + \", class: \" + this.classApplier.className + \", character range: \" +\n                    this.characterRange.start + \" - \" + this.characterRange.end + \")]\";\n            }\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function Highlighter(doc, type) {\n            type = type || \"textContent\";\n            this.doc = doc || document;\n            this.classAppliers = {};\n            this.highlights = [];\n            this.converter = getConverter(type);\n        }\n\n        Highlighter.prototype = {\n            addClassApplier: function(classApplier) {\n                this.classAppliers[classApplier.className] = classApplier;\n            },\n\n            getHighlightForElement: function(el) {\n                var highlights = this.highlights;\n                for (var i = 0, len = highlights.length; i < len; ++i) {\n                    if (highlights[i].containsElement(el)) {\n                        return highlights[i];\n                    }\n                }\n                return null;\n            },\n            \n            getHighlightsForElement: function(el) {\n                var highlights = this.highlights;\n                let match = []\n                for (var i = 0, len = highlights.length; i < len; ++i) {\n                    if (highlights[i].containsElement(el)) {\n                        match.push(highlights[i])\n                    }\n                }\n                return match;\n            },\n\n            removeHighlights: function(highlights) {\n                for (var i = 0, len = this.highlights.length, highlight; i < len; ++i) {\n                    highlight = this.highlights[i];\n                    if (contains(highlights, highlight)) {\n                        highlight.unapply();\n                        this.highlights.splice(i--, 1);\n                    }\n                }\n            },\n\n            removeAllHighlights: function() {\n                this.removeHighlights(this.highlights);\n            },\n\n            getIntersectingHighlights: function(ranges) {\n                // Test each range against each of the highlighted ranges to see whether they overlap\n                var intersectingHighlights = [], highlights = this.highlights;\n                forEach(ranges, function(range) {\n                    //var selCharRange = converter.rangeToCharacterRange(range);\n                    forEach(highlights, function(highlight) {\n                        if (range.intersectsRange( highlight.getRange() ) && !contains(intersectingHighlights, highlight)) {\n                            intersectingHighlights.push(highlight);\n                        }\n                    });\n                });\n\n                return intersectingHighlights;\n            },\n\n            highlightCharacterRanges: function(className, charRanges, options) {\n                var i, len, j;\n                var highlights = this.highlights;\n                var converter = this.converter;\n                var doc = this.doc;\n                var highlightsToRemove = [];\n                var classApplier = className ? this.classAppliers[className] : null;\n\n                options = createOptions(options, {\n                    containerElementId: null,\n                    exclusive: true\n                });\n\n                var containerElementId = options.containerElementId;\n                var exclusive = options.exclusive;\n\n                var containerElement, containerElementRange, containerElementCharRange;\n                if (containerElementId) {\n                    containerElement = this.doc.getElementById(containerElementId);\n                    if (containerElement) {\n                        containerElementRange = api.createRange(this.doc);\n                        containerElementRange.selectNodeContents(containerElement);\n                        containerElementCharRange = new CharacterRange(0, containerElementRange.toString().length);\n                    }\n                }\n\n                var charRange, highlightCharRange, removeHighlight, isSameClassApplier, highlightsToKeep, splitHighlight;\n\n                for (i = 0, len = charRanges.length; i < len; ++i) {\n                    charRange = charRanges[i];\n                    highlightsToKeep = [];\n\n                    // Restrict character range to container element, if it exists\n                    if (containerElementCharRange) {\n                        charRange = charRange.intersection(containerElementCharRange);\n                    }\n\n                    // Ignore empty ranges\n                    if (charRange.start === charRange.end) {\n                        continue;\n                    }\n\n                    // Check for intersection with existing highlights. For each intersection, create a new highlight\n                    // which is the union of the highlight range and the selected range\n                    for (j = 0; j < highlights.length; ++j) {\n                        removeHighlight = false;\n\n                        if (containerElementId === highlights[j].containerElementId) {\n                            highlightCharRange = highlights[j].characterRange;\n                            isSameClassApplier = (classApplier === highlights[j].classApplier);\n                            splitHighlight = !isSameClassApplier && exclusive;\n\n                            // Replace the existing highlight if it needs to be:\n                            //  1. merged (isSameClassApplier)\n                            //  2. partially or entirely erased (className === null)\n                            //  3. partially or entirely replaced (isSameClassApplier == false && exclusive == true)\n                            if (    (highlightCharRange.intersects(charRange) || highlightCharRange.isContiguousWith(charRange)) &&\n                                    (isSameClassApplier || splitHighlight) ) {\n\n                                // Remove existing highlights, keeping the unselected parts\n                                if (splitHighlight) {\n                                    forEach(highlightCharRange.getComplements(charRange), function(rangeToAdd) {\n                                        highlightsToKeep.push( new Highlight(doc, rangeToAdd, highlights[j].classApplier, converter, null, containerElementId) );\n                                    });\n                                }\n\n                                removeHighlight = true;\n                                if (isSameClassApplier) {\n                                    charRange = highlightCharRange.union(charRange);\n                                }\n                            }\n                        }\n\n                        if (removeHighlight) {\n                            highlightsToRemove.push(highlights[j]);\n                            highlights[j] = new Highlight(doc, highlightCharRange.union(charRange), classApplier, converter, null, containerElementId);\n                        } else {\n                            highlightsToKeep.push(highlights[j]);\n                        }\n                    }\n\n                    // Add new range\n                    if (classApplier) {\n                        highlightsToKeep.push(new Highlight(doc, charRange, classApplier, converter, null, containerElementId));\n                    }\n                    this.highlights = highlights = highlightsToKeep;\n                }\n\n                // Remove the old highlights\n                forEach(highlightsToRemove, function(highlightToRemove) {\n                    highlightToRemove.unapply();\n                });\n\n                // Apply new highlights\n                var newHighlights = [];\n                forEach(highlights, function(highlight) {\n                    if (!highlight.applied) {\n                        highlight.apply();\n                        newHighlights.push(highlight);\n                    }\n                });\n\n                return newHighlights;\n            },\n\n            highlightRanges: function(className, ranges, options) {\n                var selCharRanges = [];\n                var converter = this.converter;\n\n                options = createOptions(options, {\n                    containerElement: null,\n                    exclusive: true\n                });\n\n                var containerElement = options.containerElement;\n                var containerElementId = containerElement ? containerElement.id : null;\n                var containerElementRange;\n                if (containerElement) {\n                    containerElementRange = api.createRange(containerElement);\n                    containerElementRange.selectNodeContents(containerElement);\n                }\n\n                forEach(ranges, function(range) {\n                    var scopedRange = containerElement ? containerElementRange.intersection(range) : range;\n                    selCharRanges.push( converter.rangeToCharacterRange(scopedRange, containerElement || getBody(range.getDocument())) );\n                });\n\n                return this.highlightCharacterRanges(className, selCharRanges, {\n                    containerElementId: containerElementId,\n                    exclusive: options.exclusive\n                });\n            },\n            \n            /**\n             * containerElementId可以用陣列了！\n             * @author Pulipuli Chen 20191102\n             */\n            highlightSelection: function(className, options) {\n                var converter = this.converter;\n                var classApplier = className ? this.classAppliers[className] : false;\n                \n\n                options = createOptions(options, {\n                    containerElementId: null,\n                    exclusive: true\n                });\n                var newHighlights = []\n                \n                var exclusive = options.exclusive;\n                var selection = options.selection || api.getSelection(this.doc);\n                var doc = selection.win.document;\n                var containerElement\n                var containerElementIds = options.containerElementId;\n                \n                if (Array.isArray(containerElementIds) === false) {\n                  containerElementIds = [containerElementIds]\n                }\n                \n                let globalContainerElement = getContainerElement(doc, null)\n                var globalSerializedSelection = converter.serializeSelection(selection, globalContainerElement);\n                containerElementIds.forEach(containerElementId => {\n                  //console.log(containerElementId)\n                  containerElement = getContainerElement(doc, containerElementId);\n\n                  if (!classApplier && className !== false) {\n                      throw new Error(\"No class applier found for class '\" + className + \"'\");\n                  }\n\n                  // Store the existing selection as character ranges\n                  var serializedSelection = converter.serializeSelection(selection, containerElement);\n\n                  // Create an array of selected character ranges\n                  var selCharRanges = [];\n                  forEach(serializedSelection, function(rangeInfo) {\n                      selCharRanges.push( CharacterRange.fromCharacterRange(rangeInfo.characterRange) );\n                  });\n\n\n                  let ids = containerElementId\n                  if (Array.isArray(ids) === false) {\n                    ids = [ids]\n                  } \n                  ids.forEach((id, i) => {\n                    let hl = this.highlightCharacterRanges(className, selCharRanges, {\n                       containerElementId: id,\n                       exclusive: exclusive\n                    });\n                    //console.log(hl)\n\n                    newHighlights = newHighlights.concat(hl)\n                  })\n\n\n                  // Restore selection\n                  //converter.restoreSelection(selection, serializedSelection, containerElement);\n                  converter.restoreSelection(selection, globalSerializedSelection, globalContainerElement);\n                })\n                \n                return newHighlights;\n            },\n            /*\n            highlightSelection: function(className, options) {\n                var converter = this.converter;\n                var classApplier = className ? this.classAppliers[className] : false;\n                \n\n                options = createOptions(options, {\n                    containerElementId: null,\n                    exclusive: true\n                });\n                var newHighlights = []\n                var containerElementId = options.containerElementId;\n                \n                var exclusive = options.exclusive;\n                var selection = options.selection || api.getSelection(this.doc);\n                var doc = selection.win.document;\n                var containerElement\n                if (Array.isArray(containerElementId)) {\n                  containerElement = getContainerElement(doc, null);\n                }\n                else {\n                  containerElement = getContainerElement(doc, containerElementId);\n                }\n\n                if (!classApplier && className !== false) {\n                    throw new Error(\"No class applier found for class '\" + className + \"'\");\n                }\n\n                // Store the existing selection as character ranges\n                var serializedSelection = converter.serializeSelection(selection, containerElement);\n\n                // Create an array of selected character ranges\n                var selCharRanges = [];\n                forEach(serializedSelection, function(rangeInfo) {\n                    selCharRanges.push( CharacterRange.fromCharacterRange(rangeInfo.characterRange) );\n                });\n\n                \n                let ids = containerElementId\n                if (Array.isArray(ids) === false) {\n                  ids = [ids]\n                } \n                ids.forEach((id, i) => {\n                  let hl = this.highlightCharacterRanges(className, selCharRanges, {\n                     containerElementId: id,\n                     exclusive: exclusive\n                  });\n                  //console.log(hl)\n                  \n                  newHighlights = newHighlights.concat(hl)\n                })\n                \n\n                // Restore selection\n                converter.restoreSelection(selection, serializedSelection, containerElement);\n\n                return newHighlights;\n            },\n            */\n            unhighlightSelection: function(selection) {\n                let classNameList = []\n                if (Array.isArray(selection) && typeof(selection[0]) === 'string') {\n                  classNameList = selection\n                  selection = api.getSelection(this.doc);\n                }\n                else {\n                  selection = selection || api.getSelection(this.doc);\n                }\n                let intersectingHighlights = this.getIntersectingHighlights( selection.getAllRanges() );\n                //console.log(intersectingHighlights)\n                if (classNameList.length > 0) {\n                  intersectingHighlights = intersectingHighlights.filter(highlight => (classNameList.indexOf(highlight.classApplier.className) > -1))\n                }\n                if (intersectingHighlights.length > 0) {\n                  this.removeHighlights(intersectingHighlights)\n                }\n                selection.removeAllRanges();\n                return intersectingHighlights;\n            },\n\n            getHighlightsInSelection: function(selection) {\n                selection = selection || api.getSelection(this.doc);\n                return this.getIntersectingHighlights(selection.getAllRanges());\n            },\n\n            selectionOverlapsHighlight: function(selection) {\n                return this.getHighlightsInSelection(selection).length > 0;\n            },\n\n            serialize: function(options) {\n                var highlighter = this;\n                var highlights = highlighter.highlights;\n                var serializedType, serializedHighlights, convertType, serializationConverter;\n\n                highlights.sort(compareHighlights);\n                options = createOptions(options, {\n                    serializeHighlightText: false,\n                    type: highlighter.converter.type\n                });\n\n                serializedType = options.type;\n                convertType = (serializedType != highlighter.converter.type);\n\n                if (convertType) {\n                    serializationConverter = getConverter(serializedType);\n                }\n\n                serializedHighlights = [\"type:\" + serializedType];\n\n                forEach(highlights, function(highlight) {\n                    var characterRange = highlight.characterRange;\n                    var containerElement;\n\n                    // Convert to the current Highlighter's type, if different from the serialization type\n                    if (convertType) {\n                        containerElement = highlight.getContainerElement();\n                        characterRange = serializationConverter.rangeToCharacterRange(\n                            highlighter.converter.characterRangeToRange(highlighter.doc, characterRange, containerElement),\n                            containerElement\n                        );\n                    }\n\n                    var parts = [\n                        characterRange.start,\n                        characterRange.end,\n                        highlight.id,\n                        highlight.classApplier.className,\n                        highlight.containerElementId\n                    ];\n\n                    if (options.serializeHighlightText) {\n                        parts.push(highlight.getText());\n                    }\n                    serializedHighlights.push( parts.join(\"$\") );\n                });\n\n                return serializedHighlights.join(\"|\");\n            },\n\n            deserialize: function(serialized, options) {\n              if (typeof(serialized) !== 'string' || serialized === '') {\n                return false\n              }\n              options = options ? options : {}\n              let { append } = options\n              \n                var serializedHighlights = serialized.split(\"|\");\n                var highlights = [];\n\n                var firstHighlight = serializedHighlights[0];\n                var regexResult;\n                var serializationType, serializationConverter, convertType = false;\n                if ( firstHighlight && (regexResult = /^type:(\\w+)$/.exec(firstHighlight)) ) {\n                    serializationType = regexResult[1];\n                    if (serializationType !== this.converter.type) {\n                        serializationConverter = getConverter(serializationType);\n                        convertType = true;\n                    }\n                    serializedHighlights.shift();\n                } else {\n                    throw new Error(\"Serialized highlights are invalid.\");\n                }\n\n                var classApplier, highlight, characterRange, containerElementId, containerElement;\n                \n                let idCounter\n                if (append === true) {\n                  idCounter = this.highlights.length + 1\n                }\n\n                for (var i = serializedHighlights.length, parts; i-- > 0; ) {\n                    parts = serializedHighlights[i].split(\"$\");\n                    characterRange = new CharacterRange(+parts[0], +parts[1]);\n                    containerElementId = parts[4] || null;\n\n                    // Convert to the current Highlighter's type, if different from the serialization type\n                    if (convertType) {\n                        containerElement = getContainerElement(this.doc, containerElementId);\n                        characterRange = this.converter.rangeToCharacterRange(\n                            serializationConverter.characterRangeToRange(this.doc, characterRange, containerElement),\n                            containerElement\n                        );\n                    }\n\n                    classApplier = this.classAppliers[ parts[3] ];\n\n                    if (!classApplier) {\n                        throw new Error(\"No class applier found for class '\" + parts[3] + \"'\");\n                    }\n                    \n                    let id = parseInt(parts[2])\n                    if (typeof(idCounter) === 'number') {\n                      idCounter++\n                      id = idCounter\n                    }\n\n                    highlight = new Highlight(this.doc, characterRange, classApplier, this.converter, id, containerElementId);\n                    highlight.apply();\n                    highlights.push(highlight);\n                }\n                \n                if (append === true) {\n                  this.highlights = this.highlights.concat(highlights)\n                }\n                else {\n                  this.highlights = highlights;\n                }\n            }, // deserialize: function(serialized, options) {\n            \n            deserializeAsync: function(serialized, options) {\n              if (typeof(serialized) !== 'string' || serialized === '') {\n                return false\n              }\n              options = options ? options : {}\n              let { append } = options\n              \n              return new Promise((resolve, reject) => {\n                //console.log(append)\n                var serializedHighlights = serialized.split(\"|\");\n                var highlights = [];\n\n                var firstHighlight = serializedHighlights[0];\n                var regexResult;\n                var serializationType, serializationConverter, convertType = false;\n                if ( firstHighlight && (regexResult = /^type:(\\w+)$/.exec(firstHighlight)) ) {\n                    serializationType = regexResult[1];\n                    if (serializationType !== this.converter.type) {\n                        serializationConverter = getConverter(serializationType);\n                        convertType = true;\n                    }\n                    serializedHighlights.shift();\n                } else {\n                    throw new Error(\"Serialized highlights are invalid.\");\n                }\n\n                var classApplier, highlight, characterRange, containerElementId, containerElement;\n                \n                let idCounter\n                if (append === true) {\n                  idCounter = this.highlights.length + 1\n                }\n\n                let loop = (i) => {\n                  i--\n                  //console.log(i)\n                  if (i > -1) {\n                    let parts = serializedHighlights[i].split(\"$\");\n                    characterRange = new CharacterRange(+parts[0], +parts[1]);\n                    containerElementId = parts[4] || null;\n\n                    // Convert to the current Highlighter's type, if different from the serialization type\n                    if (convertType) {\n                        containerElement = getContainerElement(this.doc, containerElementId);\n                        characterRange = this.converter.rangeToCharacterRange(\n                            serializationConverter.characterRangeToRange(this.doc, characterRange, containerElement),\n                            containerElement\n                        );\n                    }\n\n                    classApplier = this.classAppliers[ parts[3] ];\n\n                    if (!classApplier) {\n                        throw new Error(\"No class applier found for class '\" + parts[3] + \"'\");\n                    }\n                    \n                    let id = parseInt(parts[2])\n                    if (typeof(idCounter) === 'number') {\n                      idCounter++\n                      id = idCounter\n                    }\n\n                    highlight = new Highlight(this.doc, characterRange, classApplier, this.converter, id, containerElementId);\n                    highlight.apply();\n                    highlights.push(highlight);\n                    \n                    setTimeout(() => {\n                      loop(i)\n                    }, 0)\n                  }\n                  else {\n                    if (append === true) {\n                      this.highlights = this.highlights.concat(highlights)\n                    }\n                    else {\n                      this.highlights = highlights;\n                    }\n                    resolve()\n                  }\n                }\n                loop(serializedHighlights.length)                \n              })  // return new Promise((resolve, reject) => {\n            } // deserialize: function(serialized, options) {\n        };\n\n        api.Highlighter = Highlighter;\n\n        api.createHighlighter = function(doc, rangeCharacterOffsetConverterType) {\n            return new Highlighter(doc, rangeCharacterOffsetConverterType);\n        };\n    });\n    \n    return rangy;\n}\n","/**\n * Position module for Rangy.\n * Extensions to Range and Selection objects to provide access to pixel positions relative to the viewport or document.\n *\n * Part of Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core.\n *\n * Copyright %%build:year%%, Tim Down\n * Licensed under the MIT license.\n * Version: %%build:version%%\n * Build date: %%build:date%%\n */\nexport default (rangy) => {\nrangy.createModule(\"Position\", [\"WrappedSelection\"], function(api, module) {\n    //var log = log4javascript.getLogger(\"rangy.position\");\n\n    var NUMBER = \"number\", UNDEF = \"undefined\";\n    var WrappedRange = api.WrappedRange;\n    var WrappedTextRange = api.WrappedTextRange;\n    var dom = api.dom, util = api.util, DomPosition = dom.DomPosition;\n    \n    // Feature detection\n\n    //var caretPositionFromPointSupported = (typeof document.caretPositionFromPoint != UNDEF);\n\n    // Since Rangy can deal with multiple documents which could be in different modes, we have to do the checks every\n    // time, unless we cache a getScrollPosition function in each document. This would necessarily pollute the\n    // document's global namespace, which I'm choosing to view as a greater evil than a slight performance hit.\n    function getScrollPosition(win) {\n        var x = 0, y = 0;\n        if (typeof win.pageXOffset == NUMBER && typeof win.pageYOffset == NUMBER) {\n            x = win.pageXOffset;\n            y = win.pageYOffset;\n        } else {\n            var doc = win.document;\n            var docEl = doc.documentElement;\n            var compatMode = doc.compatMode;\n            var scrollEl = (typeof compatMode == \"string\" && compatMode.indexOf(\"CSS\") >= 0 && docEl)\n                ? docEl : dom.getBody(doc);\n\n            if (scrollEl && typeof scrollEl.scrollLeft == NUMBER && typeof scrollEl.scrollTop == NUMBER) {\n                try {\n                    x = scrollEl.scrollLeft;\n                    y = scrollEl.scrollTop;\n                } catch (ex) {}\n            }\n        }\n        return { x: x, y: y };\n    }\n\n    function getAncestorElement(node, tagName) {\n        tagName = tagName.toLowerCase();\n        while (node) {\n            if (node.nodeType == 1 && node.tagName.toLowerCase() == tagName) {\n                return node;\n            }\n            node = node.parentNode;\n        }\n        return null;\n    }\n\n    function Rect(top, right, bottom, left) {\n        this.top = top;\n        this.right = right;\n        this.bottom = bottom;\n        this.left = left;\n        this.width = right - left;\n        this.height = bottom - top;\n        this.middle = top + (this.height / 2)\n        this.center = left + (this.width / 2)\n    }\n\n    function createRelativeRect(rect, dx, dy) {\n      return new Rect(rect.top + dy, rect.right + dx, rect.bottom + dy, rect.left + dx)\n    }\n\n    function adjustClientRect(rect, doc) {\n        // Older IEs have an issue with a two pixel margin on the body element\n        var dx = 0, dy = 0;\n        var docEl = doc.documentElement, body = dom.getBody(doc);\n        var container = (docEl.clientWidth === 0 && typeof body.clientTop == NUMBER) ? body : docEl;\n        var clientLeft = container.clientLeft, clientTop = container.clientTop;\n        if (clientLeft) {\n            dx = -clientLeft;\n        }\n        if (clientTop) {\n            dy = -clientTop;\n        }\n        return createRelativeRect(rect, dx, dy);\n    }\n\n    function mergeRects(rects) {\n        var tops = [], bottoms = [], lefts = [], rights = [];\n        for (var i = 0, len = rects.length, rect; i < len; ++i) {\n            rect = rects[i];\n            if (rect) {\n                tops.push(rect.top);\n                bottoms.push(rect.bottom);\n                lefts.push(rect.left);\n                rights.push(rect.right);\n            }\n        }\n        return new Rect(\n            Math.min.apply(Math, tops),\n            Math.max.apply(Math, rights),\n            Math.max.apply(Math, bottoms),\n            Math.min.apply(Math, lefts)\n        );\n    }\n    \n    function getTextRangePosition(doc, x, y) {\n        var textRange = dom.getBody(doc).createTextRange();\n        textRange.moveToPoint(x, y);\n        var range = new api.WrappedTextRange(textRange);\n        return new DomPosition(range.startContainer, range.startOffset);\n    }\n\n    function caretPositionFromPoint(doc, x, y) {\n        var pos = doc.caretPositionFromPoint(x, y);\n        return new DomPosition(pos.offsetNode, pos.offset);\n    }\n\n    function caretRangeFromPoint(doc, x, y) {\n        var range = doc.caretRangeFromPoint(x, y);\n        return new DomPosition(range.startContainer, range.startOffset);\n    }\n\n    function getLastRangeRect(range) {\n        var rects = (range.nativeRange || range).getClientRects();\n        return (rects.length > 0) ? rects[rects.length - 1] : null;\n    }\n\n    function pointIsInOrAboveRect(x, y, rect) {\n        console.log(\"pointIsInOrAboveRect\", x, y, Math.floor(rect.top), Math.floor(rect.right), Math.floor(rect.bottom), Math.floor(rect.left))\n        return y < rect.bottom && x >= rect.left && x <= rect.right;\n    }\n\n    function positionFromPoint(doc, x, y, favourPrecedingPosition) {\n        var el = doc.elementFromPoint(x, y);\n        \n        console.log(\"elementFromPoint is \", el);\n\n        var range = api.createRange(doc);\n        range.selectNodeContents(el);\n        range.collapse(true);\n\n        var node = el.firstChild, offset, rect, textLen;\n\n        if (!node) {\n            node = el.parentNode;\n            offset = dom.getNodeIndex(el);\n            if (!favourPrecedingPosition) {\n                ++offset;\n            }\n        } else {\n            // Search through the text node children of el\n            main: while (node) {\n                //console.log(node);\n                if (node.nodeType == 3) {\n                    // Go through the text node character by character\n                    for (offset = 0, textLen = node.length; offset <= textLen; ++offset) {\n                        range.setEnd(node, offset);\n                        rect = getLastRangeRect(range);\n                        if (rect && pointIsInOrAboveRect(x, y, rect)) {\n                            // We've gone past the point. Now we check which side (left or right) of the character the point is nearer to\n                            if (rect.right - x > x - rect.left) {\n                                --offset;\n                            }\n                            break main;\n                        }\n                    }\n                } else {\n                    // Handle elements\n                    range.setEndAfter(node);\n                    rect = getLastRangeRect(range);\n                    if (rect && pointIsInOrAboveRect(x, y, rect)) {\n                        offset = dom.getNodeIndex(node);\n                        node = el.parentNode;\n                        if (!favourPrecedingPosition) {\n                            ++offset;\n                        }\n                        break;\n                    }\n                }\n\n                node = node.nextSibling;\n            }\n            if (!node) {\n                node = el;\n                offset = el.childNodes.length;\n            }\n        }\n\n        return new DomPosition(node, offset);\n    }\n\n    function createCaretPositionFromPointGetter(doc) {\n        if (api.features.implementsTextRange) {\n            return getTextRangePosition;\n        } else if (typeof doc.caretPositionFromPoint != UNDEF) {\n            return caretPositionFromPoint;\n        } else if (typeof doc.caretRangeFromPoint != UNDEF) {\n            return caretRangeFromPoint;\n        } else if (typeof doc.elementFromPoint != UNDEF && rangeSupportsGetClientRects) {\n            return positionFromPoint;\n        } else {\n            throw module.createError(\"createCaretPositionFromPointGetter(): Browser does not provide a recognised method to create a selection from pixel coordinates\");\n        }\n    }\n    \n    function createRangeFromPoints(startX, startY, endX, endY, doc) {\n        doc = dom.getContentDocument(doc, module, \"createRangeFromPoints\");\n        var positionFinder = createCaretPositionFromPointGetter(doc);\n        var startPos = positionFinder(doc, startX, startY, false);\n        var endPos = positionFinder(doc, endX, endY, true);\n        //console.log(startPos.node, startPos.offset, endPos.node, endPos.offset);\n        var range = api.createRange(doc);\n        range.setStartAndEnd(startPos.node, startPos.offset, endPos.node, endPos.offset);\n        return range;\n    }\n\n    function moveSelectionToPoints(anchorX, anchorY, focusX, focusY, doc) {\n        var startX, startY, endX, endY;\n\n        // Detect backward selection for coordinates and flip start and end coordinates if necessary\n        var backward = focusY < anchorY || (anchorY == focusY && focusX < anchorX);\n\n        if (backward) {\n            startX = focusX;\n            startY = focusY;\n            endX = anchorX;\n            endY = anchorY;\n        } else {\n            startX = anchorX;\n            startY = anchorY;\n            endX = focusX;\n            endY = focusY;\n        }\n\n        var sel = rangy.getSelection(doc);\n        var range = createRangeFromPoints(startX, startY, endX, endY, doc);\n        sel.setSingleRange(range);\n        return sel;\n    }\n    \n    // Test that <span> elements support getBoundingClientRect\n    var span = document.createElement(\"span\");\n    var elementSupportsGetBoundingClientRect = util.isHostMethod(span, \"getBoundingClientRect\");\n    span = null;\n\n    // Test for getBoundingClientRect support in Range\n    var rangeSupportsGetClientRects = false, rangeSupportsGetBoundingClientRect = false;\n    if (api.features.implementsDomRange) {\n        var testRange = api.createNativeRange();\n        rangeSupportsGetClientRects = util.isHostMethod(testRange, \"getClientRects\");\n        rangeSupportsGetBoundingClientRect = util.isHostMethod(testRange, \"getBoundingClientRect\");\n    }\n\n    util.extend(api.features, {\n        rangeSupportsGetBoundingClientRect: rangeSupportsGetBoundingClientRect,\n        rangeSupportsGetClientRects: rangeSupportsGetClientRects,\n        elementSupportsGetBoundingClientRect: elementSupportsGetBoundingClientRect\n    });\n\n    var createClientBoundaryPosGetter = function(isStart) {\n        return function() {\n            var boundaryRange = this.cloneRange();\n            boundaryRange.collapse(isStart);\n            var rect = boundaryRange.getBoundingClientRect();\n            return {\n                x: rect[isStart ? \"left\" : \"right\"],\n                y: rect[isStart ? \"top\" : \"bottom\"]\n            };\n        };\n    };\n\n    var rangeProto = api.rangePrototype;\n\n    if (api.features.implementsTextRange && elementSupportsGetBoundingClientRect) {\n        rangeProto.getBoundingClientRect = function() {\n            // We need a TextRange\n            var textRange = WrappedTextRange.rangeToTextRange(this);\n\n            // Work around table problems (table cell bounding rects seem not to count if TextRange spans cells)\n            var cells = this.getNodes([1], function(el) {\n                return /^t[dh]$/i.test(el.tagName);\n            });\n\n            // Merge rects for each cell selected by the range into overall rect\n            var rect, rects = [];\n            if (cells.length > 0) {\n                var lastTable = getAncestorElement(this.startContainer, \"table\");\n\n                for (var i = 0, cell, tempTextRange, table, subRange, subRect; cell = cells[i]; ++i) {\n                    // Handle non-table sections of the range\n                    table = getAncestorElement(cell, \"table\");\n                    if (!lastTable || table != lastTable) {\n                        // There is a section of the range prior to the current table, or lying between tables.\n                        // Merge in its rect\n                        subRange = this.cloneRange();\n                        if (lastTable) {\n                            subRange.setStartAfter(lastTable);\n                        }\n                        subRange.setEndBefore(table);\n                        rects.push(WrappedTextRange.rangeToTextRange(subRange).getBoundingClientRect());\n                    }\n\n                    if (this.containsNode(cell)) {\n                        rects.push(cell.getBoundingClientRect());\n                    } else {\n                        tempTextRange = textRange.duplicate();\n                        tempTextRange.moveToElementText(cell);\n                        if (tempTextRange.compareEndPoints(\"StartToStart\", textRange) == -1) {\n                            tempTextRange.setEndPoint(\"StartToStart\", textRange);\n                        } else if (tempTextRange.compareEndPoints(\"EndToEnd\", textRange) == 1) {\n                            tempTextRange.setEndPoint(\"EndToEnd\", textRange);\n                        }\n                        rects.push(tempTextRange.getBoundingClientRect());\n                    }\n                    lastTable = table;\n                }\n\n                // Merge in the rect for any content lying after the final table\n                var endTable = getAncestorElement(this.endContainer, \"table\");\n                if (!endTable && lastTable) {\n                    subRange = this.cloneRange();\n                    subRange.setStartAfter(lastTable);\n                    rects.push(WrappedTextRange.rangeToTextRange(subRange).getBoundingClientRect());\n                }\n                rect = mergeRects(rects);\n            } else {\n                rect = textRange.getBoundingClientRect();\n            }\n\n            return adjustClientRect(rect, dom.getDocument(this.startContainer));\n        };\n    } else if (api.features.implementsDomRange) {\n        var createWrappedRange = function(range) {\n            return (range instanceof WrappedRange) ? range : new WrappedRange(range);\n        };\n\n        if (rangeSupportsGetBoundingClientRect) {\n            rangeProto.getBoundingClientRect = function() {\n                var nativeRange = createWrappedRange(this).nativeRange;\n                // Test for WebKit getBoundingClientRect bug (https://bugs.webkit.org/show_bug.cgi?id=65324)\n                var rect = nativeRange.getBoundingClientRect() || nativeRange.getClientRects()[0];\n                return adjustClientRect(rect, dom.getDocument(this.startContainer));\n            };\n\n            if (rangeSupportsGetClientRects) {\n                var getElementRectsForPosition = function(node, offset) {\n                    var children = node.childNodes;\n                    //if (offset < children.length)\n                };\n\n                createClientBoundaryPosGetter = function(isStart) {\n                    return function() {\n                        var rect, nativeRange = createWrappedRange(this).nativeRange;\n                        var rects = nativeRange.getClientRects();\n\n                        if (rects.length == 0 && elementSupportsGetBoundingClientRect) {\n                            if (isStart) {\n\n\n                            }\n\n                            //console.log(nativeRange, nativeRange.getClientRects(), nativeRange.getBoundingClientRect());\n                            if (this.collapsed\n                                    && this.startContainer.nodeType == 1\n                                    && this.startOffset < this.startContainer.childNodes.length) {\n                                var n = this.startContainer.childNodes[this.startOffset];\n                                if (n.getClientRects) {\n                                    //console.log(n, n.getClientRects(), this.startContainer.getClientRects())\n                                }\n\n                            }\n                        }\n\n                        if (rects.length > 0) {\n                            if (isStart) {\n                                rect = rects[0];\n                                return { x: rect.left, y: rect.top };\n                            } else {\n                                rect = rects[rects.length - 1];\n                                return { x: rect.right, y: rect.bottom };\n                            }\n                        } else {\n                            throw module.createError(\"Cannot get position for range \" + this.inspect());\n                        }\n                    };\n                }\n            }\n        } else {\n            var getElementBoundingClientRect = elementSupportsGetBoundingClientRect ?\n                function(el) {\n                    return adjustClientRect(el.getBoundingClientRect(), dom.getDocument(el));\n                } :\n\n                // This implementation is very naive. There are many browser quirks that make it extremely\n                // difficult to get accurate element coordinates in all situations\n                function(el) {\n                    var x = 0, y = 0, offsetEl = el, width = el.offsetWidth, height = el.offsetHeight;\n                    while (offsetEl) {\n                        x += offsetEl.offsetLeft;\n                        y += offsetEl.offsetTop;\n                        offsetEl = offsetEl.offsetParent;\n                    }\n\n                    return adjustClientRect(new Rect(y, x + width, y + height, x), dom.getDocument(el));\n                };\n\n            var getRectFromBoundaries = function(range) {\n                var rect;\n                range.splitBoundaries();\n                var span = document.createElement(\"span\");\n\n                if (range.collapsed) {\n                    range.insertNode(span);\n                    rect = getElementBoundingClientRect(span);\n                    span.parentNode.removeChild(span);\n                } else {\n                    // TODO: This isn't right. I'm not sure it can be made right sensibly. Consider what to do.\n                    // This doesn't consider all the line boxes it needs to consider.\n                    var workingRange = range.cloneRange();\n\n                    // Get the start rectangle\n                    workingRange.collapse(true);\n                    workingRange.insertNode(span);\n                    var startRect = getElementBoundingClientRect(span);\n                    span.parentNode.removeChild(span);\n\n                    // Get the end rectangle\n                    workingRange.collapseToPoint(range.endContainer, range.endOffset);\n                    workingRange.insertNode(span);\n                    var endRect = getElementBoundingClientRect(span);\n                    span.parentNode.removeChild(span);\n\n                    // Merge the start and end rects\n                    var rects = [startRect, endRect];\n\n                    // Merge in rectangles for all elements in the range\n                    var elements = range.getNodes([1], function(el) {\n                        return range.containsNode(el);\n                    });\n\n                    for (var i = 0, len = elements.length; i < len; ++i) {\n                        rects.push(getElementBoundingClientRect(elements[i]));\n                    }\n                    rect = mergeRects(rects)\n                }\n\n                // Clean up\n                range.normalizeBoundaries();\n                return rect;\n            };\n\n            rangeProto.getBoundingClientRect = function(range) {\n                return getRectFromBoundaries(createWrappedRange(range));\n            };\n        }\n    }\n    \n    \n\n        function createDocumentBoundaryPosGetter(isStart) {\n            return function() {\n                var pos = this[\"get\" + (isStart ? \"Start\" : \"End\") + \"ClientPos\"]();\n                var scrollPos = getScrollPosition( dom.getWindow(this.startContainer) );\n                return { x: pos.x + scrollPos.x, y: pos.y + scrollPos.y };\n            };\n        }\n\n    util.extend(rangeProto, {\n        getBoundingDocumentRect: function() {\n            var scrollPos = getScrollPosition( dom.getWindow(this.startContainer) );\n            return createRelativeRect(this.getBoundingClientRect(), scrollPos.x, scrollPos.y);\n        },\n\n        getStartClientPos: createClientBoundaryPosGetter(true),\n        getEndClientPos: createClientBoundaryPosGetter(false),\n\n        getStartDocumentPos: createDocumentBoundaryPosGetter(true),\n        getEndDocumentPos: createDocumentBoundaryPosGetter(false)\n    });\n\n    // Add Selection methods\n    function compareRanges(r1, r2) {\n        return r1.compareBoundaryPoints(r2.START_TO_START, r2);\n    }\n\n    function createSelectionRectGetter(isDocument) {\n        return function() {\n            var rangeMethodName = \"getBounding\" + (isDocument ? \"Document\" : \"Client\") + \"Rect\";\n            var rects = [];\n            for (var i = 0, rect = null, rangeRect; i < this.rangeCount; ++i) {\n                rects.push(this.getRangeAt(i)[rangeMethodName]());\n            }\n            return mergeRects(rects);\n        };\n    }\n\n    function createSelectionBoundaryPosGetter(isStart, isDocument) {\n        return function() {\n            if (this.rangeCount == 0) {\n                return null;\n            }\n\n            var posType = isDocument ? \"Document\" : \"Client\";\n\n            var ranges = this.getAllRanges();\n            if (ranges.length > 1) {\n                // Order the ranges by position within the DOM\n                ranges.sort(compareRanges);\n            }\n\n            return isStart ?\n                ranges[0][\"getStart\" + posType + \"Pos\"]() :\n                ranges[ranges.length - 1][\"getEnd\" + posType + \"Pos\"]();\n        };\n    }\n\n    util.extend(api.selectionPrototype, {\n        getBoundingClientRect: createSelectionRectGetter(false),\n        getBoundingDocumentRect: createSelectionRectGetter(true),\n\n        getStartClientPos: createSelectionBoundaryPosGetter(true, false),\n        getEndClientPos: createSelectionBoundaryPosGetter(false, false),\n\n        getStartDocumentPos: createSelectionBoundaryPosGetter(true, true),\n        getEndDocumentPos: createSelectionBoundaryPosGetter(false, true)\n    });\n    \n    api.positionFromPoint = function(x, y, doc) {\n        doc = dom.getContentDocument(doc, module, \"positionFromPoint\");\n        return createCaretPositionFromPointGetter(doc)(doc, x, y);\n    };\n    \n    api.createRangeFromPoints = createRangeFromPoints;\n    api.moveSelectionToPoints = moveSelectionToPoints;\n});\n}","/**\n * Selection save and restore module for Rangy.\n * Saves and restores user selections using marker invisible elements in the DOM.\n *\n * Part of Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core.\n *\n * Copyright 2015, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.1-dev\n * Build date: 20 May 2015\n */\nexport default function(rangy) {\n    rangy.createModule(\"SaveRestore\", [\"WrappedRange\"], function(api, module) {\n        var dom = api.dom;\n        var removeNode = dom.removeNode;\n        var isDirectionBackward = api.Selection.isDirectionBackward;\n        //var markerTextChar = \"\\ufeff\";\n        var markerTextChar = \"\";  // 避免計算字數的錯誤\n\n        function gEBI(id, doc) {\n            return (doc || document).getElementById(id);\n        }\n\n        function insertRangeBoundaryMarker(range, atStart) {\n            var markerId = \"selectionBoundary_\" + (+new Date()) + \"_\" + (\"\" + Math.random()).slice(2);\n            var markerEl;\n            var doc = dom.getDocument(range.startContainer);\n\n            // Clone the Range and collapse to the appropriate boundary point\n            var boundaryRange = range.cloneRange();\n            boundaryRange.collapse(atStart);\n\n            // Create the marker element containing a single invisible character using DOM methods and insert it\n            markerEl = doc.createElement(\"span\");\n            markerEl.id = markerId;\n            markerEl.style.lineHeight = \"0\";\n            markerEl.style.display = \"none\";\n            markerEl.className = \"rangySelectionBoundary\";\n            markerEl.appendChild(doc.createTextNode(markerTextChar));\n\n            boundaryRange.insertNode(markerEl);\n            return markerEl;\n        }\n\n        function setRangeBoundary(doc, range, markerId, atStart) {\n            var markerEl = gEBI(markerId, doc);\n            if (markerEl) {\n                range[atStart ? \"setStartBefore\" : \"setEndBefore\"](markerEl);\n                removeNode(markerEl);\n            } else {\n                module.warn(\"Marker element has been removed. Cannot restore selection.\");\n            }\n        }\n\n        function compareRanges(r1, r2) {\n            return r2.compareBoundaryPoints(r1.START_TO_START, r1);\n        }\n\n        function saveRange(range, direction) {\n            var startEl, endEl, doc = api.DomRange.getRangeDocument(range), text = range.toString();\n            var backward = isDirectionBackward(direction);\n\n            if (range.collapsed) {\n                endEl = insertRangeBoundaryMarker(range, false);\n                return {\n                    document: doc,\n                    markerId: endEl.id,\n                    collapsed: true\n                };\n            } else {\n                endEl = insertRangeBoundaryMarker(range, false);\n                startEl = insertRangeBoundaryMarker(range, true);\n\n                return {\n                    document: doc,\n                    startMarkerId: startEl.id,\n                    endMarkerId: endEl.id,\n                    collapsed: false,\n                    backward: backward,\n                    toString: function() {\n                        return \"original text: '\" + text + \"', new text: '\" + range.toString() + \"'\";\n                    }\n                };\n            }\n        }\n\n        function restoreRange(rangeInfo, normalize) {\n            var doc = rangeInfo.document;\n            if (typeof normalize == \"undefined\") {\n                normalize = true;\n            }\n            var range = api.createRange(doc);\n            if (rangeInfo.collapsed) {\n                var markerEl = gEBI(rangeInfo.markerId, doc);\n                if (markerEl) {\n                    markerEl.style.display = \"inline\";\n                    var previousNode = markerEl.previousSibling;\n\n                    // Workaround for issue 17\n                    if (previousNode && previousNode.nodeType == 3) {\n                        removeNode(markerEl);\n                        range.collapseToPoint(previousNode, previousNode.length);\n                    } else {\n                        range.collapseBefore(markerEl);\n                        removeNode(markerEl);\n                    }\n                } else {\n                    module.warn(\"Marker element has been removed. Cannot restore selection.\");\n                }\n            } else {\n                setRangeBoundary(doc, range, rangeInfo.startMarkerId, true);\n                setRangeBoundary(doc, range, rangeInfo.endMarkerId, false);\n            }\n\n            if (normalize) {\n                range.normalizeBoundaries();\n            }\n\n            return range;\n        }\n\n        function saveRanges(ranges, direction) {\n            var rangeInfos = [], range, doc;\n            var backward = isDirectionBackward(direction);\n\n            // Order the ranges by position within the DOM, latest first, cloning the array to leave the original untouched\n            ranges = ranges.slice(0);\n            ranges.sort(compareRanges);\n\n            for (var i = 0, len = ranges.length; i < len; ++i) {\n                rangeInfos[i] = saveRange(ranges[i], backward);\n            }\n\n            // Now that all the markers are in place and DOM manipulation over, adjust each range's boundaries to lie\n            // between its markers\n            for (i = len - 1; i >= 0; --i) {\n                range = ranges[i];\n                doc = api.DomRange.getRangeDocument(range);\n                if (range.collapsed) {\n                    range.collapseAfter(gEBI(rangeInfos[i].markerId, doc));\n                } else {\n                    range.setEndBefore(gEBI(rangeInfos[i].endMarkerId, doc));\n                    range.setStartAfter(gEBI(rangeInfos[i].startMarkerId, doc));\n                }\n            }\n\n            return rangeInfos;\n        }\n\n        function saveSelection(win) {\n            if (!api.isSelectionValid(win)) {\n                module.warn(\"Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.\");\n                return null;\n            }\n            var sel = api.getSelection(win);\n            var ranges = sel.getAllRanges();\n            var backward = (ranges.length == 1 && sel.isBackward());\n\n            var rangeInfos = saveRanges(ranges, backward);\n\n            // Ensure current selection is unaffected\n            if (backward) {\n                sel.setSingleRange(ranges[0], backward);\n            } else {\n                sel.setRanges(ranges);\n            }\n\n            return {\n                win: win,\n                rangeInfos: rangeInfos,\n                restored: false\n            };\n        }\n\n        function restoreRanges(rangeInfos) {\n            var ranges = [];\n\n            // Ranges are in reverse order of appearance in the DOM. We want to restore earliest first to avoid\n            // normalization affecting previously restored ranges.\n            var rangeCount = rangeInfos.length;\n\n            for (var i = rangeCount - 1; i >= 0; i--) {\n                ranges[i] = restoreRange(rangeInfos[i], true);\n            }\n\n            return ranges;\n        }\n\n        function restoreSelection(savedSelection, preserveDirection) {\n            if (!savedSelection.restored) {\n                var rangeInfos = savedSelection.rangeInfos;\n                var sel = api.getSelection(savedSelection.win);\n                var ranges = restoreRanges(rangeInfos), rangeCount = rangeInfos.length;\n\n                if (rangeCount == 1 && preserveDirection && api.features.selectionHasExtend && rangeInfos[0].backward) {\n                    sel.removeAllRanges();\n                    sel.addRange(ranges[0], true);\n                } else {\n                    sel.setRanges(ranges);\n                }\n\n                savedSelection.restored = true;\n            }\n        }\n\n        function removeMarkerElement(doc, markerId) {\n            var markerEl = gEBI(markerId, doc);\n            if (markerEl) {\n                removeNode(markerEl);\n            }\n        }\n\n        function removeMarkers(savedSelection) {\n            var rangeInfos = savedSelection.rangeInfos;\n            for (var i = 0, len = rangeInfos.length, rangeInfo; i < len; ++i) {\n                rangeInfo = rangeInfos[i];\n                if (rangeInfo.collapsed) {\n                    removeMarkerElement(savedSelection.doc, rangeInfo.markerId);\n                } else {\n                    removeMarkerElement(savedSelection.doc, rangeInfo.startMarkerId);\n                    removeMarkerElement(savedSelection.doc, rangeInfo.endMarkerId);\n                }\n            }\n        }\n\n        api.util.extend(api, {\n            saveRange: saveRange,\n            restoreRange: restoreRange,\n            saveRanges: saveRanges,\n            restoreRanges: restoreRanges,\n            saveSelection: saveSelection,\n            restoreSelection: restoreSelection,\n            removeMarkerElement: removeMarkerElement,\n            removeMarkers: removeMarkers\n        });\n    });\n    \n    return rangy;\n}","/**\n * Text range module for Rangy.\n * Text-based manipulation and searching of ranges and selections.\n *\n * Features\n *\n * - Ability to move range boundaries by character or word offsets\n * - Customizable word tokenizer\n * - Ignores text nodes inside <script> or <style> elements or those hidden by CSS display and visibility properties\n * - Range findText method to search for text or regex within the page or within a range. Flags for whole words and case\n *   sensitivity\n * - Selection and range save/restore as text offsets within a node\n * - Methods to return visible text within a range or selection\n * - innerText method for elements\n *\n * References\n *\n * https://www.w3.org/Bugs/Public/show_bug.cgi?id=13145\n * http://aryeh.name/spec/innertext/innertext.html\n * http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html\n *\n * Part of Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Depends on Rangy core.\n *\n * Copyright 2015, Tim Down\n * Licensed under the MIT license.\n * Version: 1.3.1-dev\n * Build date: 20 May 2015\n */\n\n/**\n * Problem: handling of trailing spaces before line breaks is handled inconsistently between browsers.\n *\n * First, a <br>: this is relatively simple. For the following HTML:\n *\n * 1 <br>2\n *\n * - IE and WebKit render the space, include it in the selection (i.e. when the content is selected and pasted into a\n *   textarea, the space is present) and allow the caret to be placed after it.\n * - Firefox does not acknowledge the space in the selection but it is possible to place the caret after it.\n * - Opera does not render the space but has two separate caret positions on either side of the space (left and right\n *   arrow keys show this) and includes the space in the selection.\n *\n * The other case is the line break or breaks implied by block elements. For the following HTML:\n *\n * <p>1 </p><p>2<p>\n *\n * - WebKit does not acknowledge the space in any way\n * - Firefox, IE and Opera as per <br>\n *\n * One more case is trailing spaces before line breaks in elements with white-space: pre-line. For the following HTML:\n *\n * <p style=\"white-space: pre-line\">1\n * 2</p>\n *\n * - Firefox and WebKit include the space in caret positions\n * - IE does not support pre-line up to and including version 9\n * - Opera ignores the space\n * - Trailing space only renders if there is a non-collapsed character in the line\n *\n * Problem is whether Rangy should ever acknowledge the space and if so, when. Another problem is whether this can be\n * feature-tested\n */\nexport default function(rangy) {\n    rangy.createModule(\"TextRange\", [\"WrappedSelection\"], function(api, module) {\n        var UNDEF = \"undefined\";\n        var CHARACTER = \"character\", WORD = \"word\";\n        var dom = api.dom, util = api.util;\n        var extend = util.extend;\n        var createOptions = util.createOptions;\n        var getBody = dom.getBody;\n\n\n        var spacesRegex = /^[ \\t\\f\\r\\n]+$/;\n        var spacesMinusLineBreaksRegex = /^[ \\t\\f\\r]+$/;\n        var allWhiteSpaceRegex = /^[\\t-\\r \\u0085\\u00A0\\u1680\\u180E\\u2000-\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000]+$/;\n        var nonLineBreakWhiteSpaceRegex = /^[\\t \\u00A0\\u1680\\u180E\\u2000-\\u200B\\u202F\\u205F\\u3000]+$/;\n        var lineBreakRegex = /^[\\n-\\r\\u0085\\u2028\\u2029]$/;\n\n        var defaultLanguage = \"en\";\n\n        var isDirectionBackward = api.Selection.isDirectionBackward;\n\n        // Properties representing whether trailing spaces inside blocks are completely collapsed (as they are in WebKit,\n        // but not other browsers). Also test whether trailing spaces before <br> elements are collapsed.\n        var trailingSpaceInBlockCollapses = false;\n        var trailingSpaceBeforeBrCollapses = false;\n        var trailingSpaceBeforeBlockCollapses = false;\n        var trailingSpaceBeforeLineBreakInPreLineCollapses = true;\n\n        (function() {\n            var el = dom.createTestElement(document, \"<p>1 </p><p></p>\", true);\n            var p = el.firstChild;\n            var sel = api.getSelection();\n            sel.collapse(p.lastChild, 2);\n            sel.setStart(p.firstChild, 0);\n            trailingSpaceInBlockCollapses = (\"\" + sel).length == 1;\n\n            el.innerHTML = \"1 <br />\";\n            sel.collapse(el, 2);\n            sel.setStart(el.firstChild, 0);\n            trailingSpaceBeforeBrCollapses = (\"\" + sel).length == 1;\n\n            el.innerHTML = \"1 <p>1</p>\";\n            sel.collapse(el, 2);\n            sel.setStart(el.firstChild, 0);\n            trailingSpaceBeforeBlockCollapses = (\"\" + sel).length == 1;\n\n            dom.removeNode(el);\n            sel.removeAllRanges();\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // This function must create word and non-word tokens for the whole of the text supplied to it\n        function defaultTokenizer(chars, wordOptions) {\n            var word = chars.join(\"\"), result, tokenRanges = [];\n\n            function createTokenRange(start, end, isWord) {\n                tokenRanges.push( { start: start, end: end, isWord: isWord } );\n            }\n\n            // Match words and mark characters\n            var lastWordEnd = 0, wordStart, wordEnd;\n            while ( (result = wordOptions.wordRegex.exec(word)) ) {\n                wordStart = result.index;\n                wordEnd = wordStart + result[0].length;\n\n                // Create token for non-word characters preceding this word\n                if (wordStart > lastWordEnd) {\n                    createTokenRange(lastWordEnd, wordStart, false);\n                }\n\n                // Get trailing space characters for word\n                if (wordOptions.includeTrailingSpace) {\n                    while ( nonLineBreakWhiteSpaceRegex.test(chars[wordEnd]) ) {\n                        ++wordEnd;\n                    }\n                }\n                createTokenRange(wordStart, wordEnd, true);\n                lastWordEnd = wordEnd;\n            }\n\n            // Create token for trailing non-word characters, if any exist\n            if (lastWordEnd < chars.length) {\n                createTokenRange(lastWordEnd, chars.length, false);\n            }\n\n            return tokenRanges;\n        }\n\n        function convertCharRangeToToken(chars, tokenRange) {\n            var tokenChars = chars.slice(tokenRange.start, tokenRange.end);\n            var token = {\n                isWord: tokenRange.isWord,\n                chars: tokenChars,\n                toString: function() {\n                    return tokenChars.join(\"\");\n                }\n            };\n            for (var i = 0, len = tokenChars.length; i < len; ++i) {\n                tokenChars[i].token = token;\n            }\n            return token;\n        }\n\n        function tokenize(chars, wordOptions, tokenizer) {\n            var tokenRanges = tokenizer(chars, wordOptions);\n            var tokens = [];\n            for (var i = 0, tokenRange; tokenRange = tokenRanges[i++]; ) {\n                tokens.push( convertCharRangeToToken(chars, tokenRange) );\n            }\n            return tokens;\n        }\n\n        var defaultCharacterOptions = {\n            includeBlockContentTrailingSpace: true,\n            includeSpaceBeforeBr: true,\n            includeSpaceBeforeBlock: true,\n            includePreLineTrailingSpace: true,\n            ignoreCharacters: \"\"\n        };\n\n        function normalizeIgnoredCharacters(ignoredCharacters) {\n            // Check if character is ignored\n            var ignoredChars = ignoredCharacters || \"\";\n\n            // Normalize ignored characters into a string consisting of characters in ascending order of character code\n            var ignoredCharsArray = (typeof ignoredChars == \"string\") ? ignoredChars.split(\"\") : ignoredChars;\n            ignoredCharsArray.sort(function(char1, char2) {\n                return char1.charCodeAt(0) - char2.charCodeAt(0);\n            });\n\n            /// Convert back to a string and remove duplicates\n            return ignoredCharsArray.join(\"\").replace(/(.)\\1+/g, \"$1\");\n        }\n\n        var defaultCaretCharacterOptions = {\n            includeBlockContentTrailingSpace: !trailingSpaceBeforeLineBreakInPreLineCollapses,\n            includeSpaceBeforeBr: !trailingSpaceBeforeBrCollapses,\n            includeSpaceBeforeBlock: !trailingSpaceBeforeBlockCollapses,\n            includePreLineTrailingSpace: true\n        };\n\n        var defaultWordOptions = {\n            \"en\": {\n                wordRegex: /[a-z0-9]+('[a-z0-9]+)*/gi,\n                includeTrailingSpace: false,\n                tokenizer: defaultTokenizer\n            }\n        };\n\n        var defaultFindOptions = {\n            caseSensitive: false,\n            withinRange: null,\n            wholeWordsOnly: false,\n            wrap: false,\n            direction: \"forward\",\n            wordOptions: null,\n            characterOptions: null\n        };\n\n        var defaultMoveOptions = {\n            wordOptions: null,\n            characterOptions: null\n        };\n\n        var defaultExpandOptions = {\n            wordOptions: null,\n            characterOptions: null,\n            trim: false,\n            trimStart: true,\n            trimEnd: true\n        };\n\n        var defaultWordIteratorOptions = {\n            wordOptions: null,\n            characterOptions: null,\n            direction: \"forward\"\n        };\n\n        function createWordOptions(options) {\n            var lang, defaults;\n            if (!options) {\n                return defaultWordOptions[defaultLanguage];\n            } else {\n                lang = options.language || defaultLanguage;\n                defaults = {};\n                extend(defaults, defaultWordOptions[lang] || defaultWordOptions[defaultLanguage]);\n                extend(defaults, options);\n                return defaults;\n            }\n        }\n\n        function createNestedOptions(optionsParam, defaults) {\n            var options = createOptions(optionsParam, defaults);\n            if (defaults.hasOwnProperty(\"wordOptions\")) {\n                options.wordOptions = createWordOptions(options.wordOptions);\n            }\n            if (defaults.hasOwnProperty(\"characterOptions\")) {\n                options.characterOptions = createOptions(options.characterOptions, defaultCharacterOptions);\n            }\n            return options;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        /* DOM utility functions */\n        var getComputedStyleProperty = dom.getComputedStyleProperty;\n\n        // Create cachable versions of DOM functions\n\n        // Test for old IE's incorrect display properties\n        var tableCssDisplayBlock;\n        (function() {\n            var table = document.createElement(\"table\");\n            var body = getBody(document);\n            body.appendChild(table);\n            tableCssDisplayBlock = (getComputedStyleProperty(table, \"display\") == \"block\");\n            body.removeChild(table);\n        })();\n\n        var defaultDisplayValueForTag = {\n            table: \"table\",\n            caption: \"table-caption\",\n            colgroup: \"table-column-group\",\n            col: \"table-column\",\n            thead: \"table-header-group\",\n            tbody: \"table-row-group\",\n            tfoot: \"table-footer-group\",\n            tr: \"table-row\",\n            td: \"table-cell\",\n            th: \"table-cell\"\n        };\n\n        // Corrects IE's \"block\" value for table-related elements\n        function getComputedDisplay(el, win) {\n            var display = getComputedStyleProperty(el, \"display\", win);\n            var tagName = el.tagName.toLowerCase();\n            return (display == \"block\" &&\n                    tableCssDisplayBlock &&\n                    defaultDisplayValueForTag.hasOwnProperty(tagName)) ?\n                defaultDisplayValueForTag[tagName] : display;\n        }\n\n        function isHidden(node) {\n            var ancestors = getAncestorsAndSelf(node);\n            for (var i = 0, len = ancestors.length; i < len; ++i) {\n                if (ancestors[i].nodeType == 1 && getComputedDisplay(ancestors[i]) == \"none\") {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        function isVisibilityHiddenTextNode(textNode) {\n            var el;\n            return textNode.nodeType == 3 &&\n                (el = textNode.parentNode) &&\n                getComputedStyleProperty(el, \"visibility\") == \"hidden\";\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n    \n        // \"A block node is either an Element whose \"display\" property does not have\n        // resolved value \"inline\" or \"inline-block\" or \"inline-table\" or \"none\", or a\n        // Document, or a DocumentFragment.\"\n        function isBlockNode(node) {\n            return node &&\n                ((node.nodeType == 1 && !/^(inline(-block|-table)?|none)$/.test(getComputedDisplay(node))) ||\n                node.nodeType == 9 || node.nodeType == 11);\n        }\n\n        function getLastDescendantOrSelf(node) {\n            var lastChild = node.lastChild;\n            return lastChild ? getLastDescendantOrSelf(lastChild) : node;\n        }\n\n        function containsPositions(node) {\n            return dom.isCharacterDataNode(node) ||\n                !/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(node.nodeName);\n        }\n\n        function getAncestors(node) {\n            var ancestors = [];\n            while (node.parentNode) {\n                ancestors.unshift(node.parentNode);\n                node = node.parentNode;\n            }\n            return ancestors;\n        }\n\n        function getAncestorsAndSelf(node) {\n            return getAncestors(node).concat([node]);\n        }\n\n        function nextNodeDescendants(node) {\n            while (node && !node.nextSibling) {\n                node = node.parentNode;\n            }\n            if (!node) {\n                return null;\n            }\n            return node.nextSibling;\n        }\n\n        function nextNode(node, excludeChildren) {\n            if (!excludeChildren && node.hasChildNodes()) {\n                return node.firstChild;\n            }\n            return nextNodeDescendants(node);\n        }\n\n        function previousNode(node) {\n            var previous = node.previousSibling;\n            if (previous) {\n                node = previous;\n                while (node.hasChildNodes()) {\n                    node = node.lastChild;\n                }\n                return node;\n            }\n            var parent = node.parentNode;\n            if (parent && parent.nodeType == 1) {\n                return parent;\n            }\n            return null;\n        }\n\n        // Adpated from Aryeh's code.\n        // \"A whitespace node is either a Text node whose data is the empty string; or\n        // a Text node whose data consists only of one or more tabs (0x0009), line\n        // feeds (0x000A), carriage returns (0x000D), and/or spaces (0x0020), and whose\n        // parent is an Element whose resolved value for \"white-space\" is \"normal\" or\n        // \"nowrap\"; or a Text node whose data consists only of one or more tabs\n        // (0x0009), carriage returns (0x000D), and/or spaces (0x0020), and whose\n        // parent is an Element whose resolved value for \"white-space\" is \"pre-line\".\"\n        function isWhitespaceNode(node) {\n            if (!node || node.nodeType != 3) {\n                return false;\n            }\n            var text = node.data;\n            if (text === \"\") {\n                return true;\n            }\n            var parent = node.parentNode;\n            if (!parent || parent.nodeType != 1) {\n                return false;\n            }\n            var computedWhiteSpace = getComputedStyleProperty(node.parentNode, \"whiteSpace\");\n\n            return (/^[\\t\\n\\r ]+$/.test(text) && /^(normal|nowrap)$/.test(computedWhiteSpace)) ||\n                (/^[\\t\\r ]+$/.test(text) && computedWhiteSpace == \"pre-line\");\n        }\n\n        // Adpated from Aryeh's code.\n        // \"node is a collapsed whitespace node if the following algorithm returns\n        // true:\"\n        function isCollapsedWhitespaceNode(node) {\n            // \"If node's data is the empty string, return true.\"\n            if (node.data === \"\") {\n                return true;\n            }\n\n            // \"If node is not a whitespace node, return false.\"\n            if (!isWhitespaceNode(node)) {\n                return false;\n            }\n\n            // \"Let ancestor be node's parent.\"\n            var ancestor = node.parentNode;\n\n            // \"If ancestor is null, return true.\"\n            if (!ancestor) {\n                return true;\n            }\n\n            // \"If the \"display\" property of some ancestor of node has resolved value \"none\", return true.\"\n            if (isHidden(node)) {\n                return true;\n            }\n\n            return false;\n        }\n\n        function isCollapsedNode(node) {\n            var type = node.nodeType;\n            return type == 7 /* PROCESSING_INSTRUCTION */ ||\n                type == 8 /* COMMENT */ ||\n                isHidden(node) ||\n                /^(script|style)$/i.test(node.nodeName) ||\n                isVisibilityHiddenTextNode(node) ||\n                isCollapsedWhitespaceNode(node);\n        }\n\n        function isIgnoredNode(node, win) {\n            var type = node.nodeType;\n            return type == 7 /* PROCESSING_INSTRUCTION */ ||\n                type == 8 /* COMMENT */ ||\n                (type == 1 && getComputedDisplay(node, win) == \"none\");\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Possibly overengineered caching system to prevent repeated DOM calls slowing everything down\n\n        function Cache() {\n            this.store = {};\n        }\n\n        Cache.prototype = {\n            get: function(key) {\n                return this.store.hasOwnProperty(key) ? this.store[key] : null;\n            },\n\n            set: function(key, value) {\n                return this.store[key] = value;\n            }\n        };\n\n        var cachedCount = 0, uncachedCount = 0;\n\n        function createCachingGetter(methodName, func, objProperty) {\n            return function(args) {\n                var cache = this.cache;\n                if (cache.hasOwnProperty(methodName)) {\n                    cachedCount++;\n                    return cache[methodName];\n                } else {\n                    uncachedCount++;\n                    var value = func.call(this, objProperty ? this[objProperty] : this, args);\n                    cache[methodName] = value;\n                    return value;\n                }\n            };\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function NodeWrapper(node, session) {\n            this.node = node;\n            this.session = session;\n            this.cache = new Cache();\n            this.positions = new Cache();\n        }\n\n        var nodeProto = {\n            getPosition: function(offset) {\n                var positions = this.positions;\n                return positions.get(offset) || positions.set(offset, new Position(this, offset));\n            },\n\n            toString: function() {\n                return \"[NodeWrapper(\" + dom.inspectNode(this.node) + \")]\";\n            }\n        };\n\n        NodeWrapper.prototype = nodeProto;\n\n        var EMPTY = \"EMPTY\",\n            NON_SPACE = \"NON_SPACE\",\n            UNCOLLAPSIBLE_SPACE = \"UNCOLLAPSIBLE_SPACE\",\n            COLLAPSIBLE_SPACE = \"COLLAPSIBLE_SPACE\",\n            TRAILING_SPACE_BEFORE_BLOCK = \"TRAILING_SPACE_BEFORE_BLOCK\",\n            TRAILING_SPACE_IN_BLOCK = \"TRAILING_SPACE_IN_BLOCK\",\n            TRAILING_SPACE_BEFORE_BR = \"TRAILING_SPACE_BEFORE_BR\",\n            PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK = \"PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK\",\n            TRAILING_LINE_BREAK_AFTER_BR = \"TRAILING_LINE_BREAK_AFTER_BR\",\n            INCLUDED_TRAILING_LINE_BREAK_AFTER_BR = \"INCLUDED_TRAILING_LINE_BREAK_AFTER_BR\";\n\n        extend(nodeProto, {\n            isCharacterDataNode: createCachingGetter(\"isCharacterDataNode\", dom.isCharacterDataNode, \"node\"),\n            getNodeIndex: createCachingGetter(\"nodeIndex\", dom.getNodeIndex, \"node\"),\n            getLength: createCachingGetter(\"nodeLength\", dom.getNodeLength, \"node\"),\n            containsPositions: createCachingGetter(\"containsPositions\", containsPositions, \"node\"),\n            isWhitespace: createCachingGetter(\"isWhitespace\", isWhitespaceNode, \"node\"),\n            isCollapsedWhitespace: createCachingGetter(\"isCollapsedWhitespace\", isCollapsedWhitespaceNode, \"node\"),\n            getComputedDisplay: createCachingGetter(\"computedDisplay\", getComputedDisplay, \"node\"),\n            isCollapsed: createCachingGetter(\"collapsed\", isCollapsedNode, \"node\"),\n            isIgnored: createCachingGetter(\"ignored\", isIgnoredNode, \"node\"),\n            next: createCachingGetter(\"nextPos\", nextNode, \"node\"),\n            previous: createCachingGetter(\"previous\", previousNode, \"node\"),\n\n            getTextNodeInfo: createCachingGetter(\"textNodeInfo\", function(textNode) {\n                var spaceRegex = null, collapseSpaces = false;\n                var cssWhitespace = getComputedStyleProperty(textNode.parentNode, \"whiteSpace\");\n                var preLine = (cssWhitespace == \"pre-line\");\n                if (preLine) {\n                    spaceRegex = spacesMinusLineBreaksRegex;\n                    collapseSpaces = true;\n                } else if (cssWhitespace == \"normal\" || cssWhitespace == \"nowrap\") {\n                    spaceRegex = spacesRegex;\n                    collapseSpaces = true;\n                }\n\n                return {\n                    node: textNode,\n                    text: textNode.data,\n                    spaceRegex: spaceRegex,\n                    collapseSpaces: collapseSpaces,\n                    preLine: preLine\n                };\n            }, \"node\"),\n\n            hasInnerText: createCachingGetter(\"hasInnerText\", function(el, backward) {\n                var session = this.session;\n                var posAfterEl = session.getPosition(el.parentNode, this.getNodeIndex() + 1);\n                var firstPosInEl = session.getPosition(el, 0);\n\n                var pos = backward ? posAfterEl : firstPosInEl;\n                var endPos = backward ? firstPosInEl : posAfterEl;\n\n                /*\n                 <body><p>X  </p><p>Y</p></body>\n\n                 Positions:\n\n                 body:0:\"\"\n                 p:0:\"\"\n                 text:0:\"\"\n                 text:1:\"X\"\n                 text:2:TRAILING_SPACE_IN_BLOCK\n                 text:3:COLLAPSED_SPACE\n                 p:1:\"\"\n                 body:1:\"\\n\"\n                 p:0:\"\"\n                 text:0:\"\"\n                 text:1:\"Y\"\n\n                 A character is a TRAILING_SPACE_IN_BLOCK iff:\n\n                 - There is no uncollapsed character after it within the visible containing block element\n\n                 A character is a TRAILING_SPACE_BEFORE_BR iff:\n\n                 - There is no uncollapsed character after it preceding a <br> element\n\n                 An element has inner text iff\n\n                 - It is not hidden\n                 - It contains an uncollapsed character\n\n                 All trailing spaces (pre-line, before <br>, end of block) require definite non-empty characters to render.\n                 */\n\n                while (pos !== endPos) {\n                    pos.prepopulateChar();\n                    if (pos.isDefinitelyNonEmpty()) {\n                        return true;\n                    }\n                    pos = backward ? pos.previousVisible() : pos.nextVisible();\n                }\n\n                return false;\n            }, \"node\"),\n\n            isRenderedBlock: createCachingGetter(\"isRenderedBlock\", function(el) {\n                // Ensure that a block element containing a <br> is considered to have inner text\n                var brs = el.getElementsByTagName(\"br\");\n                for (var i = 0, len = brs.length; i < len; ++i) {\n                    if (!isCollapsedNode(brs[i])) {\n                        return true;\n                    }\n                }\n                // Ensure that a block element containing a <svg> is considered to have inner text\n                // as otherwise it will crash IE11\n                var svgs = el.getElementsByTagName(\"svg\");\n                if (svgs.length) {\n                    return true;\n                }\n                return this.hasInnerText();\n            }, \"node\"),\n\n            getTrailingSpace: createCachingGetter(\"trailingSpace\", function(el) {\n                if (el.tagName.toLowerCase() == \"br\") {\n                    return \"\";\n                } else {\n                    switch (this.getComputedDisplay()) {\n                        case \"inline\":\n                            var child = el.lastChild;\n                            while (child) {\n                                if (!isIgnoredNode(child)) {\n                                    return (child.nodeType == 1) ? this.session.getNodeWrapper(child).getTrailingSpace() : \"\";\n                                }\n                                child = child.previousSibling;\n                            }\n                            break;\n                        case \"inline-block\":\n                        case \"inline-table\":\n                        case \"none\":\n                        case \"table-column\":\n                        case \"table-column-group\":\n                            break;\n                        case \"table-cell\":\n                            return \"\\t\";\n                        default:\n                            return this.isRenderedBlock(true) ? \"\\n\" : \"\";\n                    }\n                }\n                return \"\";\n            }, \"node\"),\n\n            getLeadingSpace: createCachingGetter(\"leadingSpace\", function(el) {\n                switch (this.getComputedDisplay()) {\n                    case \"inline\":\n                    case \"inline-block\":\n                    case \"inline-table\":\n                    case \"none\":\n                    case \"table-column\":\n                    case \"table-column-group\":\n                    case \"table-cell\":\n                        break;\n                    default:\n                        return this.isRenderedBlock(false) ? \"\\n\" : \"\";\n                }\n                return \"\";\n            }, \"node\")\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function Position(nodeWrapper, offset) {\n            this.offset = offset;\n            this.nodeWrapper = nodeWrapper;\n            this.node = nodeWrapper.node;\n            this.session = nodeWrapper.session;\n            this.cache = new Cache();\n        }\n\n        function inspectPosition() {\n            return \"[Position(\" + dom.inspectNode(this.node) + \":\" + this.offset + \")]\";\n        }\n\n        var positionProto = {\n            character: \"\",\n            characterType: EMPTY,\n            isBr: false,\n\n            /*\n            This method:\n            - Fully populates positions that have characters that can be determined independently of any other characters.\n            - Populates most types of space positions with a provisional character. The character is finalized later.\n             */\n            prepopulateChar: function() {\n                var pos = this;\n                if (!pos.prepopulatedChar) {\n                    var node = pos.node, offset = pos.offset;\n                    var visibleChar = \"\", charType = EMPTY;\n                    var finalizedChar = false;\n                    if (offset > 0) {\n                        if (node.nodeType == 3) {\n                            var text = node.data;\n                            var textChar = text.charAt(offset - 1);\n\n                            var nodeInfo = pos.nodeWrapper.getTextNodeInfo();\n                            var spaceRegex = nodeInfo.spaceRegex;\n                            if (nodeInfo.collapseSpaces) {\n                                if (spaceRegex.test(textChar)) {\n                                    // \"If the character at position is from set, append a single space (U+0020) to newdata and advance\n                                    // position until the character at position is not from set.\"\n\n                                    // We also need to check for the case where we're in a pre-line and we have a space preceding a\n                                    // line break, because such spaces are collapsed in some browsers\n                                    if (offset > 1 && spaceRegex.test(text.charAt(offset - 2))) {\n                                    } else if (nodeInfo.preLine && text.charAt(offset) === \"\\n\") {\n                                        visibleChar = \" \";\n                                        charType = PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK;\n                                    } else {\n                                        visibleChar = \" \";\n                                        //pos.checkForFollowingLineBreak = true;\n                                        charType = COLLAPSIBLE_SPACE;\n                                    }\n                                } else {\n                                    visibleChar = textChar;\n                                    charType = NON_SPACE;\n                                    finalizedChar = true;\n                                }\n                            } else {\n                                visibleChar = textChar;\n                                charType = UNCOLLAPSIBLE_SPACE;\n                                finalizedChar = true;\n                            }\n                        } else {\n                            var nodePassed = node.childNodes[offset - 1];\n                            if (nodePassed && nodePassed.nodeType == 1 && !isCollapsedNode(nodePassed)) {\n                                if (nodePassed.tagName.toLowerCase() == \"br\") {\n                                    visibleChar = \"\\n\";\n                                    pos.isBr = true;\n                                    charType = COLLAPSIBLE_SPACE;\n                                    finalizedChar = false;\n                                } else {\n                                    pos.checkForTrailingSpace = true;\n                                }\n                            }\n\n                            // Check the leading space of the next node for the case when a block element follows an inline\n                            // element or text node. In that case, there is an implied line break between the two nodes.\n                            if (!visibleChar) {\n                                var nextNode = node.childNodes[offset];\n                                if (nextNode && nextNode.nodeType == 1 && !isCollapsedNode(nextNode)) {\n                                    pos.checkForLeadingSpace = true;\n                                }\n                            }\n                        }\n                    }\n\n                    pos.prepopulatedChar = true;\n                    pos.character = visibleChar;\n                    pos.characterType = charType;\n                    pos.isCharInvariant = finalizedChar;\n                }\n            },\n\n            isDefinitelyNonEmpty: function() {\n                var charType = this.characterType;\n                return charType == NON_SPACE || charType == UNCOLLAPSIBLE_SPACE;\n            },\n\n            // Resolve leading and trailing spaces, which may involve prepopulating other positions\n            resolveLeadingAndTrailingSpaces: function() {\n                if (!this.prepopulatedChar) {\n                    this.prepopulateChar();\n                }\n                if (this.checkForTrailingSpace) {\n                    var trailingSpace = this.session.getNodeWrapper(this.node.childNodes[this.offset - 1]).getTrailingSpace();\n                    if (trailingSpace) {\n                        this.isTrailingSpace = true;\n                        this.character = trailingSpace;\n                        this.characterType = COLLAPSIBLE_SPACE;\n                    }\n                    this.checkForTrailingSpace = false;\n                }\n                if (this.checkForLeadingSpace) {\n                    var leadingSpace = this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();\n                    if (leadingSpace) {\n                        this.isLeadingSpace = true;\n                        this.character = leadingSpace;\n                        this.characterType = COLLAPSIBLE_SPACE;\n                    }\n                    this.checkForLeadingSpace = false;\n                }\n            },\n\n            getPrecedingUncollapsedPosition: function(characterOptions) {\n                var pos = this, character;\n                while ( (pos = pos.previousVisible()) ) {\n                    character = pos.getCharacter(characterOptions);\n                    if (character !== \"\") {\n                        return pos;\n                    }\n                }\n\n                return null;\n            },\n\n            getCharacter: function(characterOptions) {\n                this.resolveLeadingAndTrailingSpaces();\n\n                var thisChar = this.character, returnChar;\n\n                // Check if character is ignored\n                var ignoredChars = normalizeIgnoredCharacters(characterOptions.ignoreCharacters);\n                var isIgnoredCharacter = (thisChar !== \"\" && ignoredChars.indexOf(thisChar) > -1);\n\n                // Check if this position's  character is invariant (i.e. not dependent on character options) and return it\n                // if so\n                if (this.isCharInvariant) {\n                    returnChar = isIgnoredCharacter ? \"\" : thisChar;\n                    return returnChar;\n                }\n\n                var cacheKey = [\"character\", characterOptions.includeSpaceBeforeBr, characterOptions.includeBlockContentTrailingSpace, characterOptions.includePreLineTrailingSpace, ignoredChars].join(\"_\");\n                var cachedChar = this.cache.get(cacheKey);\n                if (cachedChar !== null) {\n                    return cachedChar;\n                }\n\n                // We need to actually get the character now\n                var character = \"\";\n                var collapsible = (this.characterType == COLLAPSIBLE_SPACE);\n\n                var nextPos, previousPos;\n                var gotPreviousPos = false;\n                var pos = this;\n\n                function getPreviousPos() {\n                    if (!gotPreviousPos) {\n                        previousPos = pos.getPrecedingUncollapsedPosition(characterOptions);\n                        gotPreviousPos = true;\n                    }\n                    return previousPos;\n                }\n\n                // Disallow a collapsible space that is followed by a line break or is the last character\n                if (collapsible) {\n                    // Allow a trailing space that we've previously determined should be included\n                    if (this.type == INCLUDED_TRAILING_LINE_BREAK_AFTER_BR) {\n                        character = \"\\n\";\n                    }\n                    // Disallow a collapsible space that follows a trailing space or line break, or is the first character,\n                    // or follows a collapsible included space\n                    else if (thisChar == \" \" &&\n                            (!getPreviousPos() || previousPos.isTrailingSpace || previousPos.character == \"\\n\" || (previousPos.character == \" \" && previousPos.characterType == COLLAPSIBLE_SPACE))) {\n                    }\n                    // Allow a leading line break unless it follows a line break\n                    else if (thisChar == \"\\n\" && this.isLeadingSpace) {\n                        if (getPreviousPos() && previousPos.character != \"\\n\") {\n                            character = \"\\n\";\n                        } else {\n                        }\n                    } else {\n                        nextPos = this.nextUncollapsed();\n                        if (nextPos) {\n                            if (nextPos.isBr) {\n                                this.type = TRAILING_SPACE_BEFORE_BR;\n                            } else if (nextPos.isTrailingSpace && nextPos.character == \"\\n\") {\n                                this.type = TRAILING_SPACE_IN_BLOCK;\n                            } else if (nextPos.isLeadingSpace && nextPos.character == \"\\n\") {\n                                this.type = TRAILING_SPACE_BEFORE_BLOCK;\n                            }\n\n                            if (nextPos.character == \"\\n\") {\n                                if (this.type == TRAILING_SPACE_BEFORE_BR && !characterOptions.includeSpaceBeforeBr) {\n                                } else if (this.type == TRAILING_SPACE_BEFORE_BLOCK && !characterOptions.includeSpaceBeforeBlock) {\n                                } else if (this.type == TRAILING_SPACE_IN_BLOCK && nextPos.isTrailingSpace && !characterOptions.includeBlockContentTrailingSpace) {\n                                } else if (this.type == PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK && nextPos.type == NON_SPACE && !characterOptions.includePreLineTrailingSpace) {\n                                } else if (thisChar == \"\\n\") {\n                                    if (nextPos.isTrailingSpace) {\n                                        if (this.isTrailingSpace) {\n                                        } else if (this.isBr) {\n                                            nextPos.type = TRAILING_LINE_BREAK_AFTER_BR;\n\n                                            if (getPreviousPos() && previousPos.isLeadingSpace && !previousPos.isTrailingSpace && previousPos.character == \"\\n\") {\n                                                nextPos.character = \"\";\n                                            } else {\n                                                nextPos.type = INCLUDED_TRAILING_LINE_BREAK_AFTER_BR;\n                                            }\n                                        }\n                                    } else {\n                                        character = \"\\n\";\n                                    }\n                                } else if (thisChar == \" \") {\n                                    character = \" \";\n                                } else {\n                                }\n                            } else {\n                                character = thisChar;\n                            }\n                        } else {\n                        }\n                    }\n                }\n\n                if (ignoredChars.indexOf(character) > -1) {\n                    character = \"\";\n                }\n\n\n                this.cache.set(cacheKey, character);\n\n                return character;\n            },\n\n            equals: function(pos) {\n                return !!pos && this.node === pos.node && this.offset === pos.offset;\n            },\n\n            inspect: inspectPosition,\n\n            toString: function() {\n                return this.character;\n            }\n        };\n\n        Position.prototype = positionProto;\n\n        extend(positionProto, {\n            next: createCachingGetter(\"nextPos\", function(pos) {\n                var nodeWrapper = pos.nodeWrapper, node = pos.node, offset = pos.offset, session = nodeWrapper.session;\n                if (!node) {\n                    return null;\n                }\n                var nextNode, nextOffset, child;\n                if (offset == nodeWrapper.getLength()) {\n                    // Move onto the next node\n                    nextNode = node.parentNode;\n                    nextOffset = nextNode ? nodeWrapper.getNodeIndex() + 1 : 0;\n                } else {\n                    if (nodeWrapper.isCharacterDataNode()) {\n                        nextNode = node;\n                        nextOffset = offset + 1;\n                    } else {\n                        child = node.childNodes[offset];\n                        // Go into the children next, if children there are\n                        if (session.getNodeWrapper(child).containsPositions()) {\n                            nextNode = child;\n                            nextOffset = 0;\n                        } else {\n                            nextNode = node;\n                            nextOffset = offset + 1;\n                        }\n                    }\n                }\n\n                return nextNode ? session.getPosition(nextNode, nextOffset) : null;\n            }),\n\n            previous: createCachingGetter(\"previous\", function(pos) {\n                var nodeWrapper = pos.nodeWrapper, node = pos.node, offset = pos.offset, session = nodeWrapper.session;\n                var previousNode, previousOffset, child;\n                if (offset == 0) {\n                    previousNode = node.parentNode;\n                    previousOffset = previousNode ? nodeWrapper.getNodeIndex() : 0;\n                } else {\n                    if (nodeWrapper.isCharacterDataNode()) {\n                        previousNode = node;\n                        previousOffset = offset - 1;\n                    } else {\n                        child = node.childNodes[offset - 1];\n                        // Go into the children next, if children there are\n                        if (session.getNodeWrapper(child).containsPositions()) {\n                            previousNode = child;\n                            previousOffset = dom.getNodeLength(child);\n                        } else {\n                            previousNode = node;\n                            previousOffset = offset - 1;\n                        }\n                    }\n                }\n                return previousNode ? session.getPosition(previousNode, previousOffset) : null;\n            }),\n\n            /*\n             Next and previous position moving functions that filter out\n\n             - Hidden (CSS visibility/display) elements\n             - Script and style elements\n             */\n            nextVisible: createCachingGetter(\"nextVisible\", function(pos) {\n                var next = pos.next();\n                if (!next) {\n                    return null;\n                }\n                var nodeWrapper = next.nodeWrapper, node = next.node;\n                var newPos = next;\n                if (nodeWrapper.isCollapsed()) {\n                    // We're skipping this node and all its descendants\n                    newPos = nodeWrapper.session.getPosition(node.parentNode, nodeWrapper.getNodeIndex() + 1);\n                }\n                return newPos;\n            }),\n\n            nextUncollapsed: createCachingGetter(\"nextUncollapsed\", function(pos) {\n                var nextPos = pos;\n                while ( (nextPos = nextPos.nextVisible()) ) {\n                    nextPos.resolveLeadingAndTrailingSpaces();\n                    if (nextPos.character !== \"\") {\n                        return nextPos;\n                    }\n                }\n                return null;\n            }),\n\n            previousVisible: createCachingGetter(\"previousVisible\", function(pos) {\n                var previous = pos.previous();\n                if (!previous) {\n                    return null;\n                }\n                var nodeWrapper = previous.nodeWrapper, node = previous.node;\n                var newPos = previous;\n                if (nodeWrapper.isCollapsed()) {\n                    // We're skipping this node and all its descendants\n                    newPos = nodeWrapper.session.getPosition(node.parentNode, nodeWrapper.getNodeIndex());\n                }\n                return newPos;\n            })\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        var currentSession = null;\n\n        var Session = (function() {\n            function createWrapperCache(nodeProperty) {\n                var cache = new Cache();\n\n                return {\n                    get: function(node) {\n                        var wrappersByProperty = cache.get(node[nodeProperty]);\n                        if (wrappersByProperty) {\n                            for (var i = 0, wrapper; wrapper = wrappersByProperty[i++]; ) {\n                                if (wrapper.node === node) {\n                                    return wrapper;\n                                }\n                            }\n                        }\n                        return null;\n                    },\n\n                    set: function(nodeWrapper) {\n                        var property = nodeWrapper.node[nodeProperty];\n                        var wrappersByProperty = cache.get(property) || cache.set(property, []);\n                        wrappersByProperty.push(nodeWrapper);\n                    }\n                };\n            }\n\n            var uniqueIDSupported = util.isHostProperty(document.documentElement, \"uniqueID\");\n\n            function Session() {\n                this.initCaches();\n            }\n\n            Session.prototype = {\n                initCaches: function() {\n                    this.elementCache = uniqueIDSupported ? (function() {\n                        var elementsCache = new Cache();\n\n                        return {\n                            get: function(el) {\n                                return elementsCache.get(el.uniqueID);\n                            },\n\n                            set: function(elWrapper) {\n                                elementsCache.set(elWrapper.node.uniqueID, elWrapper);\n                            }\n                        };\n                    })() : createWrapperCache(\"tagName\");\n\n                    // Store text nodes keyed by data, although we may need to truncate this\n                    this.textNodeCache = createWrapperCache(\"data\");\n                    this.otherNodeCache = createWrapperCache(\"nodeName\");\n                },\n\n                getNodeWrapper: function(node) {\n                    var wrapperCache;\n                    switch (node.nodeType) {\n                        case 1:\n                            wrapperCache = this.elementCache;\n                            break;\n                        case 3:\n                            wrapperCache = this.textNodeCache;\n                            break;\n                        default:\n                            wrapperCache = this.otherNodeCache;\n                            break;\n                    }\n\n                    var wrapper = wrapperCache.get(node);\n                    if (!wrapper) {\n                        wrapper = new NodeWrapper(node, this);\n                        wrapperCache.set(wrapper);\n                    }\n                    return wrapper;\n                },\n\n                getPosition: function(node, offset) {\n                    return this.getNodeWrapper(node).getPosition(offset);\n                },\n\n                getRangeBoundaryPosition: function(range, isStart) {\n                    var prefix = isStart ? \"start\" : \"end\";\n                    return this.getPosition(range[prefix + \"Container\"], range[prefix + \"Offset\"]);\n                },\n\n                detach: function() {\n                    this.elementCache = this.textNodeCache = this.otherNodeCache = null;\n                }\n            };\n\n            return Session;\n        })();\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function startSession() {\n            endSession();\n            return (currentSession = new Session());\n        }\n\n        function getSession() {\n            return currentSession || startSession();\n        }\n\n        function endSession() {\n            if (currentSession) {\n                currentSession.detach();\n            }\n            currentSession = null;\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the rangy.dom utility object\n\n        extend(dom, {\n            nextNode: nextNode,\n            previousNode: previousNode\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        function createCharacterIterator(startPos, backward, endPos, characterOptions) {\n\n            // Adjust the end position to ensure that it is actually reached\n            if (endPos) {\n                if (backward) {\n                    if (isCollapsedNode(endPos.node)) {\n                        endPos = startPos.previousVisible();\n                    }\n                } else {\n                    if (isCollapsedNode(endPos.node)) {\n                        endPos = endPos.nextVisible();\n                    }\n                }\n            }\n\n            var pos = startPos, finished = false;\n\n            function next() {\n                var charPos = null;\n                if (backward) {\n                    charPos = pos;\n                    if (!finished) {\n                        pos = pos.previousVisible();\n                        finished = !pos || (endPos && pos.equals(endPos));\n                    }\n                } else {\n                    if (!finished) {\n                        charPos = pos = pos.nextVisible();\n                        finished = !pos || (endPos && pos.equals(endPos));\n                    }\n                }\n                if (finished) {\n                    pos = null;\n                }\n                return charPos;\n            }\n\n            var previousTextPos, returnPreviousTextPos = false;\n\n            return {\n                next: function() {\n                    if (returnPreviousTextPos) {\n                        returnPreviousTextPos = false;\n                        return previousTextPos;\n                    } else {\n                        var pos, character;\n                        while ( (pos = next()) ) {\n                            character = pos.getCharacter(characterOptions);\n                            if (character) {\n                                previousTextPos = pos;\n                                return pos;\n                            }\n                        }\n                        return null;\n                    }\n                },\n\n                rewind: function() {\n                    if (previousTextPos) {\n                        returnPreviousTextPos = true;\n                    } else {\n                        throw module.createError(\"createCharacterIterator: cannot rewind. Only one position can be rewound.\");\n                    }\n                },\n\n                dispose: function() {\n                    startPos = endPos = null;\n                }\n            };\n        }\n\n        var arrayIndexOf = Array.prototype.indexOf ?\n            function(arr, val) {\n                return arr.indexOf(val);\n            } :\n            function(arr, val) {\n                for (var i = 0, len = arr.length; i < len; ++i) {\n                    if (arr[i] === val) {\n                        return i;\n                    }\n                }\n                return -1;\n            };\n\n        // Provides a pair of iterators over text positions, tokenized. Transparently requests more text when next()\n        // is called and there is no more tokenized text\n        function createTokenizedTextProvider(pos, characterOptions, wordOptions) {\n            var forwardIterator = createCharacterIterator(pos, false, null, characterOptions);\n            var backwardIterator = createCharacterIterator(pos, true, null, characterOptions);\n            var tokenizer = wordOptions.tokenizer;\n\n            // Consumes a word and the whitespace beyond it\n            function consumeWord(forward) {\n                var pos, textChar;\n                var newChars = [], it = forward ? forwardIterator : backwardIterator;\n\n                var passedWordBoundary = false, insideWord = false;\n\n                while ( (pos = it.next()) ) {\n                    textChar = pos.character;\n\n\n                    if (allWhiteSpaceRegex.test(textChar)) {\n                        if (insideWord) {\n                            insideWord = false;\n                            passedWordBoundary = true;\n                        }\n                    } else {\n                        if (passedWordBoundary) {\n                            it.rewind();\n                            break;\n                        } else {\n                            insideWord = true;\n                        }\n                    }\n                    newChars.push(pos);\n                }\n\n\n                return newChars;\n            }\n\n            // Get initial word surrounding initial position and tokenize it\n            var forwardChars = consumeWord(true);\n            var backwardChars = consumeWord(false).reverse();\n            var tokens = tokenize(backwardChars.concat(forwardChars), wordOptions, tokenizer);\n\n            // Create initial token buffers\n            var forwardTokensBuffer = forwardChars.length ?\n                tokens.slice(arrayIndexOf(tokens, forwardChars[0].token)) : [];\n\n            var backwardTokensBuffer = backwardChars.length ?\n                tokens.slice(0, arrayIndexOf(tokens, backwardChars.pop().token) + 1) : [];\n\n            function inspectBuffer(buffer) {\n                var textPositions = [\"[\" + buffer.length + \"]\"];\n                for (var i = 0; i < buffer.length; ++i) {\n                    textPositions.push(\"(word: \" + buffer[i] + \", is word: \" + buffer[i].isWord + \")\");\n                }\n                return textPositions;\n            }\n\n\n            return {\n                nextEndToken: function() {\n                    var lastToken, forwardChars;\n\n                    // If we're down to the last token, consume character chunks until we have a word or run out of\n                    // characters to consume\n                    while ( forwardTokensBuffer.length == 1 &&\n                        !(lastToken = forwardTokensBuffer[0]).isWord &&\n                        (forwardChars = consumeWord(true)).length > 0) {\n\n                        // Merge trailing non-word into next word and tokenize\n                        forwardTokensBuffer = tokenize(lastToken.chars.concat(forwardChars), wordOptions, tokenizer);\n                    }\n\n                    return forwardTokensBuffer.shift();\n                },\n\n                previousStartToken: function() {\n                    var lastToken, backwardChars;\n\n                    // If we're down to the last token, consume character chunks until we have a word or run out of\n                    // characters to consume\n                    while ( backwardTokensBuffer.length == 1 &&\n                        !(lastToken = backwardTokensBuffer[0]).isWord &&\n                        (backwardChars = consumeWord(false)).length > 0) {\n\n                        // Merge leading non-word into next word and tokenize\n                        backwardTokensBuffer = tokenize(backwardChars.reverse().concat(lastToken.chars), wordOptions, tokenizer);\n                    }\n\n                    return backwardTokensBuffer.pop();\n                },\n\n                dispose: function() {\n                    forwardIterator.dispose();\n                    backwardIterator.dispose();\n                    forwardTokensBuffer = backwardTokensBuffer = null;\n                }\n            };\n        }\n\n        function movePositionBy(pos, unit, count, characterOptions, wordOptions) {\n            var unitsMoved = 0, currentPos, newPos = pos, charIterator, nextPos, absCount = Math.abs(count), token;\n            if (count !== 0) {\n                var backward = (count < 0);\n\n                switch (unit) {\n                    case CHARACTER:\n                        charIterator = createCharacterIterator(pos, backward, null, characterOptions);\n                        while ( (currentPos = charIterator.next()) && unitsMoved < absCount ) {\n                            ++unitsMoved;\n                            newPos = currentPos;\n                        }\n                        nextPos = currentPos;\n                        charIterator.dispose();\n                        break;\n                    case WORD:\n                        var tokenizedTextProvider = createTokenizedTextProvider(pos, characterOptions, wordOptions);\n                        var next = backward ? tokenizedTextProvider.previousStartToken : tokenizedTextProvider.nextEndToken;\n\n                        while ( (token = next()) && unitsMoved < absCount ) {\n                            if (token.isWord) {\n                                ++unitsMoved;\n                                newPos = backward ? token.chars[0] : token.chars[token.chars.length - 1];\n                            }\n                        }\n                        break;\n                    default:\n                        throw new Error(\"movePositionBy: unit '\" + unit + \"' not implemented\");\n                }\n\n                // Perform any necessary position tweaks\n                if (backward) {\n                    newPos = newPos.previousVisible();\n                    unitsMoved = -unitsMoved;\n                } else if (newPos && newPos.isLeadingSpace && !newPos.isTrailingSpace) {\n                    // Tweak the position for the case of a leading space. The problem is that an uncollapsed leading space\n                    // before a block element (for example, the line break between \"1\" and \"2\" in the following HTML:\n                    // \"1<p>2</p>\") is considered to be attached to the position immediately before the block element, which\n                    // corresponds with a different selection position in most browsers from the one we want (i.e. at the\n                    // start of the contents of the block element). We get round this by advancing the position returned to\n                    // the last possible equivalent visible position.\n                    if (unit == WORD) {\n                        charIterator = createCharacterIterator(pos, false, null, characterOptions);\n                        nextPos = charIterator.next();\n                        charIterator.dispose();\n                    }\n                    if (nextPos) {\n                        newPos = nextPos.previousVisible();\n                    }\n                }\n            }\n\n\n            return {\n                position: newPos,\n                unitsMoved: unitsMoved\n            };\n        }\n\n        function createRangeCharacterIterator(session, range, characterOptions, backward) {\n            var rangeStart = session.getRangeBoundaryPosition(range, true);\n            var rangeEnd = session.getRangeBoundaryPosition(range, false);\n            var itStart = backward ? rangeEnd : rangeStart;\n            var itEnd = backward ? rangeStart : rangeEnd;\n\n            return createCharacterIterator(itStart, !!backward, itEnd, characterOptions);\n        }\n\n        function getRangeCharacters(session, range, characterOptions) {\n\n            var chars = [], it = createRangeCharacterIterator(session, range, characterOptions), pos;\n            while ( (pos = it.next()) ) {\n                chars.push(pos);\n            }\n\n            it.dispose();\n            return chars;\n        }\n\n        function isWholeWord(startPos, endPos, wordOptions) {\n            var range = api.createRange(startPos.node);\n            range.setStartAndEnd(startPos.node, startPos.offset, endPos.node, endPos.offset);\n            return !range.expand(\"word\", { wordOptions: wordOptions });\n        }\n\n        function findTextFromPosition(initialPos, searchTerm, isRegex, searchScopeRange, findOptions) {\n            var backward = isDirectionBackward(findOptions.direction);\n            var it = createCharacterIterator(\n                initialPos,\n                backward,\n                initialPos.session.getRangeBoundaryPosition(searchScopeRange, backward),\n                findOptions.characterOptions\n            );\n            var text = \"\", chars = [], pos, currentChar, matchStartIndex, matchEndIndex;\n            var result, insideRegexMatch;\n            var returnValue = null;\n\n            function handleMatch(startIndex, endIndex) {\n                var startPos = chars[startIndex].previousVisible();\n                var endPos = chars[endIndex - 1];\n                var valid = (!findOptions.wholeWordsOnly || isWholeWord(startPos, endPos, findOptions.wordOptions));\n\n                return {\n                    startPos: startPos,\n                    endPos: endPos,\n                    valid: valid\n                };\n            }\n\n            while ( (pos = it.next()) ) {\n                currentChar = pos.character;\n                if (!isRegex && !findOptions.caseSensitive) {\n                    currentChar = currentChar.toLowerCase();\n                }\n\n                if (backward) {\n                    chars.unshift(pos);\n                    text = currentChar + text;\n                } else {\n                    chars.push(pos);\n                    text += currentChar;\n                }\n\n                if (isRegex) {\n                    result = searchTerm.exec(text);\n                    if (result) {\n                        matchStartIndex = result.index;\n                        matchEndIndex = matchStartIndex + result[0].length;\n                        if (insideRegexMatch) {\n                            // Check whether the match is now over\n                            if ((!backward && matchEndIndex < text.length) || (backward && matchStartIndex > 0)) {\n                                returnValue = handleMatch(matchStartIndex, matchEndIndex);\n                                break;\n                            }\n                        } else {\n                            insideRegexMatch = true;\n                        }\n                    }\n                } else if ( (matchStartIndex = text.indexOf(searchTerm)) != -1 ) {\n                    returnValue = handleMatch(matchStartIndex, matchStartIndex + searchTerm.length);\n                    break;\n                }\n            }\n\n            // Check whether regex match extends to the end of the range\n            if (insideRegexMatch) {\n                returnValue = handleMatch(matchStartIndex, matchEndIndex);\n            }\n            it.dispose();\n\n            return returnValue;\n        }\n\n        function createEntryPointFunction(func) {\n            return function() {\n                var sessionRunning = !!currentSession;\n                var session = getSession();\n                var args = [session].concat( util.toArray(arguments) );\n                var returnValue = func.apply(this, args);\n                if (!sessionRunning) {\n                    endSession();\n                }\n                return returnValue;\n            };\n        }\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the Rangy Range object\n\n        function createRangeBoundaryMover(isStart, collapse) {\n            /*\n             Unit can be \"character\" or \"word\"\n             Options:\n\n             - includeTrailingSpace\n             - wordRegex\n             - tokenizer\n             - collapseSpaceBeforeLineBreak\n             */\n            return createEntryPointFunction(\n                function(session, unit, count, moveOptions) {\n                    if (typeof count == UNDEF) {\n                        count = unit;\n                        unit = CHARACTER;\n                    }\n                    moveOptions = createNestedOptions(moveOptions, defaultMoveOptions);\n\n                    var boundaryIsStart = isStart;\n                    if (collapse) {\n                        boundaryIsStart = (count >= 0);\n                        this.collapse(!boundaryIsStart);\n                    }\n                    var moveResult = movePositionBy(session.getRangeBoundaryPosition(this, boundaryIsStart), unit, count, moveOptions.characterOptions, moveOptions.wordOptions);\n                    var newPos = moveResult.position;\n                    this[boundaryIsStart ? \"setStart\" : \"setEnd\"](newPos.node, newPos.offset);\n                    return moveResult.unitsMoved;\n                }\n            );\n        }\n\n        function createRangeTrimmer(isStart) {\n            return createEntryPointFunction(\n                function(session, characterOptions) {\n                    characterOptions = createOptions(characterOptions, defaultCharacterOptions);\n                    var pos;\n                    var it = createRangeCharacterIterator(session, this, characterOptions, !isStart);\n                    var trimCharCount = 0;\n                    while ( (pos = it.next()) && allWhiteSpaceRegex.test(pos.character) ) {\n                        ++trimCharCount;\n                    }\n                    it.dispose();\n                    var trimmed = (trimCharCount > 0);\n                    if (trimmed) {\n                        this[isStart ? \"moveStart\" : \"moveEnd\"](\n                            \"character\",\n                            isStart ? trimCharCount : -trimCharCount,\n                            { characterOptions: characterOptions }\n                        );\n                    }\n                    return trimmed;\n                }\n            );\n        }\n\n        extend(api.rangePrototype, {\n            moveStart: createRangeBoundaryMover(true, false),\n\n            moveEnd: createRangeBoundaryMover(false, false),\n\n            move: createRangeBoundaryMover(true, true),\n\n            trimStart: createRangeTrimmer(true),\n\n            trimEnd: createRangeTrimmer(false),\n\n            trim: createEntryPointFunction(\n                function(session, characterOptions) {\n                    var startTrimmed = this.trimStart(characterOptions), endTrimmed = this.trimEnd(characterOptions);\n                    return startTrimmed || endTrimmed;\n                }\n            ),\n\n            expand: createEntryPointFunction(\n                function(session, unit, expandOptions) {\n                    var moved = false;\n                    expandOptions = createNestedOptions(expandOptions, defaultExpandOptions);\n                    var characterOptions = expandOptions.characterOptions;\n                    if (!unit) {\n                        unit = CHARACTER;\n                    }\n                    if (unit == WORD) {\n                        var wordOptions = expandOptions.wordOptions;\n                        var startPos = session.getRangeBoundaryPosition(this, true);\n                        var endPos = session.getRangeBoundaryPosition(this, false);\n\n                        var startTokenizedTextProvider = createTokenizedTextProvider(startPos, characterOptions, wordOptions);\n                        var startToken = startTokenizedTextProvider.nextEndToken();\n                        var newStartPos = startToken.chars[0].previousVisible();\n                        var endToken, newEndPos;\n\n                        if (this.collapsed) {\n                            endToken = startToken;\n                        } else {\n                            var endTokenizedTextProvider = createTokenizedTextProvider(endPos, characterOptions, wordOptions);\n                            endToken = endTokenizedTextProvider.previousStartToken();\n                        }\n                        newEndPos = endToken.chars[endToken.chars.length - 1];\n\n                        if (!newStartPos.equals(startPos)) {\n                            this.setStart(newStartPos.node, newStartPos.offset);\n                            moved = true;\n                        }\n                        if (newEndPos && !newEndPos.equals(endPos)) {\n                            this.setEnd(newEndPos.node, newEndPos.offset);\n                            moved = true;\n                        }\n\n                        if (expandOptions.trim) {\n                            if (expandOptions.trimStart) {\n                                moved = this.trimStart(characterOptions) || moved;\n                            }\n                            if (expandOptions.trimEnd) {\n                                moved = this.trimEnd(characterOptions) || moved;\n                            }\n                        }\n\n                        return moved;\n                    } else {\n                        return this.moveEnd(CHARACTER, 1, expandOptions);\n                    }\n                }\n            ),\n\n            text: createEntryPointFunction(\n                function(session, characterOptions) {\n                    return this.collapsed ?\n                        \"\" : getRangeCharacters(session, this, createOptions(characterOptions, defaultCharacterOptions)).join(\"\");\n                }\n            ),\n\n            selectCharacters: createEntryPointFunction(\n                function(session, containerNode, startIndex, endIndex, characterOptions) {\n                    var moveOptions = { characterOptions: characterOptions };\n                    if (!containerNode) {\n                        containerNode = getBody( this.getDocument() );\n                    }\n                    this.selectNodeContents(containerNode);\n                    this.collapse(true);\n                    this.moveStart(\"character\", startIndex, moveOptions);\n                    this.collapse(true);\n                    this.moveEnd(\"character\", endIndex - startIndex, moveOptions);\n                }\n            ),\n\n            // Character indexes are relative to the start of node\n            toCharacterRange: createEntryPointFunction(\n                function(session, containerNode, characterOptions) {\n                    if (!containerNode) {\n                        containerNode = getBody( this.getDocument() );\n                    }\n                    var parent = containerNode.parentNode, nodeIndex = dom.getNodeIndex(containerNode);\n                    var rangeStartsBeforeNode = (dom.comparePoints(this.startContainer, this.endContainer, parent, nodeIndex) == -1);\n                    var rangeBetween = this.cloneRange();\n                    var startIndex, endIndex;\n                    if (rangeStartsBeforeNode) {\n                        rangeBetween.setStartAndEnd(this.startContainer, this.startOffset, parent, nodeIndex);\n                        startIndex = -rangeBetween.text(characterOptions).length;\n                    } else {\n                        rangeBetween.setStartAndEnd(parent, nodeIndex, this.startContainer, this.startOffset);\n                        startIndex = rangeBetween.text(characterOptions).length;\n                    }\n                    endIndex = startIndex + this.text(characterOptions).length;\n\n                    return {\n                        start: startIndex,\n                        end: endIndex\n                    };\n                }\n            ),\n\n            findText: createEntryPointFunction(\n                function(session, searchTermParam, findOptions) {\n                    // Set up options\n                    findOptions = createNestedOptions(findOptions, defaultFindOptions);\n\n                    // Create word options if we're matching whole words only\n                    if (findOptions.wholeWordsOnly) {\n                        // We don't ever want trailing spaces for search results\n                        findOptions.wordOptions.includeTrailingSpace = false;\n                    }\n\n                    var backward = isDirectionBackward(findOptions.direction);\n                    //console.log(backward)\n\n                    // Create a range representing the search scope if none was provided\n                    var searchScopeRange = findOptions.withinRange;\n                    if (!searchScopeRange) {\n                        searchScopeRange = api.createRange();\n                        searchScopeRange.selectNodeContents(this.getDocument());\n                    }\n\n                    // Examine and prepare the search term\n                    var searchTerm = searchTermParam, isRegex = false;\n                    if (typeof searchTerm == \"string\") {\n                        if (!findOptions.caseSensitive) {\n                            searchTerm = searchTerm.toLowerCase();\n                        }\n                    } else {\n                        isRegex = true;\n                    }\n\n                    var initialPos = session.getRangeBoundaryPosition(this, !backward);\n                    \n\n                    // Adjust initial position if it lies outside the search scope\n                    var comparison = searchScopeRange.comparePoint(initialPos.node, initialPos.offset);\n                    //console.log(comparison)\n                    if (comparison === -1) {\n                        initialPos = session.getRangeBoundaryPosition(searchScopeRange, true);\n                    } else if (comparison === 1) {\n                        //initialPos = session.getRangeBoundaryPosition(searchScopeRange, false);\n                    }\n                    \n                    //console.log(initialPos)\n\n                    var pos = initialPos;\n                    var wrappedAround = false;\n\n                    // Try to find a match and ignore invalid ones\n                    var findResult;\n                    while (true) {\n                        try {\n                          findResult = findTextFromPosition(pos, searchTerm, isRegex, searchScopeRange, findOptions);\n                        }\n                        catch (e) {\n                          return false\n                        }\n                        if (findResult) {\n                            if (findResult.valid) {\n                                this.setStartAndEnd(findResult.startPos.node, findResult.startPos.offset, findResult.endPos.node, findResult.endPos.offset);\n                                //pos = findResult.startPos;\n                                //pos = backward ? findResult.startPos : findResult.endPos;\n                                //console.log(findResult.startPos.offset)\n                                return true;\n                            } else {\n                                // We've found a match that is not a whole word, so we carry on searching from the point immediately\n                                // after the match\n                                pos = backward ? findResult.startPos : findResult.endPos;\n                                //console.log(findResult.startPos)\n                            }\n                        } else if (findOptions.wrap && !wrappedAround) {\n                            // No result found but we're wrapping around and limiting the scope to the unsearched part of the range\n                            searchScopeRange = searchScopeRange.cloneRange();\n                            pos = session.getRangeBoundaryPosition(searchScopeRange, !backward);\n                            searchScopeRange.setBoundary(initialPos.node, initialPos.offset, backward);\n                            wrappedAround = true;\n                            \n                            console.log(1)\n                        } else {\n                            // Nothing found and we can't wrap around, so we're done\n                            return false;\n                        }\n                    }\n                }\n            ),\n\n            pasteHtml: function(html) {\n                this.deleteContents();\n                if (html) {\n                    var frag = this.createContextualFragment(html);\n                    var lastChild = frag.lastChild;\n                    this.insertNode(frag);\n                    this.collapseAfter(lastChild);\n                }\n            }\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the Rangy Selection object\n\n        function createSelectionTrimmer(methodName) {\n            return createEntryPointFunction(\n                function(session, characterOptions) {\n                    var trimmed = false;\n                    this.changeEachRange(function(range) {\n                        trimmed = range[methodName](characterOptions) || trimmed;\n                    });\n                    return trimmed;\n                }\n            );\n        }\n\n        extend(api.selectionPrototype, {\n            expand: createEntryPointFunction(\n                function(session, unit, expandOptions) {\n                    this.changeEachRange(function(range) {\n                        range.expand(unit, expandOptions);\n                    });\n                }\n            ),\n\n            move: createEntryPointFunction(\n                function(session, unit, count, options) {\n                    var unitsMoved = 0;\n                    if (this.focusNode) {\n                        this.collapse(this.focusNode, this.focusOffset);\n                        var range = this.getRangeAt(0);\n                        if (!options) {\n                            options = {};\n                        }\n                        options.characterOptions = createOptions(options.characterOptions, defaultCaretCharacterOptions);\n                        unitsMoved = range.move(unit, count, options);\n                        this.setSingleRange(range);\n                    }\n                    return unitsMoved;\n                }\n            ),\n\n            trimStart: createSelectionTrimmer(\"trimStart\"),\n            trimEnd: createSelectionTrimmer(\"trimEnd\"),\n            trim: createSelectionTrimmer(\"trim\"),\n\n            selectCharacters: createEntryPointFunction(\n                function(session, containerNode, startIndex, endIndex, direction, characterOptions) {\n                    var range = api.createRange(containerNode);\n                    range.selectCharacters(containerNode, startIndex, endIndex, characterOptions);\n                    this.setSingleRange(range, direction);\n                }\n            ),\n\n            saveCharacterRanges: createEntryPointFunction(\n                function(session, containerNode, characterOptions) {\n                    var ranges = this.getAllRanges(), rangeCount = ranges.length;\n                    var rangeInfos = [];\n\n                    var backward = rangeCount == 1 && this.isBackward();\n\n                    for (var i = 0, len = ranges.length; i < len; ++i) {\n                        rangeInfos[i] = {\n                            characterRange: ranges[i].toCharacterRange(containerNode, characterOptions),\n                            backward: backward,\n                            characterOptions: characterOptions\n                        };\n                    }\n\n                    return rangeInfos;\n                }\n            ),\n\n            restoreCharacterRanges: createEntryPointFunction(\n                function(session, containerNode, saved) {\n                    this.removeAllRanges();\n                    for (var i = 0, len = saved.length, range, rangeInfo, characterRange; i < len; ++i) {\n                        rangeInfo = saved[i];\n                        characterRange = rangeInfo.characterRange;\n                        range = api.createRange(containerNode);\n                        range.selectCharacters(containerNode, characterRange.start, characterRange.end, rangeInfo.characterOptions);\n                        this.addRange(range, rangeInfo.backward);\n                    }\n                }\n            ),\n\n            text: createEntryPointFunction(\n                function(session, characterOptions) {\n                    var rangeTexts = [];\n                    for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                        rangeTexts[i] = this.getRangeAt(i).text(characterOptions);\n                    }\n                    return rangeTexts.join(\"\");\n                }\n            )\n        });\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        // Extensions to the core rangy object\n\n        api.innerText = function(el, characterOptions) {\n            var range = api.createRange(el);\n            range.selectNodeContents(el);\n            var text = range.text(characterOptions);\n            return text;\n        };\n\n        api.createWordIterator = function(startNode, startOffset, iteratorOptions) {\n            var session = getSession();\n            iteratorOptions = createNestedOptions(iteratorOptions, defaultWordIteratorOptions);\n            var startPos = session.getPosition(startNode, startOffset);\n            var tokenizedTextProvider = createTokenizedTextProvider(startPos, iteratorOptions.characterOptions, iteratorOptions.wordOptions);\n            var backward = isDirectionBackward(iteratorOptions.direction);\n\n            return {\n                next: function() {\n                    return backward ? tokenizedTextProvider.previousStartToken() : tokenizedTextProvider.nextEndToken();\n                },\n\n                dispose: function() {\n                    tokenizedTextProvider.dispose();\n                    this.next = function() {};\n                }\n            };\n        };\n\n        /*----------------------------------------------------------------------------------------------------------------*/\n\n        api.noMutation = function(func) {\n            var session = getSession();\n            func(session);\n            endSession();\n        };\n\n        api.noMutation.createEntryPointFunction = createEntryPointFunction;\n\n        api.textRange = {\n            isBlockNode: isBlockNode,\n            isCollapsedWhitespaceNode: isCollapsedWhitespaceNode,\n\n            createPosition: createEntryPointFunction(\n                function(session, node, offset) {\n                    return session.getPosition(node, offset);\n                }\n            )\n        };\n    });\n    \n    return rangy;\n}","//console.log(1)\nimport rangy from './rangy-core.js'\n//console.log(2)\n//let rangy = require('./rangy-core.js')\n//window.rangy = rangy\n//require('./rangy-classapplier.js')\nimport ClassApplier from './rangy-classapplier.js'\nClassApplier(rangy)\n//require('./rangy-highlighter.js')\nimport Highlighter from './rangy-highlighter.js'\nHighlighter(rangy)\n\nimport Position from './rangy-position.js'\nPosition(rangy)\n\nimport Selection from './rangy-selectionsaverestore.js'\nSelection(rangy)\n\nimport TextRange from './rangy-textrange.js'\nTextRange(rangy)\n//console.log(HighlighterModule)\n//rangy = HighlighterModule(rangy)\n//console.log(rangy)\nexport default rangy","export * from \"-!../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./SectionAnnotationManager.html?vue&type=template&id=d9b324f8&scoped=true&\"","import mod from \"-!./SectionAnnotationManager.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./SectionAnnotationManager.js?vue&type=script&lang=js&\"","import $ from 'jquery'\nimport SectionPanel from './SectionPanel/SectionPanel.vue'\n\nlet SectionAnnotationManager = {\n  props: ['lib', 'status', 'config'],\n  data() {\n    this.$i18n.locale = this.config.locale\n    return {\n      sectionNodes: []\n    }\n  },\n  components: {\n    'section-panel': SectionPanel\n  },\n  computed: {\n  },\n  watch: {\n  },\n  mounted() {\n    this.initSectionNodes()\n  },\n  methods: {\n    initSectionNodes () {\n      this.sectionNodes = $('[data-pacor-section-seq-id]').toArray()\n    }\n  } // methods\n}\n\nexport default SectionAnnotationManager","import mod from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionAnnotationManager.less?vue&type=style&index=0&id=d9b324f8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionAnnotationManager.less?vue&type=style&index=0&id=d9b324f8&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./SectionAnnotationManager.html?vue&type=template&id=d9b324f8&scoped=true&\"\nimport script from \"./SectionAnnotationManager.js?vue&type=script&lang=js&\"\nexport * from \"./SectionAnnotationManager.js?vue&type=script&lang=js&\"\nimport style0 from \"./SectionAnnotationManager.less?vue&type=style&index=0&id=d9b324f8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d9b324f8\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./SectionAnnotationManager.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CSectionAnnotationManager%5CSectionAnnotationManager.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('d9b324f8')) {\n      api.createRecord('d9b324f8', component.options)\n    } else {\n      api.reload('d9b324f8', component.options)\n    }\n    module.hot.accept(\"./SectionAnnotationManager.html?vue&type=template&id=d9b324f8&scoped=true&\", function () {\n      api.rerender('d9b324f8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionAnnotationManager.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./SectionAnnotationManager.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CSectionAnnotationManager%5CSectionAnnotationManager.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./SectionAnnotationManager.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CSectionAnnotationManager%5CSectionAnnotationManager.vue&lang=yaml\"","export * from \"-!../../../../../../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./SectionPanel.html?vue&type=template&id=24156f54&scoped=true&\"","import mod from \"-!./SectionPanel.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./SectionPanel.js?vue&type=script&lang=js&\"","let SectionPanel = {\n  props: ['lib', 'status', 'config', 'node'],\n  data() {    \n    this.$i18n.locale = this.config.locale\n    return {\n    }\n  },\n  components: {\n  },\n  computed: {\n  },\n  watch: {\n  },\n  mounted() {\n    this.initPanel()\n  },\n  methods: {\n    initPanel () {\n      console.log(this.node)\n      this.node.parentNode.insertBefore(this.$refs.panel, this.node.nextSibling)\n    }\n  } // methods\n}\n\nexport default SectionPanel","import mod from \"-!../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionPanel.less?vue&type=style&index=0&id=24156f54&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../node_modules/vue-style-loader/index.js!../../../../../../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./SectionPanel.less?vue&type=style&index=0&id=24156f54&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./SectionPanel.html?vue&type=template&id=24156f54&scoped=true&\"\nimport script from \"./SectionPanel.js?vue&type=script&lang=js&\"\nexport * from \"./SectionPanel.js?vue&type=script&lang=js&\"\nimport style0 from \"./SectionPanel.less?vue&type=style&index=0&id=24156f54&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24156f54\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./SectionPanel.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CSectionAnnotationManager%5CSectionPanel%5CSectionPanel.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\xampp\\\\htdocs\\\\projects-nodejs\\\\PACOR\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('24156f54')) {\n      api.createRecord('24156f54', component.options)\n    } else {\n      api.reload('24156f54', component.options)\n    }\n    module.hot.accept(\"./SectionPanel.html?vue&type=template&id=24156f54&scoped=true&\", function () {\n      api.rerender('24156f54', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"webpack-app/client/components/ReadingProgressesModuels/Reading/components/AnnotationManager/SectionAnnotationManager/SectionPanel/SectionPanel.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./SectionPanel.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CSectionAnnotationManager%5CSectionPanel%5CSectionPanel.vue&lang=yaml\"; export default mod; export * from \"-!../../../../../../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./SectionPanel.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=D%3A%5Cxampp%5Chtdocs%5Cprojects-nodejs%5CPACOR%5Cwebpack-app%5Cclient%5Ccomponents%5CReadingProgressesModuels%5CReading%5Ccomponents%5CAnnotationManager%5CSectionAnnotationManager%5CSectionPanel%5CSectionPanel.vue&lang=yaml\""],"sourceRoot":""}