!function(u){function e(e){for(var t,n,r=e[0],i=e[1],s=e[2],o=0,a=[];o<r.length;o++)n=r[o],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&a.push(l[n][0]),l[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(u[t]=i[t]);for(f&&f(e);a.length;)a.shift()();return p.push.apply(p,s||[]),c()}function c(){for(var e,t=0;t<p.length;t++){for(var n=p[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==l[s]&&(r=!1)}r&&(p.splice(t--,1),e=d(d.s=n[0]))}return e}var n={},l={7:0},p=[];function d(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,d),t.l=!0,t.exports}d.e=function(i){var e=[],n=l[i];if(0!==n)if(n)e.push(n[2]);else{var t=new Promise(function(e,t){n=l[i]=[e,t]});e.push(n[2]=t);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,d.nc&&s.setAttribute("nonce",d.nc),s.src=function(e){return d.p+""+({8:"client-components/CollaborativeReading",9:"client-components/Exit",10:"client-components/FreeReading",11:"client-components/IndividualReading",12:"client-components/PostRecall",13:"client-components/PreImaginary",15:"vendors/semantic-ui-niwsf"}[e]||e)+".js"}(i);var o=new Error;r=function(e){s.onerror=s.onload=null,clearTimeout(a);var t=l[i];if(0!==t){if(t){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;o.message="Loading chunk "+i+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,t[1](o)}l[i]=void 0}};var a=setTimeout(function(){r({type:"timeout",target:s})},12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(e)},d.m=u,d.c=n,d.d=function(e,t,n){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(t,e){if(1&e&&(t=d(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(d.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)d.d(n,r,function(e){return t[e]}.bind(null,r));return n},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="http://127.0.0.1:3333/spa/",d.oe=function(e){throw console.error(e),e};var t=window.webpackJsonp=window.webpackJsonp||[],r=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var f=r;p.push([113,0,1]),c()}({102:function(e,t,n){"use strict";var r=n(22);n.n(r).a},103:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,"",""])},113:function(e,t,n){"use strict";n.r(t);function r(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"BlockExit"})}var i=n(4),s=(n(53),n(55),n(40)),o=n(30),a=n(31),u=n(32),c=n(33),l=n(9),p=n.n(l),d=n(66),f=n.n(d),m=n(10),g=n(38),h=n(39),v=n(35);r._withStripped=!0;function b(e){e.returnValue=""}var w={data:function(){return{}},created:function(){window.addEventListener("beforeunload",b,!0)},destroyed:function(){window.removeEventListener("beforeunload",b,!0)}},y=n(3),x=n(45),_=Object(y.a)(w,r,[],!1,null,null,null);"function"==typeof x.default&&Object(x.default)(_),_.options.__file="webpack-app/components/BlockExit/BlockExit.vue";function k(){var e=this.$createElement;return(this._self._c||e)("span")}var L=_.exports;k._withStripped=!0;function P(){!1===R&&(R=!0,C=(new Date).getTime())}var C,S,A,E=n(0),H=n.n(E),O=n(2),j=n.n(O),R=!1,U={props:["config","lib"],data:function(){return{timer:null,lastTime:null}},created:function(){var t=this,e=window.document;e.addEventListener("mousemove",P),e.addEventListener("keyup",P),e.addEventListener("touchend",P);var n=this.config.detectActivitySeconds;this.timer=setInterval(j()(H.a.mark(function e(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.send();case 1:case"end":return e.stop()}},e)})),1e3*n)},destroyed:(A=j()(H.a.mark(function e(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(this.timer),this.send();case 2:case"end":return e.stop()}},e,this)})),function(){return A.apply(this,arguments)}),methods:{toNow:function(){return Math.round(((new Date).getTime()-C)/1e3)},send:(S=j()(H.a.mark(function e(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===R)return e.next=3,this.lib.AxiosHelper.get("/client/ReadingProgress/activityTimer",{seconds:this.toNow()});e.next=4;break;case 3:R=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return S.apply(this,arguments)})}},M=Object(y.a)(U,k,[],!1,null,null,null);M.options.__file="webpack-app/components/ActivityTimer/ActivityTimer.vue";var T=M.exports;i.a.component("pagination",g.a),i.a.component("modal",h.a),i.a.component("step-progress-bar",v.a),i.a.component("block-exit",L),i.a.component("activity-timer",T);function $(){var e=this.$createElement;return(this._self._c||e)("div")}var I=n(36),D=n(37);$._withStripped=!0;var J,N,F,G,V,B=n(1),W=n.n(B),z={props:["lib","status","config","progress","error"],data:function(){return{}},watch:{"status.needLogin":function(){if(!1===this.status.needLogin){var e=this.getCurrentStep();this.status.view=e}}},mounted:(V=j()(H.a.mark(function e(){var t;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof this.config.username&&"string"==typeof this.config.usernameQueryURL)return e.next=3,this.loadUsernameFromURL();e.next=4;break;case 3:this.config.username=e.sent;case 4:if(t=!1,"string"==typeof this.config.username)return e.next=8,this.attemptLoginViaUsername(this.config.username);e.next=9;break;case 8:t=e.sent;case 9:if(!1===t)return e.next=12,this.checkLogin();e.next=12;break;case 12:case"end":return e.stop()}},e,this)})),function(){return V.apply(this,arguments)}),methods:{loadUsernameFromURL:(G=j()(H.a.mark(function e(){var t;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lib.AxiosHelper.getOther(this.config.usernameQueryURL);case 2:if("string"==typeof(t=e.sent))return e.abrupt("return",t);e.next=5;break;case 5:case"end":return e.stop()}},e,this)})),function(){return G.apply(this,arguments)}),attemptLoginViaUsername:(F=j()(H.a.mark(function e(t){var n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lib.AxiosHelper.get("/client/user/attempt-login-via-username",{username:t});case 2:if("string"==typeof(n=e.sent))return this.status.username=n,e.abrupt("return",!0);e.next=8;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,this)})),function(e){return F.apply(this,arguments)}),checkLogin:(N=j()(H.a.mark(function e(){var t,n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lib.AxiosHelper.get("/client/auth/checkLogin");case 2:if(t=e.sent,"object"===W()(t)){for(n in t)this.status[n]=t[n];this.status.needLogin=!1}else this.status.view="Login";case 4:case"end":return e.stop()}},e,this)})),function(){return N.apply(this,arguments)}),getCurrentStep:function(){if(Array.isArray(this.status.readingProgresses)&&0<this.status.readingProgresses.length){for(var e=0;e<this.status.readingProgresses.length;e++){var t=this.status.readingProgresses[e];if(!0!==t.isCompleted){if("number"!=typeof t.start_timestamp)return t.start_timestamp=this.lib.DayJSHelper.time(),t.step_name;if("number"==typeof t.start_timestamp&&"number"!=typeof t.end_timestamp)return t.step_name}}return this.status.readingProgressesFinish}return"not-yet-started"},nextStep:(J=j()(H.a.mark(function e(){var t,n,r;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lib.AxiosHelper.get("/client/ReadingProgress/end");case 2:t=this.lib.DayJSHelper.time(),n=0;case 4:if(!(n<this.status.readingProgresses.length)){e.next=14;break}if(!0===(r=this.status.readingProgresses[n]).isCompleted)return e.abrupt("continue",11);e.next=8;break;case 8:if("number"==typeof r.start_timestamp&&"number"!=typeof r.end_timestamp)return r.end_timestamp=t,e.abrupt("break",14);e.next=11;break;case 11:n++,e.next=4;break;case 14:this.status.view=this.getCurrentStep();case 15:case"end":return e.stop()}},e,this)})),function(){return J.apply(this,arguments)})}},Q=Object(y.a)(z,$,[],!1,null,null,null);Q.options.__file="webpack-app/client/components/Auth/Auth.vue";function q(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-modal"},[n("modal",{ref:"LoginModal",attrs:{config:t.config,status:t.status,progress:t.progress,error:t.error,lib:t.lib,dimmerTransparent:"false",cancelable:"false"},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{on:{click:function(e){t.adminMode=!t.adminMode}}},[t._v("\r\n          "+t._s(t.$t("Welcome to PACOR"))+"\r\n        ")])]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticClass:"ui middle aligned grid"},[n("div",{staticClass:"six wide column"},[n("img",{staticClass:"ui image",attrs:{src:t.config.baseURL+"/imgs/pacor.svg"}})]),t._v(" "),n("div",{staticClass:"ten wide column"},[n("div",{staticClass:"ui field"},[n("label",{attrs:{for:"loginUsername"}},[t._v("\r\n                "+t._s(t.$t("Username"))+"\r\n              ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",id:"loginUsername"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),t.adminMode?n("div",{staticClass:"ui field"},[n("label",{attrs:{for:"loginPassword"}},[t._v("\r\n                "+t._s(t.$t("Password"))+"\r\n              ")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",id:"loginPassword"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]):t._e()])])]},proxy:!0},{key:"actions",fn:function(){return[n("div",{staticClass:"ui button",class:{disabled:t.isDisableLogin},on:{click:t.login}},[t._v(t._s(t.$t("LOGIN")))])]},proxy:!0}])})],1)}var K=Q.exports;q._withStripped=!0;var X,Y={props:["lib","status","config","progress","error"],data:function(){return this.$i18n.locale=this.config.locale,{username:"a",password:"",adminMode:!1}},computed:{isDisableLogin:function(){return""===this.username||!1!==this.adminMode&&""!==this.password}},watch:{},mounted:function(){this.$refs.LoginModal.show()},methods:{login:(X=j()(H.a.mark(function e(){var t,n,r;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={username:this.username},this.adminMode&&(t.password=this.password),e.next=4,this.lib.AxiosHelper.get("/client/Auth/login",t);case 4:if(n=e.sent,"object"!==W()(n))return e.abrupt("return");e.next=7;break;case 7:for(r in n)this.status[r]=n[r];this.status.username=this.username,this.reset(),this.$refs.LoginModal.hide(),this.status.needLogin=!1;case 12:case"end":return e.stop()}},e,this)})),function(){return X.apply(this,arguments)}),reset:function(){this.username="",this.password=""}}},Z=(n(102),n(48)),ee=Object(y.a)(Y,q,[],!1,null,"7f785ee2",null);"function"==typeof Z.default&&Object(Z.default)(ee),ee.options.__file="webpack-app/client/components/Login/Login.vue";var te=ee.exports,ne={Loading:I.a,"error-handler":D.a,Auth:K,Login:te,CollaborativeReading:function(){return n.e(8).then(n.bind(null,245))},IndividualReading:function(){return n.e(11).then(n.bind(null,243))},PostRecall:function(){return n.e(12).then(n.bind(null,247))},PreImaginary:function(){return n.e(13).then(n.bind(null,246))},Exit:function(){return n.e(9).then(n.bind(null,242))},FreeReading:function(){return n.e(10).then(n.bind(null,244))}},re=n.p;re=re.split("/").slice(0,3).join("/"),m.a.baseURL=re;var ie=p()(document.currentScript);1===ie.length&&ie.before('<div id="app"></div>'),window.onerror=function(e,t,n,r,i){se.data.error=i},i.a.config.errorHandler=function(e,t,n){se.data.error=e,console.error(e)};var se={data:{config:m.a,status:{needLogin:!0,username:"",displayName:"",avatar:"",role:"reader",readingProgresses:[],title:"",view:"Loading"},progress:{component:!1,data:!1,display:!1},lib:{AxiosHelper:o.a.setBaseURL(re),DayJSHelper:a.a,StringHelper:u.a,ValidateHelper:c.a,auth:null},error:"",persistAttrs:[]},computed:{},watch:{"config.locale":function(){this.lib.DayJSHelper.setLocale(this.config.locale)}},created:function(){},mounted:function(){var n=this;this.lib.AxiosHelper.setErrorHandler(function(e){n.error=e}),this.lib.DayJSHelper.setI18N(function(e,t){return n.$t(e,t)}),this.lib.auth=this.$refs.auth},methods:{},el:"#app",i18n:s.a,template:f.a,components:ne};"string"==typeof re&&p()(function(){new i.a(se),p()("body > #TestMessage").remove()}),window.VueController=se},17:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":null,"zh-TW":{"Please don\'t leave.":"請不要離開"}}'),delete e.options._Ctor}},22:function(e,t,n){var r=n(103);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(7)(r,i);r.locals&&(e.exports=r.locals)},23:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{},"zh-TW":{"User {0} is not existed.":"使用者{0}不存在。","User {0} is registed.":"使用者{0}已經註冊。","Password is incorrect.":"密碼錯誤。","Username":"使用者名稱","Password":"密碼","Email":"電子信箱地址","Login":"登入","Register":"註冊","Login from Google":"從Google帳號登入","Login from GitHub":"從GitHub帳號登入","Login from Instagram":"從Instagram帳號登入"}}'),delete e.options._Ctor}},45:function(e,t,n){"use strict";var r=n(17),i=n.n(r);t.default=i.a},48:function(e,t,n){"use strict";var r=n(23),i=n.n(r);t.default=i.a},66:function(e,t){e.exports='<div class="non-invasive-web-style-framework">\r\n\r\n  <auth v-bind:config="config"\r\n        v-bind:status="status"\r\n        v-bind:progress="progress"\r\n        v-bind:lib="lib"\r\n        v-bind:error="error"\r\n        ref="auth"></auth>\r\n  <error-handler v-bind:config="config"\r\n                 v-bind:error="error"\r\n                 ref="ErrorHandler"></error-handler>\r\n  \r\n  \x3c!--\r\n  <rangy-manager v-bind:config="config"\r\n        v-bind:status="status"\r\n        v-bind:progress="progress"\r\n        v-bind:lib="lib"\r\n        v-bind:error="error"\r\n        v-bind:view="view"></rangy-manager>\r\n  \r\n  <note-editor-manager v-bind:config="config"\r\n        v-bind:status="status"\r\n        v-bind:progress="progress"\r\n        v-bind:lib="lib"\r\n        v-bind:error="error"\r\n        v-bind:view="view"></note-editor-manager>\r\n  --\x3e\r\n  \r\n  <component v-bind:is="status.view"\r\n      v-bind:config="config"\r\n      v-bind:status="status"\r\n      v-bind:progress="progress"\r\n      v-bind:lib="lib"\r\n      v-bind:error="error"></component>\r\n</div>'}});