(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{151:function(t,i,n){var e=n(248);"string"==typeof e&&(e=[[t.i,e,""]]);var a={insert:"head",singleton:!1};n(6)(e,a);e.locals&&(t.exports=e.locals)},152:function(t,i){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"Admins":"Admin | Admins","Webpages":"Webpage | Webpages"},"zh-TW":{"Title":"標題"}}'),delete t.options._Ctor}},153:function(t,i,n){var e=n(251);"string"==typeof e&&(e=[[t.i,e,""]]);var a={insert:"head",singleton:!1};n(6)(e,a);e.locals&&(t.exports=e.locals)},154:function(t,i){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{},"zh-TW":{"Title":"標題"}}'),delete t.options._Ctor}},155:function(t,i,n){var e=n(254);"string"==typeof e&&(e=[[t.i,e,""]]);var a={insert:"head",singleton:!1};n(6)(e,a);e.locals&&(t.exports=e.locals)},156:function(t,i){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{},"zh-TW":{}}'),delete t.options._Ctor}},247:function(t,i,n){"use strict";var e=n(151);n.n(e).a},248:function(t,i,n){(t.exports=n(5)(!1)).push([t.i,".sub-navigation a.active[data-v-0d65801e]{pointer-events:none}",""])},249:function(t,i,n){"use strict";var e=n(152),a=n.n(e);i.default=a.a},250:function(t,i,n){"use strict";var e=n(153);n.n(e).a},251:function(t,i,n){(t.exports=n(5)(!1)).push([t.i,".sub-navigation button.active[data-v-6fa28a26]{pointer-events:none}",""])},252:function(t,i,n){"use strict";var e=n(154),a=n.n(e);i.default=a.a},253:function(t,i,n){"use strict";var e=n(155);n.n(e).a},254:function(t,i,n){(t.exports=n(5)(!1)).push([t.i,"",""])},255:function(t,i,n){"use strict";var e=n(156),a=n.n(e);i.default=a.a},296:function(t,i,n){"use strict";n.r(i);function e(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"ui form"},[n("div",{staticClass:"ui secondary menu"},[n("div",{staticClass:"item"},[n("h2",[t._v(t._s(t.status.title))])]),t._v(" "),n("div",{staticClass:"right menu"},[n("a",{staticClass:"ui item",class:{active:t.$route.path.startsWith("/domain/list"),disabled:t.$route.path.startsWith("/domain/list")},attrs:{href:"#/domain/list"}},[n("i",{staticClass:"list icon"}),t._v("\r\n          "+t._s(t.$t("List"))+"\r\n        ")]),t._v(" "),n("a",{staticClass:"ui item",class:{active:t.$route.path.startsWith("/domain/add"),disabled:t.$route.path.startsWith("/domain/add")},attrs:{href:"#/domain/add"}},[n("i",{staticClass:"plus icon"}),t._v("\r\n          "+t._s(t.$t("Add"))+"\r\n        ")]),t._v(" "),n("a",{staticClass:"ui item",attrs:{href:"/admin/Database/admin?table=domains",target:"_blank"}},[n("i",{staticClass:"database icon"}),t._v("\r\n          "+t._s(t.$t("Database"))+"\r\n        ")])])]),t._v(" "),n(t.domainView,{tag:"component",attrs:{config:t.config,status:t.status,progress:t.progress,lib:t.lib,error:t.error,domainView:t.domainView}})],1)}function a(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ui form"},[a("pagination",{attrs:{pageConfig:e.pageConfig}}),e._v(" "),a("table",{staticClass:"ui unstackable table"},[a("thead",[a("tr",[a("th",{staticClass:"center aligned"},[e._v("\r\n          "+e._s(e.$t("Domain"))+"\r\n        ")]),e._v(" "),a("th",{staticClass:"center aligned"},[e._v("\r\n          "+e._s(e.$t("Title"))+"\r\n        ")]),e._v(" "),a("th",{staticClass:"center aligned"},[e._v("\r\n          "+e._s(e.$t("Config"))+"\r\n        ")]),e._v(" "),a("th",{staticClass:"center aligned"},[e._v("\r\n          "+e._s(e.$t("Admins"))+"\r\n        ")]),e._v(" "),a("th",{staticClass:"center aligned"},[e._v("\r\n          "+e._s(e.$t("Webpage"))+"\r\n        ")])])]),e._v(" "),a("tbody",e._l(e.domains,function(i,n){return a("tr",[a("td",[e._v("\r\n          "+e._s(i.domain)+"\r\n        ")]),e._v(" "),a("td",{staticClass:"field",class:{error:""===i.title}},[a("div",{staticClass:"ui action input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:i.title,expression:"domain.title"}],attrs:{type:"text"},domProps:{value:i.title},on:{input:[function(t){t.target.composing||e.$set(i,"title",t.target.value)},function(t){i.isChanged=!0}]}}),e._v(" "),a("button",{staticClass:"ui icon button",class:{disabled:!(!0===i.isChanged&&""!==i.title)},attrs:{type:"button"},on:{click:function(t){return e.editTitle(i,n)}}},[a("i",{staticClass:"edit icon"})])])]),e._v(" "),a("td",{staticClass:"center aligned"},[a("span",{staticClass:"ui icon button",on:{click:function(t){return e.editConfigOpen(i)}}},[a("i",{staticClass:"edit icon"})])]),e._v(" "),a("td",{staticClass:"center aligned"},["string"==typeof i.admins?a("span",{staticClass:"ui right labeled icon button",on:{click:function(t){return e.editAdminsOpen(i)}}},[e._v("\r\n            "+e._s(i.adminsCount)+"\r\n            "+e._s(e.$t("Admins",i.adminsCount))+"\r\n            "),a("i",{staticClass:"edit icon"})]):e._e()]),e._v(" "),a("td",{staticClass:"center aligned"},[a("a",{staticClass:"ui fluid right labeled icon button",attrs:{href:"#/webpage/"+i.id+"/list"}},[e._v("\r\n            "+e._s(i.__meta__.webpages_count)+"\r\n            "+e._s(e.$t("Webpages",i.__meta__.webpages_count))+"\r\n            "),a("i",{staticClass:"list icon"})])])])}),0)]),e._v(" "),a("pagination",{attrs:{pageConfig:e.pageConfig,pathPrefix:"/domains/"}}),e._v(" "),a("modal",{ref:"ModelEditAdmins",attrs:{config:e.config,status:e.status,progress:e.progress,error:e.error,lib:e.lib,reset:e.editingAdmins},scopedSlots:e._u([{key:"header",fn:function(){return[a("a",{staticClass:"ui button",attrs:{href:"/admin/Database/admin?table=users",target:"_blank"}},[e._v("\r\n          "+e._s(e.$t("DATABASE"))+"\r\n        ")]),e._v("\r\n        # "+e._s(e.editingAdmins.id)+"\r\n        "+e._s(e.editingAdmins.domain)+"\r\n        "),""!==e.editingAdmins.title&&null!==e.editingAdmins.title?[e._v("\r\n          ("+e._s(e.editingAdmins.title)+")\r\n        ")]:e._e()]},proxy:!0},{key:"content",fn:function(){return[a("div",{staticClass:"ui field"},[a("label",[e._v("\r\n            "+e._s(e.$t("Edit Admins "))+"\r\n            ("+e._s(e.$t("split by space"))+"\r\n             "),a("a",{attrs:{href:"https://github.com/pulipulichen/PACOR/blob/master/help/AdminsExample.md",target:"_blank"}},[e._v(e._s(e.$t("Example")))]),e._v(")\r\n          ")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editingAdmins.admins,expression:"editingAdmins.admins"}],domProps:{value:e.editingAdmins.admins},on:{input:[function(t){t.target.composing||e.$set(e.editingAdmins,"admins",t.target.value)},function(t){e.editingAdmins.isChanged=!0}]}})])]},proxy:!0},{key:"actions",fn:function(){return[a("div",{staticClass:"ui button",class:{disabled:!(!0===e.editingAdmins.isChanged)},on:{click:e.editAdminsSubmit}},[e._v(e._s(e.$t("OK")))])]},proxy:!0}])}),e._v(" "),a("modal",{ref:"ModelEditConfig",attrs:{config:e.config,status:e.status,progress:e.progress,error:e.error,lib:e.lib,reset:e.editingConfig},scopedSlots:e._u([{key:"header",fn:function(){return[a("a",{staticClass:"ui button",attrs:{href:"/admin/Database/admin?table=domains",target:"_blank"}},[e._v("\r\n          "+e._s(e.$t("DATABASE"))+"\r\n        ")]),e._v("\r\n        # "+e._s(e.editingConfig.id)+"\r\n        "+e._s(e.editingConfig.domain)+"\r\n        "),""!==e.editingConfig.title&&null!==e.editingConfig.title?[e._v("\r\n          ("+e._s(e.editingConfig.title)+")\r\n        ")]:e._e()]},proxy:!0},{key:"content",fn:function(){return[a("div",{staticClass:"ui field"},[a("label",[e._v("\r\n            "+e._s(e.$t("Edit Config"))+"\r\n            ("+e._s(e.$t("JSON format."))+"\r\n             "),a("a",{attrs:{href:"https://github.com/pulipulichen/PACOR/blob/master/help/ConfigExample.md",target:"_blank"}},[e._v(e._s(e.$t("Example")))]),e._v(")\r\n          ")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editingConfig.config,expression:"editingConfig.config"}],domProps:{value:e.editingConfig.config},on:{input:[function(t){t.target.composing||e.$set(e.editingConfig,"config",t.target.value)},function(t){e.editingConfig.isChanged=!0}]}})])]},proxy:!0},{key:"actions",fn:function(){return[a("div",{staticClass:"ui button",class:{disabled:!(!0===e.editingConfig.isChanged)},on:{click:e.editConfigSubmit}},[e._v(e._s(e.$t("OK")))])]},proxy:!0}])})],1)}a._withStripped=e._withStripped=!0;var s,o,r,d,l=n(0),c=n.n(l),u=n(1),p=n.n(u),m=n(2),g=n.n(m),f={props:["lib","status","config","progress","error","view","title"],data:function(){return this.$i18n.locale=this.config.locale,{domains:[],editingAdmins:{},editingConfig:{},pageConfig:{page:0,maxPage:0}}},components:{},computed:{"pageConfig.page":function(){if(!1===isNaN(this.pageConfig.page)){var t=this.$route.params.page;!0!==isNaN(t)&&parseInt(t,10)===this.pageConfig.page||(this.$router.push("/domain/list/"+this.pageConfig.page),localStorage.setItem("DomainList.pageConfig.page",this.pageConfig.page),this.list())}}},watch:{},mounted:function(){this.initPage(),this.status.title=this.$t("Domaian Management"),this.list()},methods:{initPage:function(){if(!0===isNaN(this.$route.params.page)){var t=localStorage.getItem("DomainList.pageConfig.page");!1===isNaN(t)&&null!==t?this.pageConfig.page=t:this.pageConfig.page=1}else this.pageConfig.page=parseInt(this.$route.params.page,10)},list:(d=g()(c.a.mark(function t(){var i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.lib.AxiosHelper.get("/Admin/Domain/list",{page:this.pageConfig.page});case 2:if(i=t.sent,"object"!==p()(i)){t.next=10;break}if(!Array.isArray(i.domains)){t.next=9;break}if(0===i.domains.length)return 1!==this.pageConfig.page&&(this.pageConfig.page=1),t.abrupt("return",!1);t.next=8;break;case 8:this.domains=i.domains;case 9:"number"==typeof i.maxPage&&(this.pageConfig.maxPage=i.maxPage);case 10:case"end":return t.stop()}},t,this)})),function(){return d.apply(this,arguments)}),editTitle:(r=g()(c.a.mark(function t(i,n){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:i.id,title:i.title},t.next=3,this.lib.AxiosHelper.post("/Admin/Domain/editTitle",e);case 3:this.domains[n].isChanged=!1,this.$forceUpdate();case 5:case"end":return t.stop()}},t,this)})),function(t,i){return r.apply(this,arguments)}),editAdminsOpen:function(t){this.editingAdmins=t,this.$refs.ModelEditAdmins.show()},editAdminsSubmit:(o=g()(c.a.mark(function t(){var i,n,e=this;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.editingAdmins,this.$refs.ModelEditAdmins.hide(),n={id:i.id},""!==i.admins&&(n.admins=i.admins.replace(/\n/g," ").trim().split(" ").map(function(t){var i=t.split(":");if(2!==i.length)throw e.$t('Format should be "admin:password"');return{username:i[0],password:i[1]}})),0===n.admins.length)return t.abrupt("return",!1);t.next=6;break;case 6:return i.adminsCount=n.admins.length,t.next=9,this.lib.AxiosHelper.post("/Admin/Domain/editAdmins",n);case 9:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)}),editConfigOpen:function(t){this.editingConfig=t,this.$refs.ModelEditConfig.show()},editConfigSubmit:(s=g()(c.a.mark(function t(){var i,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.ModelEditConfig.hide(),i=this.editingConfig,n={id:i.id},""!==i.config)try{n.config=JSON.parse(i.config)}catch(t){}else n.config=null;if(void 0===n.config)return t.abrupt("return",!1);t.next=6;break;case 6:return t.next=8,this.lib.AxiosHelper.post("/Admin/Domain/editConfig",n);case 8:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)})}},h=(n(247),n(4)),v=n(249),_=Object(h.a)(f,a,[],!1,null,"0d65801e",null);"function"==typeof v.default&&Object(v.default)(_),_.options.__file="webpack-app/admin/components/Domain/DomainList/DomainList.vue";function b(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"ui form"},[n("div",{staticClass:"three fields"},[n("div",{staticClass:"seven wide field",class:{error:!i.domainIsURL}},[n("label",{attrs:{for:"addInputDomain"}},[i._v("\r\n        "+i._s(i.$t("Domain (include http:// or https:// or port)"))+"\r\n      ")]),i._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:i.addInput.domain,expression:"addInput.domain"}],attrs:{type:"url",id:"addInputDomain",size:"256",name:"addInputDomain"},domProps:{value:i.addInput.domain},on:{input:function(t){t.target.composing||i.$set(i.addInput,"domain",t.target.value)}}})]),i._v(" "),n("div",{staticClass:"seven wide field"},[n("label",{attrs:{for:"addInputTitle"}},[i._v("\r\n        "+i._s(i.$t("Title"))+"\r\n      ")]),i._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:i.addInput.title,expression:"addInput.title"}],attrs:{type:"text",id:"addInputTitle",size:"256",name:"addInputTitle"},domProps:{value:i.addInput.title},on:{input:function(t){t.target.composing||i.$set(i.addInput,"title",t.target.value)}}})]),i._v(" "),n("div",{staticClass:"two wide field"},[n("label",[i._v("\r\n         \r\n      ")]),i._v(" "),n("button",{staticClass:"ui fluid button",class:{disabled:!i.enableAdd},attrs:{type:"button"},on:{click:i.addSubmit}},[i._v("\r\n        "+i._s(i.$t("SUBMIT"))+"\r\n      ")])])]),i._v(" "),n("div",{staticClass:"field",class:{error:!i.configIsJSON}},[n("label",{attrs:{for:"addInputConfig"}},[i._v("\r\n      "+i._s(i.$t("Config"))+"\r\n      ("+i._s(i.$t("JSON Format"))+"\r\n      "),n("a",{attrs:{href:"https://github.com/pulipulichen/PACOR/blob/master/help/ConfigExample.md",target:"_blank"}},[i._v(i._s(i.$t("Example")))]),i._v(")\r\n    ")]),i._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:i.addInput.config,expression:"addInput.config"}],staticClass:"ui red",attrs:{id:"addInputConfig",name:"addInputConfig"},domProps:{value:i.addInput.config},on:{input:function(t){t.target.composing||i.$set(i.addInput,"config",t.target.value)}}})])])}var C=_.exports;b._withStripped=!0;var x,$={props:["lib","status","config","progress","error","view"],data:function(){return this.$i18n.locale=this.config.locale,{addInput:{domain:"http://blog.pulipuli.info",title:"",admins:"",config:""}}},components:{},computed:{enableAdd:function(){return this.lib.ValidateHelper.isURL(this.addInput.domain)&&(""===this.addInput.config||this.lib.ValidateHelper.isJSON(this.addInput.config))},domainIsURL:function(){return""===this.addInput.domain||this.lib.ValidateHelper.isURL(this.addInput.domain)},configIsJSON:function(){return""===this.addInput.config||this.lib.ValidateHelper.isJSON(this.addInput.config)}},watch:{},mounted:function(){this.status.title=this.$t("Domaian Management")},methods:{addSubmit:(x=g()(c.a.mark(function t(){var i,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=JSON.parse(JSON.stringify(this.addInput)),n={domain:i.domain},""!==i.title&&(n.title=i.title),""!==i.admins&&(n.admins=i.admins.replace(/\n/g," ").trim().split(" ")),""!==i.config)try{n.config=JSON.parse(n.config)}catch(t){}return t.next=7,this.lib.AxiosHelper.post("/admin/Domain/add",n);case 7:1===t.sent&&this.$router.push("/domain/list/");case 9:case"end":return t.stop()}},t,this)})),function(){return x.apply(this,arguments)})}},w=(n(250),n(252)),A=Object(h.a)($,b,[],!1,null,"6fa28a26",null);"function"==typeof w.default&&Object(w.default)(A),A.options.__file="webpack-app/admin/components/Domain/DomainAdd/DomainAdd.vue";var I=A.exports,y={props:["lib","status","config","progress","error","view"],data:function(){return this.$i18n.locale=this.config.locale,{title:this.$t("Domain"),domainView:null}},components:{},computed:{},watch:{"$route.params.action":function(){this.switchComponent(this.$route.params.action)}},mounted:function(){"domain_admin"!==this.status.role?this.switchComponent(this.$route.params.action):this.$router.replace("/webpage/".concat(this.status.domainID,"/list"))},methods:{switchComponent:function(t){switch(t){case"list":this.domainView=C;break;case"add":this.domainView=I}}}},k=(n(253),n(255)),D=Object(h.a)(y,e,[],!1,null,"27eb83dc",null);"function"==typeof k.default&&Object(k.default)(D),D.options.__file="webpack-app/admin/components/Domain/Domain.vue";i.default=D.exports}}]);