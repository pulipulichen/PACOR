(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{158:function(t,e,i){var n=i(258);"string"==typeof n&&(n=[[t.i,n,""]]);var s={insert:"head",singleton:!1};i(6)(n,s);n.locals&&(t.exports=n.locals)},159:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"Admins":"Admin | Admins","Webpages":"Webpage | Webpages"},"zh-TW":{"Title":"標題"}}'),delete t.options._Ctor}},160:function(t,e,i){var n=i(261);"string"==typeof n&&(n=[[t.i,n,""]]);var s={insert:"head",singleton:!1};i(6)(n,s);n.locals&&(t.exports=n.locals)},161:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{},"zh-TW":{}}'),delete t.options._Ctor}},162:function(t,e,i){var n=i(264);"string"==typeof n&&(n=[[t.i,n,""]]);var s={insert:"head",singleton:!1};i(6)(n,s);n.locals&&(t.exports=n.locals)},163:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{},"zh-TW":{}}'),delete t.options._Ctor}},257:function(t,e,i){"use strict";var n=i(158);i.n(n).a},258:function(t,e,i){(t.exports=i(5)(!1)).push([t.i,".sub-navigation a.active[data-v-206aeb8a]{pointer-events:none}",""])},259:function(t,e,i){"use strict";var n=i(159),s=i.n(n);e.default=s.a},260:function(t,e,i){"use strict";var n=i(160);i.n(n).a},261:function(t,e,i){(t.exports=i(5)(!1)).push([t.i,"",""])},262:function(t,e,i){"use strict";var n=i(161),s=i.n(n);e.default=s.a},263:function(t,e,i){"use strict";var n=i(162);i.n(n).a},264:function(t,e,i){(t.exports=i(5)(!1)).push([t.i,"",""])},265:function(t,e,i){"use strict";var n=i(163),s=i.n(n);e.default=s.a},298:function(t,e,i){"use strict";i.r(e);function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui form"},[i("div",{staticClass:"ui secondary menu"},["global_admin"===t.status.role?i("a",{staticClass:"icon item",attrs:{href:"#/domain/list"}},[i("i",{staticClass:"angle left icon"})]):t._e(),t._v(" "),i("div",{staticClass:"item header"},[i("h2",[t._v(t._s(t.status.title))])]),t._v(" "),i("div",{staticClass:"right menu"},[i("a",{staticClass:"ui item",class:{"active disabled":"list"===t.$route.params.action},attrs:{href:"#/webpage/"+t.$route.params.domainID+"/list/"}},[i("i",{staticClass:"list icon"}),t._v("\r\n          "+t._s(t.$t("List"))+"\r\n        ")]),t._v(" "),i("a",{staticClass:"ui item",class:{"active disabled":"add"===t.$route.params.action},attrs:{href:"#/webpage/"+t.$route.params.domainID+"/add"}},[i("i",{staticClass:"plus icon"}),t._v("\r\n          "+t._s(t.$t("Add"))+"\r\n        ")]),t._v(" "),i("a",{staticClass:"ui item",attrs:{href:"/admin/Database/admin?table=webpages",target:"_blank"}},[i("i",{staticClass:"database icon"}),t._v("\r\n          "+t._s(t.$t("Database"))+"\r\n        ")])])]),t._v(" "),i(t.componentView,{tag:"component",attrs:{config:t.config,status:t.status,progress:t.progress,lib:t.lib,error:t.error}})],1)}function s(){var n=this,t=n.$createElement,s=n._self._c||t;return s("div",{staticClass:"ui form"},[s("pagination",{attrs:{pageConfig:n.pageConfig}}),n._v(" "),s("table",{staticClass:"ui unstackable table"},[s("thead",[s("tr",[s("th",{staticClass:"center aligned"},[n._v("\r\n          "+n._s(n.$t("Path"))+"\r\n        ")]),n._v(" "),s("th",{staticClass:"center aligned"},[n._v("\r\n          "+n._s(n.$t("Title"))+"\r\n        ")]),n._v(" "),s("th",{staticClass:"center aligned"},[n._v("\r\n          "+n._s(n.$t("Config"))+"\r\n        ")]),n._v(" "),s("th",{staticClass:"center aligned"},[n._v("\r\n          "+n._s(n.$t("Group"))+"\r\n        ")]),n._v(" "),s("th",{staticClass:"center aligned"},[n._v("\r\n          "+n._s(n.$t("Dashboard"))+"\r\n        ")])])]),n._v(" "),s("tbody",n._l(n.webpages,function(e,i){return s("tr",[s("td",[s("a",{attrs:{href:e.url,target:"_blank"}},[n._v("\r\n              "+n._s(e.path)+"\r\n          ")])]),n._v(" "),s("td",{staticClass:"field",class:{error:""===e.title}},[s("div",{staticClass:"ui action input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"webpage.title"}],attrs:{type:"text"},domProps:{value:e.title},on:{input:[function(t){t.target.composing||n.$set(e,"title",t.target.value)},function(t){e.isChanged=!0}]}}),n._v(" "),s("button",{staticClass:"ui icon button",class:{disabled:!(!0===e.isChanged&&""!==e.title)},attrs:{type:"button"},on:{click:function(t){return n.editTitle(e,i)}}},[s("i",{staticClass:"edit icon"})])])]),n._v(" "),s("td",{staticClass:"center aligned"},[s("span",{staticClass:"ui icon button",on:{click:function(t){return n.editConfigOpen(e)}}},[s("i",{staticClass:"edit icon"})])]),n._v(" "),s("td",{staticClass:"center aligned"},[s("span",{staticClass:"ui right labeled icon button",on:{click:function(t){return n.editGroupsOpen(e)}}},[n._v("\r\n            "+n._s(e.usersCount)+"\r\n            "+n._s(n.$t("Readers",e.usersCount))+"\r\n            /\r\n            "+n._s(e.groupsCount)+"\r\n            "+n._s(n.$t("Groups",e.groupsCount))+"\r\n            "),s("i",{staticClass:"edit icon"})])]),n._v(" "),s("td",{staticClass:"center aligned"},[s("a",{staticClass:"ui icon button",attrs:{href:"#/webpage-dashboard/"+e.id}},[s("i",{staticClass:"chart bar icon"})])])])}),0)]),n._v(" "),s("pagination",{attrs:{pageConfig:n.pageConfig}}),n._v(" "),s("modal",{ref:"ModelEditGroups",attrs:{config:n.config,status:n.status,progress:n.progress,error:n.error,lib:n.lib,reset:n.editingGroups},scopedSlots:n._u([{key:"header",fn:function(){return[s("a",{staticClass:"ui button",attrs:{href:"/admin/Database/admin?table=users",target:"_blank"}},[n._v("\r\n          "+n._s(n.$t("DATABASE"))+"\r\n        ")]),n._v("\r\n        # "+n._s(n.editingGroups.id)+"\r\n        "+n._s(n.editingGroups.url)+"\r\n        "),""!==n.editingGroups.title&&null!==n.editingGroups.title?[n._v("\r\n          ("+n._s(n.editingGroups.title)+")\r\n        ")]:n._e()]},proxy:!0},{key:"content",fn:function(){return[s("div",{staticClass:"ui field"},[s("label",[n._v("\r\n            "+n._s(n.$t("Edit Groups"))+"\r\n            ("+n._s(n.$t("each group per line. Readers in group is splited by space."))+"\r\n             "),s("a",{attrs:{href:"https://github.com/pulipulichen/PACOR/blob/master/help/GroupsExample.md",target:"_blank"}},[n._v(n._s(n.$t("Example")))]),n._v(")\r\n          ")]),n._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:n.editingGroups.groups,expression:"editingGroups.groups"}],domProps:{value:n.editingGroups.groups},on:{input:[function(t){t.target.composing||n.$set(n.editingGroups,"groups",t.target.value)},function(t){n.editingGroups.isChanged=!0}]}})])]},proxy:!0},{key:"actions",fn:function(){return[s("div",{staticClass:"ui button",class:{disabled:!(!0===n.editingGroups.isChanged)},on:{click:n.editGroupsSubmit}},[n._v(n._s(n.$t("OK")))])]},proxy:!0}])}),n._v(" "),s("modal",{ref:"ModelEditConfig",attrs:{config:n.config,status:n.status,progress:n.progress,error:n.error,lib:n.lib,reset:n.editingConfig},scopedSlots:n._u([{key:"header",fn:function(){return[s("a",{staticClass:"ui button",attrs:{href:"/admin/Database/admin?table=domains",target:"_blank"}},[n._v("\r\n          "+n._s(n.$t("DATABASE"))+"\r\n        ")]),n._v("\r\n        # "+n._s(n.editingConfig.id)+"\r\n        "+n._s(n.editingConfig.domain)+"\r\n        "),""!==n.editingConfig.title&&null!==n.editingConfig.title?[n._v("\r\n          ("+n._s(n.editingConfig.title)+")\r\n        ")]:n._e()]},proxy:!0},{key:"content",fn:function(){return[s("div",{staticClass:"ui field"},[s("label",[n._v("\r\n            "+n._s(n.$t("Edit Config"))+"\r\n            ("+n._s(n.$t("JSON format."))+"\r\n             "),s("a",{attrs:{href:"https://github.com/pulipulichen/PACOR/blob/master/help/ConfigExample.md",target:"_blank"}},[n._v(n._s(n.$t("Example")))]),n._v(")\r\n          ")]),n._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:n.editingConfig.config,expression:"editingConfig.config"}],domProps:{value:n.editingConfig.config},on:{input:[function(t){t.target.composing||n.$set(n.editingConfig,"config",t.target.value)},function(t){n.editingConfig.isChanged=!0}]}})])]},proxy:!0},{key:"actions",fn:function(){return[s("div",{staticClass:"ui button",class:{disabled:!(!0===n.editingConfig.isChanged)},on:{click:n.editConfigSubmit}},[n._v(n._s(n.$t("OK")))])]},proxy:!0}])})],1)}s._withStripped=n._withStripped=!0;var a,r,o,u,p=i(0),l=i.n(p),d=i(1),c=i.n(d),g=i(2),f=i.n(g),h={props:["lib","status","config","progress","error","view"],data:function(){return this.$i18n.locale=this.config.locale,{domain:"",webpages:[],editingGroups:{},editingConfig:{},pageConfig:{page:0,maxPage:0}}},components:{},computed:{"pageConfig.page":function(){if(!1===isNaN(this.pageConfig.page)){var t=this.$route.params.page;!0!==isNaN(t)&&parseInt(t,10)===this.pageConfig.page||(this.$router.push("/webpage/list/"+this.pageConfig.page),localStorage.setItem("WebpageList.pageConfig.page",this.pageConfig.page),this.list())}}},watch:{"status.domain":function(){var t=this.$t("Webpage Management");""!==this.status.domain&&(t=t+"("+this.status.domain+")"),this.status.title=t}},mounted:function(){this.initPage(),this.initTitle(),this.list()},methods:{initTitle:function(){var t=this.$t("Webpage Management");void 0!==this.status.domain&&""!==this.status.domain&&(t=t+" ("+this.status.domain+")"),this.status.title=t},initPage:function(){if(!0===isNaN(this.$route.params.page)){var t=localStorage.getItem("WebpageList.pageConfig.page");!1===isNaN(t)&&null!==t?this.pageConfig.page=t:this.pageConfig.page=1}else this.pageConfig.page=parseInt(this.$route.params.page,10)},list:(u=f()(l.a.mark(function t(){var e,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===(e=this.$route.params.domainID))return t.abrupt("return",!1);t.next=5;break;case 5:e=parseInt(e,10);case 6:return t.next=8,this.lib.AxiosHelper.get("/Admin/Webpage/list",{domainID:e,page:this.pageConfig.page});case 8:if(i=t.sent,"object"!==c()(i)){t.next=17;break}if(!Array.isArray(i.webpages)){t.next=15;break}if(0===i.webpages.length)return 1!==this.pageConfig.page&&(this.pageConfig.page=1),t.abrupt("return",!1);t.next=14;break;case 14:this.webpages=i.webpages;case 15:"string"==typeof i.domain&&(this.status.domain=i.domain),"number"==typeof i.maxPage&&(this.pageConfig.maxPage=i.maxPage);case 17:case"end":return t.stop()}},t,this)})),function(){return u.apply(this,arguments)}),editTitle:(o=f()(l.a.mark(function t(e,i){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e.id,title:e.title},t.next=3,this.lib.AxiosHelper.post("/Admin/Webpage/editTitle",n);case 3:this.webpages[i].isChanged=!1,this.$forceUpdate();case 5:case"end":return t.stop()}},t,this)})),function(t,e){return o.apply(this,arguments)}),editGroupsOpen:function(t){this.editingGroups=t,this.$refs.ModelEditGroups.show()},editGroupsSubmit:(r=f()(l.a.mark(function t(){var e,i,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.editingGroups,this.$refs.ModelEditGroups.hide(),i={id:e.id},n=0,""!==e.groups&&(i.groups=[],e.groups.trim().split("\n").forEach(function(t){if(""!==(t=t.trim())){var e=t.split(" ");i.groups.push(e),n+=e.length}})),0===i.groups.length)return t.abrupt("return",!1);t.next=7;break;case 7:return e.groupsCount=i.groups.length,e.usersCount=n,t.next=11,this.lib.AxiosHelper.post("/Admin/Webpage/editGroups",i);case 11:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)}),editConfigOpen:function(t){this.editingConfig=t,this.$refs.ModelEditConfig.show()},editConfigSubmit:(a=f()(l.a.mark(function t(){var e,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$refs.ModelEditConfig.hide(),e=this.editingConfig,i={id:e.id},""!==e.config)try{i.config=JSON.parse(e.config)}catch(t){}else i.config=null;if(void 0===i.config)return t.abrupt("return",!1);t.next=6;break;case 6:return t.next=8,this.lib.AxiosHelper.post("/Admin/Webpage/editConfig",i);case 8:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})}},m=(i(257),i(4)),v=i(259),b=Object(m.a)(h,s,[],!1,null,"206aeb8a",null);"function"==typeof v.default&&Object(v.default)(b),b.options.__file="webpack-app/admin/components/Webpage/WebpageList/WebpageList.vue";function _(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ui form"},[i("div",{staticClass:"three fields"},[i("div",{staticClass:"seven wide field",class:{error:!e.addInput.url.startsWith("http")}},[i("label",{attrs:{for:"addInputURL"}},[e._v("\r\n        "+e._s(e.$t("Webpage URL (start from http:// or https:// )"))+"\r\n      ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.addInput.url,expression:"addInput.url"}],attrs:{type:"text",id:"addInputURL",size:"256",name:"addInputURL"},domProps:{value:e.addInput.url},on:{input:function(t){t.target.composing||e.$set(e.addInput,"url",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"seven wide field"},[i("label",{attrs:{for:"addInputTitle"}},[e._v("\r\n        "+e._s(e.$t("Title"))+"\r\n      ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.addInput.title,expression:"addInput.title"}],attrs:{type:"text",id:"addInputTitle",size:"256",name:"addInputTitle"},domProps:{value:e.addInput.title},on:{input:function(t){t.target.composing||e.$set(e.addInput,"title",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"two wide field"},[i("label",[e._v("\r\n         \r\n      ")]),e._v(" "),i("button",{staticClass:"ui fluid button",class:{disabled:!e.enableAdd},attrs:{type:"button"},on:{click:e.addSubmit}},[e._v("\r\n        "+e._s(e.$t("SUBMIT"))+"\r\n      ")])])]),e._v(" "),i("div",{staticClass:"two fields"},[i("div",{staticClass:"field",class:{error:!e.configIsJSON}},[i("label",{attrs:{for:"addInputConfig"}},[e._v("\r\n      "+e._s(e.$t("Config"))+"\r\n      ("+e._s(e.$t("JSON Format"))+"\r\n      "),i("a",{attrs:{href:"https://github.com/pulipulichen/PACOR/blob/master/help/ConfigExample.md",target:"_blank"}},[e._v(e._s(e.$t("Example")))]),e._v(")\r\n    ")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.addInput.config,expression:"addInput.config"}],staticClass:"ui red",attrs:{id:"addInputConfig",name:"addInputConfig"},domProps:{value:e.addInput.config},on:{input:function(t){t.target.composing||e.$set(e.addInput,"config",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"field",class:{error:!e.configIsJSON}},[i("label",{attrs:{for:"addInputConfig"}},[e._v("\r\n      "+e._s(e.$t("Groups"))+"\r\n      ("+e._s(e.$t("each group per line. Readers in group is splited by space"))+"\r\n       "),i("a",{attrs:{href:"https://github.com/pulipulichen/PACOR/blob/master/help/GroupsExample.md",target:"_blank"}},[e._v(e._s(e.$t("Example")))]),e._v(")\r\n    ")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.addInput.groups,expression:"addInput.groups"}],staticClass:"ui red",attrs:{id:"addInputGroups",name:"addInputGroups"},domProps:{value:e.addInput.groups},on:{input:function(t){t.target.composing||e.$set(e.addInput,"groups",t.target.value)}}})])])])}var C=b.exports;_._withStripped=!0;var $,w={props:["lib","status","config","progress","error","view"],data:function(){return this.$i18n.locale=this.config.locale,{addInput:{url:"http://pc.pulipuli.info/test",title:"",groups:"",config:""}}},components:{},computed:{enableAdd:function(){return this.lib.ValidateHelper.isURL(this.addInput.url)&&(""===this.addInput.config||this.lib.ValidateHelper.isJSON(this.addInput.config))},configIsJSON:function(){return""===this.addInput.config||this.lib.ValidateHelper.isJSON(this.addInput.config)}},watch:{},mounted:function(){this.initTitle()},methods:{initTitle:function(){var t=this.$t("Webpage Add");void 0!==this.status.domain&&""!==this.status.domain&&(t=t+" ("+this.status.domain+")"),this.status.title=t},addSubmit:($=f()(l.a.mark(function t(){var e,i,n,s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=JSON.parse(JSON.stringify(this.addInput)),this.$route.params.domainID,i={url:e.url},""!==e.title&&(i.title=e.title),void 0!==e.groups&&""!==e.groups&&(n=[],e.groups.trim().split("\n").forEach(function(t){var e=t.trim().split(" ").filter(function(t){return""!==t});0<e.length&&n.push(e)}),0<n.length&&(i.groups=n)),""!==e.config)try{i.config=JSON.parse(i.config)}catch(t){}return t.next=8,this.lib.AxiosHelper.post("/admin/Webpage/add",i);case 8:"number"==typeof(s=t.sent)&&this.$router.push("/webpage/"+s+"/list");case 10:case"end":return t.stop()}},t,this)})),function(){return $.apply(this,arguments)})}},x=(i(260),i(262)),I=Object(m.a)(w,_,[],!1,null,"3d43ab06",null);"function"==typeof x.default&&Object(x.default)(I),I.options.__file="webpack-app/admin/components/Webpage/WebpageAdd/WebpageAdd.vue";var y=I.exports,k={props:["lib","status","config","progress","error","view"],data:function(){return this.$i18n.locale=this.config.locale,{title:this.$t("Webpage"),componentView:null}},components:{},computed:{},watch:{"$route.params.action":function(){this.switchCompnent(this.$route.params.action)}},mounted:function(){!0===isNaN(this.$route.params.domainID)&&this.$router.replace("/webpage/".concat(this.status.domainID,"/list")),this.switchCompnent(this.$route.params.action)},methods:{switchCompnent:function(t){switch(t){case"list":this.componentView=C;break;case"add":this.componentView=y}}}},G=(i(263),i(265)),A=Object(m.a)(k,n,[],!1,null,"c204274c",null);"function"==typeof G.default&&Object(G.default)(A),A.options.__file="webpack-app/admin/components/Webpage/Webpage.vue";e.default=A.exports}}]);